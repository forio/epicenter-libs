/*! Epicenter v3.1.0-alpha */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.epicenter=e():t.epicenter=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){t.exports=n(31)},function(t,e){function n(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,s,"next",t)}function s(t){n(a,o,i,c,s,"throw",t)}c(void 0)}))}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(32),o=n(33),i=n(15),a=n(34);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r=n(14);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(13),o=n(23);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){var r=n(28),o=n(29),i=n(15),a=n(30);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(22);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},o(e,n,i||e)}t.exports=o},function(t,e,n){var r=n(4),o=n(14),i=n(24),a=n(25);function c(e){var n="function"==typeof Map?new Map:void 0;return t.exports=c=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},c(e)}t.exports=c},function(t,e,n){var r=n(27);t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(16);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){t.exports=function(){var t=function(){var t=0,e={};this.register=function(n){var r=++t;return e[r]=n,r},this.unregister=function(t){var n=e[t];return delete e[t],n},this.setTimeout=function(t,e){return window.setTimeout(t,e)},this.clearTimeout=function(t){window.clearTimeout(t)}};function e(){var t={};self.onmessage=function(e){var n=e.data,r=t[n.id];switch(n.type){case"setTimeout":t[n.id]=self.setTimeout((function(){delete t[n.id],self.postMessage({id:n.id})}),n.delay);break;case"clearTimeout":delete t[n.id],r&&self.clearTimeout(r);break;default:throw"Unknown command "+n.type}}}var n={isString:function(t){return null!=t&&("string"==typeof t||t instanceof String)},isArray:function(t){return null!=t&&t instanceof Array},inArray:function(t,e){for(var n=0;n<e.length;++n)if(t===e[n])return n;return-1}},r=function(){var t=[],e={};this.getTransportTypes=function(){return t.slice(0)},this.findTransportTypes=function(n,r,o){for(var i=[],a=0;a<t.length;++a){var c=t[a];!0===e[c].accept(n,r,o)&&i.push(c)}return i},this.negotiateTransport=function(n,r,o,i){for(var a=0;a<t.length;++a)for(var c=t[a],s=0;s<n.length;++s)if(c===n[s]){var u=e[c];if(!0===u.accept(r,o,i))return u}return null},this.add=function(n,r,o){for(var i=!1,a=0;a<t.length;++a)if(t[a]===n){i=!0;break}return i||("number"!=typeof o?t.push(n):t.splice(o,0,n),e[n]=r),!i},this.find=function(n){for(var r=0;r<t.length;++r)if(t[r]===n)return e[n];return null},this.remove=function(n){for(var r=0;r<t.length;++r)if(t[r]===n){t.splice(r,1);var o=e[n];return delete e[n],o}return null},this.clear=function(){t=[],e={}},this.reset=function(n){for(var r=0;r<t.length;++r)e[t[r]].reset(n)}},o=function(){var t,e,r;this.registered=function(n,r){t=n,e=r},this.unregistered=function(){t=null,e=null},this._debug=function(){e._debug.apply(e,arguments)},this._mixin=function(){return e._mixin.apply(e,arguments)},this.getConfiguration=function(){return e.getConfiguration()},this.getAdvice=function(){return e.getAdvice()},this.setTimeout=function(t,n){return e.setTimeout(t,n)},this.clearTimeout=function(t){e.clearTimeout(t)},this.convertToMessages=function(t){if(n.isString(t))try{return JSON.parse(t)}catch(e){throw this._debug("Could not convert to JSON the following string",'"'+t+'"'),e}if(n.isArray(t))return t;if(null==t)return[];if(t instanceof Object)return[t];throw"Conversion Error "+t+", typeof "+typeof t},this.accept=function(t,e,n){throw"Abstract"},this.getType=function(){return t},this.getURL=function(){return r},this.setURL=function(t){r=t},this.send=function(t,e){throw"Abstract"},this.reset=function(e){this._debug("Transport",t,"reset",e?"initial":"retry")},this.abort=function(){this._debug("Transport",t,"aborted")},this.toString=function(){return this.getType()}};o.derive=function(t){function e(){}return e.prototype=t,new e};var i=function(){var t=new o,e=o.derive(t),r=0,i=null,a=[],c=[];function s(t){for(;c.length>0;){var e=c[0],n=e[0],r=e[1];if(n.url!==t.url||n.sync!==t.sync)break;c.shift(),t.messages=t.messages.concat(n.messages),this._debug("Coalesced",n.messages.length,"messages from request",r.id)}}function u(t,e){if(this.transportSend(t,e),e.expired=!1,!t.sync){var n=this.getConfiguration().maxNetworkDelay,r=n;!0===e.metaConnect&&(r+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",r,"ms for the response, maxNetworkDelay",n);var o=this;e.timeout=this.setTimeout((function(){e.expired=!0;var n="Request "+e.id+" of transport "+o.getType()+" exceeded "+r+" ms max network delay",i={reason:n},a=e.xhr;i.httpCode=o.xhrStatus(a),o.abortXHR(a),o._debug(n),o.complete(e,!1,e.metaConnect),t.onFailure(a,t.messages,i)}),r)}}function h(t){var e=++r,n={id:e,metaConnect:!1,envelope:t};a.length<this.getConfiguration().maxConnections-1?(a.push(n),u.call(this,t,n)):(this._debug("Transport",this.getType(),"queueing request",e,"envelope",t),c.push([t,n]))}function f(t){var e=t.id;if(this._debug("Transport",this.getType(),"/meta/connect complete, request",e),null!==i&&i.id!==e)throw"/meta/connect request mismatch, completing request "+e;i=null}function l(t,e){var r=n.inArray(t,a);if(r>=0&&a.splice(r,1),c.length>0){var o=c.shift(),i=o[0],u=o[1];if(this._debug("Transport dequeued request",u.id),e)this.getConfiguration().autoBatch&&s.call(this,i),h.call(this,i),this._debug("Transport completed request",t.id,i);else{var f=this;this.setTimeout((function(){f.complete(u,!1,u.metaConnect);var t={reason:"Previous request failed"},e=u.xhr;t.httpCode=f.xhrStatus(e),i.onFailure(e,i.messages,t)}),0)}}}function p(t){if(null!==i)throw"Concurrent /meta/connect requests not allowed, request id="+i.id+" not yet completed";var e=++r;this._debug("Transport",this.getType(),"/meta/connect send, request",e,"envelope",t);var n={id:e,metaConnect:!0,envelope:t};u.call(this,t,n),i=n}return e.complete=function(t,e,n){n?f.call(this,t):l.call(this,t,e)},e.transportSend=function(t,e){throw"Abstract"},e.transportSuccess=function(t,e,n){e.expired||(this.clearTimeout(e.timeout),this.complete(e,!0,e.metaConnect),n&&n.length>0?t.onSuccess(n):t.onFailure(e.xhr,t.messages,{httpCode:204}))},e.transportFailure=function(t,e,n){e.expired||(this.clearTimeout(e.timeout),this.complete(e,!1,e.metaConnect),t.onFailure(e.xhr,t.messages,n))},e.send=function(t,e){e?p.call(this,t):h.call(this,t)},e.abort=function(){t.abort();for(var e=0;e<a.length;++e){var n=a[e];n&&(this._debug("Aborting request",n),this.abortXHR(n.xhr)||this.transportFailure(n.envelope,n,{reason:"abort"}))}var r=i;r&&(this._debug("Aborting /meta/connect request",r),this.abortXHR(r.xhr)||this.transportFailure(r.envelope,r,{reason:"abort"})),this.reset(!0)},e.reset=function(e){t.reset(e),i=null,a=[],c=[]},e.abortXHR=function(t){if(t)try{var e=t.readyState;return t.abort(),e!==window.XMLHttpRequest.UNSENT}catch(t){this._debug(t)}return!1},e.xhrStatus=function(t){if(t)try{return t.status}catch(t){this._debug(t)}return-1},e},a=function(){var t=new i,e=o.derive(t),n=!0;return e.accept=function(t,e,r){return n||!e},e.newXMLHttpRequest=function(){return new window.XMLHttpRequest},e.xhrSend=function(t){var n=e.newXMLHttpRequest();!function(t){try{t.context=e.context}catch(t){this._debug("Could not copy transport context into XHR",t)}}(n),n.withCredentials=!0,n.open("POST",t.url,!0!==t.sync);var r=t.headers;if(r)for(var o in r)r.hasOwnProperty(o)&&n.setRequestHeader(o,r[o]);return n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onload=function(){200===n.status?t.onSuccess(n.responseText):t.onError(n.statusText)},n.onabort=n.onerror=function(){t.onError(n.statusText)},n.send(t.body),n},e.transportSend=function(t,e){this._debug("Transport",this.getType(),"sending request",e.id,"envelope",t);var r=this;try{var o=!0;e.xhr=this.xhrSend({transport:this,url:t.url,sync:t.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(t.messages),onSuccess:function(o){r._debug("Transport",r.getType(),"received response",o);var i=!1;try{var a=r.convertToMessages(o);0===a.length?(n=!1,r.transportFailure(t,e,{httpCode:204})):(i=!0,r.transportSuccess(t,e,a))}catch(o){if(r._debug(o),!i){n=!1;var c={exception:o};c.httpCode=r.xhrStatus(e.xhr),r.transportFailure(t,e,c)}}},onError:function(i,a){r._debug("Transport",r.getType(),"received error",i,a),n=!1;var c={reason:i,exception:a};c.httpCode=r.xhrStatus(e.xhr),o?r.setTimeout((function(){r.transportFailure(t,e,c)}),0):r.transportFailure(t,e,c)}}),o=!1}catch(o){n=!1,this.setTimeout((function(){r.transportFailure(t,e,{exception:o})}),0)}},e.reset=function(e){t.reset(e),n=!0},e},c=function(){var t=new i,e=o.derive(t),n=0;function r(t,e,n){var r=this;return function(){r.transportFailure(t,e,"error",n)}}return e.accept=function(t,e,n){return!0},e.jsonpSend=function(t){var e=document.getElementsByTagName("head")[0],r=document.createElement("script"),o="_cometd_jsonp_"+n++;window[o]=function(n){e.removeChild(r),delete window[o],t.onSuccess(n)};var i=t.url;i+=i.indexOf("?")<0?"?":"&",i+="jsonp="+o,i+="&message="+encodeURIComponent(t.body),r.src=i,r.async=!0!==t.sync,r.type="application/javascript",r.onerror=function(e){t.onError("jsonp "+e.type)},e.appendChild(r)},e.transportSend=function(t,e){for(var n=this,o=0,i=t.messages.length,a=[];i>0;){var c=JSON.stringify(t.messages.slice(o,o+i)),s=t.url.length+encodeURI(c).length,u=this.getConfiguration().maxURILength;if(s>u){if(1===i){var h="Bayeux message too big ("+s+" bytes, max is "+u+") for transport "+this.getType();return void this.setTimeout(r.call(this,t,e,h),0)}--i}else a.push(i),o+=i,i=t.messages.length-o}var f=t;if(a.length>1){var l=0,p=a[0];this._debug("Transport",this.getType(),"split",t.messages.length,"messages into",a.join(" + ")),(f=this._mixin(!1,{},t)).messages=t.messages.slice(l,p),f.onSuccess=t.onSuccess,f.onFailure=t.onFailure;for(var d=1;d<a.length;++d){var m=this._mixin(!1,{},t);l=p,p+=a[d],m.messages=t.messages.slice(l,p),m.onSuccess=t.onSuccess,m.onFailure=t.onFailure,this.send(m,e.metaConnect)}}this._debug("Transport",this.getType(),"sending request",e.id,"envelope",f);try{var y=!0;this.jsonpSend({transport:this,url:f.url,sync:f.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(f.messages),onSuccess:function(t){var r=!1;try{var o=n.convertToMessages(t);0===o.length?n.transportFailure(f,e,{httpCode:204}):(r=!0,n.transportSuccess(f,e,o))}catch(t){n._debug(t),r||n.transportFailure(f,e,{exception:t})}},onError:function(t,r){var o={reason:t,exception:r};y?n.setTimeout((function(){n.transportFailure(f,e,o)}),0):n.transportFailure(f,e,o)}}),y=!1}catch(t){this.setTimeout((function(){n.transportFailure(f,e,{exception:t})}),0)}},e},s=function(){var t,e=new o,r=o.derive(e),i=!0,a=!1,c=!0,s=null,u=null,h=!1,f=null;function l(t,e){t&&(this.webSocketClose(t,e.code,e.reason),this.onClose(t,e))}function p(t){return t===u||t===s}function d(t,e,n){for(var r=[],o=0;o<e.messages.length;++o){var i=e.messages[o];i.id&&r.push(i.id)}t.envelopes[r.join(",")]=[e,n],this._debug("Transport",this.getType(),"stored envelope, envelopes",t.envelopes)}function m(e){if(!u){var n=t.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",n);try{var r=t.getConfiguration().protocol;e.webSocket=r?new window.WebSocket(n,r):new window.WebSocket(n),u=e}catch(t){throw i=!1,this._debug("Exception while creating WebSocket object",t),t}c=!1!==t.getConfiguration().stickyReconnect;var o=this,h=t.getConfiguration().connectTimeout;h>0&&(e.connectTimer=this.setTimeout((function(){t._debug("Transport",o.getType(),"timed out while connecting to URL",n,":",h,"ms"),l.call(o,e,{code:1e3,reason:"Connect Timeout"})}),h));var f=function(n){n=n||{code:1e3},t._debug("WebSocket onclose",e,n,"connecting",u,"current",s),e.connectTimer&&o.clearTimeout(e.connectTimer),o.onClose(e,n)};e.webSocket.onopen=function(){t._debug("WebSocket onopen",e),e.connectTimer&&o.clearTimeout(e.connectTimer),p(e)?(u=null,s=e,a=!0,o.onOpen(e)):(t._warn("Closing extra WebSocket connection",this,"active connection",s),l.call(o,e,{code:1e3,reason:"Extra Connection"}))},e.webSocket.onclose=f,e.webSocket.onerror=function(){f({code:1e3,reason:"Error"})},e.webSocket.onmessage=function(n){t._debug("WebSocket onmessage",n,e),o.onMessage(e,n)},this._debug("Transport",this.getType(),"configured callbacks on",e)}}function y(e,n,r){var o=JSON.stringify(n.messages);e.webSocket.send(o),this._debug("Transport",this.getType(),"sent",n,"/meta/connect =",r);var i=this.getConfiguration().maxNetworkDelay,a=i;r&&(a+=this.getAdvice().timeout,h=!0);for(var c=this,s=[],u=0;u<n.messages.length;++u)!function(){var r=n.messages[u];r.id&&(s.push(r.id),e.timeouts[r.id]=c.setTimeout((function(){t._debug("Transport",c.getType(),"timing out message",r.id,"after",a,"on",e),l.call(c,e,{code:1e3,reason:"Message Timeout"})}),a))}();this._debug("Transport",this.getType(),"waiting at most",a,"ms for messages",s,"maxNetworkDelay",i,", timeouts:",e.timeouts)}function g(t,e,n){try{null===t?(t=u||{envelopes:{},timeouts:{}},d.call(this,t,e,n),m.call(this,t)):(d.call(this,t,e,n),y.call(this,t,e,n))}catch(e){var r=this;this.setTimeout((function(){l.call(r,t,{code:1e3,reason:"Exception",exception:e})}),0)}}return r.reset=function(t){e.reset(t),i=!0,t&&(a=!1),c=!0,s=null,u=null,h=!1},r._notifySuccess=function(t,e){t.call(this,e)},r._notifyFailure=function(t,e,n,r){t.call(this,e,n,r)},r.onOpen=function(t){var e=t.envelopes;for(var n in this._debug("Transport",this.getType(),"opened",t,"pending messages",e),e)if(e.hasOwnProperty(n)){var r=e[n],o=r[0],i=r[1];f=o.onSuccess,y.call(this,t,o,i)}},r.onMessage=function(t,e){this._debug("Transport",this.getType(),"received websocket message",e,t);for(var r=!1,o=this.convertToMessages(e.data),i=[],a=0;a<o.length;++a){var c=o[a];if((/^\/meta\//.test(c.channel)||void 0===c.data)&&c.id){i.push(c.id);var s=t.timeouts[c.id];s&&(this.clearTimeout(s),delete t.timeouts[c.id],this._debug("Transport",this.getType(),"removed timeout for message",c.id,", timeouts",t.timeouts))}"/meta/connect"===c.channel&&(h=!1),"/meta/disconnect"!==c.channel||h||(r=!0)}for(var u=!1,l=t.envelopes,p=0;p<i.length;++p){var d=i[p];for(var m in l)if(l.hasOwnProperty(m)){var y=m.split(","),g=n.inArray(d,y);if(g>=0){u=!0,y.splice(g,1);var v=l[m][0],b=l[m][1];delete l[m],y.length>0&&(l[y.join(",")]=[v,b]);break}}}u&&this._debug("Transport",this.getType(),"removed envelope, envelopes",l),this._notifySuccess(f,o),r&&this.webSocketClose(t,1e3,"Disconnect")},r.onClose=function(t,e){this._debug("Transport",this.getType(),"closed",t,e),p(t)&&(i=c&&a,u=null,s=null);var n=t.timeouts;for(var r in t.timeouts={},n)n.hasOwnProperty(r)&&this.clearTimeout(n[r]);var o=t.envelopes;for(var f in t.envelopes={},o)if(o.hasOwnProperty(f)){var l=o[f][0];o[f][1]&&(h=!1);var d={websocketCode:e.code,reason:e.reason};e.exception&&(d.exception=e.exception),this._notifyFailure(l.onFailure,t,l.messages,d)}},r.registered=function(n,r){e.registered(n,r),t=r},r.accept=function(e,n,r){return this._debug("Transport",this.getType(),"accept, supported:",i),i&&!!window.WebSocket&&!1!==t.websocketEnabled},r.send=function(t,e){this._debug("Transport",this.getType(),"sending",t,"/meta/connect =",e),g.call(this,s,t,e)},r.webSocketClose=function(t,e,n){try{t.webSocket&&t.webSocket.close(e,n)}catch(t){this._debug(t)}},r.abort=function(){e.abort(),l.call(this,s,{code:1e3,reason:"Abort"}),this.reset(!0)},r},u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",".","-",":","+","=","^","!","/","*","?","&","<",">","(",")","[","]","{","}","@","%","$","#"],h=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0];return{CometD:function(o){var i,u,h,f,l,p=new t,d=this,m=o||"default",y=!1,g=new r,v="disconnected",b=0,w=null,x=0,S=[],k=!1,T=0,_={},N=0,O=null,j=[],E={},P={},R={},A=!1,C=!1,I=0,L=0,U=null,D={useWorkerScheduler:!0,protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,urls:{},maxURILength:2e3,advice:{timeout:6e4,interval:0,reconnect:void 0,maxInterval:0}};function B(t,e){try{return t[e]}catch(t){return}}function M(t){return n.isString(t)}function F(t){return null!=t&&"function"==typeof t}function K(t,e){for(var n="";--e>0&&!(t>=Math.pow(10,e));)n+="0";return n+=t}function q(t,e){if(window.console){var n=window.console[t];if(F(n)){var r=new Date;[].splice.call(e,0,0,K(r.getHours(),2)+":"+K(r.getMinutes(),2)+":"+K(r.getSeconds(),2)+"."+K(r.getMilliseconds(),3)),n.apply(window.console,e)}}}function H(t){return new RegExp("(^https?://)?(((\\[[^\\]]+])|([^:/?#]+))(:(\\d+))?)?([^?#]*)(.*)?").exec(t)}function W(t){d._debug("Configuring cometd object with",t),M(t)&&(t={url:t}),t||(t={}),D=d._mixin(!1,D,t);var n=d.getURL();if(!n)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var r=H(n),o=r[2],i=r[8],a=r[9];if(y=d._isCrossDomain(o),D.appendMessageTypeToURL)if(void 0!==a&&a.length>0)d._info("Appending message type to URI "+i+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1;else{var c=i.split("/"),s=c.length-1;i.match(/\/$/)&&(s-=1),c[s].indexOf(".")>=0&&(d._info("Appending message type to URI "+i+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1)}if(window.Worker&&window.Blob&&window.URL&&D.useWorkerScheduler){var u=e.toString();u=u.substring(u.indexOf("{")+1,u.lastIndexOf("}"));var h=new window.Blob([u],{type:"application/json"}),f=window.URL.createObjectURL(h),l=new window.Worker(f);p.setTimeout=function(t,e){var n=p.register(t);return l.postMessage({id:n,type:"setTimeout",delay:e}),n},p.clearTimeout=function(t){p.unregister(t),l.postMessage({id:t,type:"clearTimeout"})},l.onmessage=function(t){var e=t.data.id,n=p.unregister(e);n&&n()}}}function X(t){if(t){var e=_[t.channel];e&&e[t.id]&&(delete e[t.id],d._debug("Removed",t.listener?"listener":"subscription",t))}}function V(t){t&&!t.listener&&X(t)}function J(){for(var t in _)if(_.hasOwnProperty(t)){var e=_[t];if(e)for(var n in e)e.hasOwnProperty(n)&&V(e[n])}}function G(t){v!==t&&(d._debug("Status",v,"->",t),v=t)}function z(){return"disconnecting"===v||"disconnected"===v}function Y(){return""+ ++b}function $(t,e,n,r,o){try{return e.call(t,r)}catch(t){var i=d.onExtensionException;if(F(i)){d._debug("Invoking extension exception handler",n,t);try{i.call(d,t,n,o,r)}catch(t){d._info("Exception during execution of extension exception handler",n,t)}}else d._info("Exception during execution of extension",n,t);return r}}function Z(t){for(var e=j.length-1;e>=0&&null!=t;--e){var n=j[e],r=n.extension.outgoing;if(F(r)){var o=$(n.extension,r,n.name,t,!0);t=void 0===o?t:o}}return t}function Q(t,e){var n=_[t];if(n)for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o)try{o.callback.call(o.scope,e)}catch(t){var i=d.onListenerException;if(F(i)){d._debug("Invoking listener exception handler",o,t);try{i.call(d,t,o,o.listener,e)}catch(t){d._info("Exception during execution of listener exception handler",o,t)}}else d._info("Exception during execution of listener",o,e,t)}}}function tt(t,e){Q(t,e);for(var n=t.split("/"),r=n.length-1,o=r;o>0;--o){var i=n.slice(0,o).join("/")+"/*";o===r&&Q(i,e),Q(i+="*",e)}}function et(){null!==O&&d.clearTimeout(O),O=null}function nt(t,e){et();var n=E.interval+e;d._debug("Function scheduled in",n,"ms, interval =",E.interval,"backoff =",N,t),O=d.setTimeout(t,n)}function rt(t,e,n){for(var r=0;r<t.length;++r){var o=t[r],a=o.id;w&&(o.clientId=w),null!=(o=Z(o))?(o.id=a,t[r]=o):(delete P[a],t.splice(r--,1))}if(0!==t.length){e&&(U=t[0]);var c=d.getURL();D.appendMessageTypeToURL&&(c.match(/\/$/)||(c+="/"),n&&(c+=n));var s={url:c,sync:!1,messages:t,onSuccess:function(t){try{f.call(d,t)}catch(t){d._info("Exception during handling of messages",t)}},onFailure:function(t,e,n){try{var r=d.getTransport();n.connectionType=r?r.getType():"unknown",l.call(d,t,e,n)}catch(t){d._info("Exception during handling of failure",t)}}};d._debug("Send",s),i.send(s,e)}}function ot(t){x>0||!0===k?S.push(t):rt([t],!1)}function it(){N=0}function at(){var t=S;S=[],t.length>0&&rt(t,!1)}function ct(t){G("connecting"),nt((function(){!function(){if(!z()){var t={id:Y(),channel:"/meta/connect",connectionType:i.getType()};C||(t.advice={timeout:0}),G("connecting"),d._debug("Connect sent",t),rt([t],!0,"connect"),G("connected")}}()}),t)}function st(t){t&&(E=d._mixin(!1,{},D.advice,t),d._debug("New advice",E))}function ut(t){if(et(),t&&i&&i.abort(),y=!1,i=null,G("disconnected"),w=null,x=0,it(),A=!1,C=!1,I=0,U=null,S.length>0){var e=S;S=[],l.call(d,void 0,e,{reason:"Disconnected"})}}function ht(t,e,n){var r=d.onTransportException;if(F(r)){d._debug("Invoking transport exception handler",t,e,n);try{r.call(d,n,t,e)}catch(t){d._info("Exception during execution of transport exception handler",t)}}}function ft(t,e){F(t)&&(e=t,t=void 0),w=null,J(),z()&&g.reset(!0),st({}),x=0,k=!0,u=t,h=e;var n=d.getURL(),r=g.findTransportTypes("1.0",y,n),o={id:Y(),version:"1.0",minimumVersion:"1.0",channel:"/meta/handshake",supportedConnectionTypes:r,advice:{timeout:E.timeout,interval:E.interval}},a=d._mixin(!1,{},u,o);if(d._putCallback(a.id,e),!i&&!(i=g.negotiateTransport(r,"1.0",y,n))){var c="Could not find initial transport among: "+g.getTransportTypes();throw d._warn(c),c}d._debug("Initial transport is",i.getType()),G("handshaking"),d._debug("Handshake sent",a),rt([a],!1,"handshake")}function lt(t,e){try{t.call(d,e)}catch(t){var n=d.onCallbackException;if(F(n)){d._debug("Invoking callback exception handler",t);try{n.call(d,t,e)}catch(t){d._info("Exception during execution of callback exception handler",t)}}else d._info("Exception during execution of message callback",t)}}function pt(t){var e=d._getCallback([t.id]);F(e)&&(delete P[t.id],lt(e,t))}function dt(t){var e=R[t.id];if(delete R[t.id],e){d._debug("Handling remote call response for",t,"with context",e);var n=e.timeout;n&&d.clearTimeout(n);var r=e.callback;if(F(r))return lt(r,t),!0}return!1}function mt(t){d._debug("Transport failure handling",t),t.transport&&(i=t.transport),t.url&&i.setURL(t.url);var e=t.action,n=t.delay||0;switch(e){case"handshake":!function(t){G("handshaking"),k=!0,nt((function(){ft(u,h)}),t)}(n);break;case"retry":ct(n);break;case"none":ut(!0);break;default:throw"Unknown action "+e}}function yt(t,e){pt(t),tt("/meta/handshake",t),tt("/meta/unsuccessful",t),z()&&(e.action="none"),d.onTransportFailure.call(d,t,e,mt)}function gt(t){yt(t,{cause:"failure",action:"handshake",transport:null})}function vt(t){return"disconnected"===v||!(!U||U.id!==t.id)&&(U=null,!0)}function bt(t,e){tt("/meta/connect",t),tt("/meta/unsuccessful",t),z()&&(e.action="none"),d.onTransportFailure.call(d,t,e,mt)}function wt(t){vt(t)?(C=!1,bt(t,{cause:"failure",action:"retry",transport:null})):d._debug("Mismatched /meta/connect failure",t)}function xt(t){ut(!0),pt(t),tt("/meta/disconnect",t),tt("/meta/unsuccessful",t)}function St(t){xt(t)}function kt(t){var e=_[t.subscription];if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r&&!r.listener&&(delete e[n],d._debug("Removed failed subscription",r))}pt(t),tt("/meta/subscribe",t),tt("/meta/unsuccessful",t)}function Tt(t){kt(t)}function _t(t){pt(t),tt("/meta/unsubscribe",t),tt("/meta/unsuccessful",t)}function Nt(t){_t(t)}function Ot(t){dt(t)||(pt(t),tt("/meta/publish",t),tt("/meta/unsuccessful",t))}function jt(t){Ot(t)}function Et(t){if(I=0,null!=(t=function(t){for(var e=0;e<j.length&&null!=t;++e){var n=j[e],r=n.extension.incoming;if(F(r)){var o=$(n.extension,r,n.name,t,!1);t=void 0===o?t:o}}return t}(t)))switch(st(t.advice),t.channel){case"/meta/handshake":!function(t){var e=d.getURL();if(t.successful){var n=d._isCrossDomain(H(e)[2]),r=g.negotiateTransport(t.supportedConnectionTypes,t.version,n,e);if(null===r)return t.successful=!1,void yt(t,{cause:"negotiation",action:"none",transport:null});i!==r&&(d._debug("Transport",i.getType(),"->",r.getType()),i=r),w=t.clientId,k=!1,at(),t.reestablish=A,A=!0,pt(t),tt("/meta/handshake",t),L=t["x-messages"]||0;var o=z()?"none":E.reconnect||"retry";switch(o){case"retry":it(),0===L?ct(0):d._debug("Processing",L,"handshake-delivered messages");break;case"none":ut(!0);break;default:throw"Unrecognized advice action "+o}}else yt(t,{cause:"unsuccessful",action:E.reconnect||"handshake",transport:i})}(t);break;case"/meta/connect":!function(t){if(vt(t))if(C=t.successful){tt("/meta/connect",t);var e=z()?"none":E.reconnect||"retry";switch(e){case"retry":it(),ct(N);break;case"none":ut(!1);break;default:throw"Unrecognized advice action "+e}}else bt(t,{cause:"unsuccessful",action:E.reconnect||"retry",transport:i});else d._debug("Mismatched /meta/connect reply",t)}(t);break;case"/meta/disconnect":!function(t){t.successful?(ut(!1),pt(t),tt("/meta/disconnect",t)):xt(t)}(t);break;case"/meta/subscribe":!function(t){t.successful?(pt(t),tt("/meta/subscribe",t)):kt(t)}(t);break;case"/meta/unsubscribe":!function(t){t.successful?(pt(t),tt("/meta/unsubscribe",t)):_t(t)}(t);break;default:!function(t){void 0!==t.data?dt(t)||(tt(t.channel,t),L>0&&0==--L&&(d._debug("Processed last handshake-delivered message"),ct(0))):void 0===t.successful?d._warn("Unknown Bayeux Message",t):t.successful?(pt(t),tt("/meta/publish",t)):Ot(t)}(t)}}function Pt(t){var e=_[t];if(e)for(var n in e)if(e.hasOwnProperty(n)&&e[n])return!0;return!1}function Rt(t,e){var n={scope:t,method:e};if(F(t))n.scope=void 0,n.method=t;else if(M(e)){if(!t)throw"Invalid scope "+t;if(n.method=t[e],!F(n.method))throw"Invalid callback "+e+" for scope "+t}else if(!F(e))throw"Invalid callback "+e;return n}function At(t,e,n,r){var o=Rt(e,n);d._debug("Adding",r?"listener":"subscription","on",t,"with scope",o.scope,"and callback",o.method);var i=++T,a={id:i,channel:t,scope:o.scope,callback:o.method,listener:r},c=_[t];return c||(c={},_[t]=c),c[i]=a,d._debug("Added",r?"listener":"subscription",a),a}this._mixin=function(t,e,n){for(var r=e||{},o=2;o<arguments.length;++o){var i=arguments[o];if(null!=i)for(var a in i)if(i.hasOwnProperty(a)){var c=B(i,a),s=B(r,a);if(c===e)continue;if(void 0===c)continue;if(t&&"object"==typeof c&&null!==c)if(c instanceof Array)r[a]=this._mixin(t,s instanceof Array?s:[],c);else{var u="object"!=typeof s||s instanceof Array?{}:s;r[a]=this._mixin(t,u,c)}else r[a]=c}}return r},this._warn=function(){q("warn",arguments)},this._info=function(){"warn"!==D.logLevel&&q("info",arguments)},this._debug=function(){"debug"===D.logLevel&&q("debug",arguments)},this._isCrossDomain=function(t){return!!(window.location&&window.location.host&&t)&&t!==window.location.host},this.send=ot,this._getCallback=function(t){return P[t]},this._putCallback=function(t,e){var n=this._getCallback(t);return F(e)&&(P[t]=e),n},this.onTransportFailure=function(t,e,n){this._debug("Transport failure",e,"for",t);var r=this.getTransportRegistry(),o=this.getURL(),a=this._isCrossDomain(H(o)[2]),c=r.findTransportTypes("1.0",a,o);if("none"===e.action){if("/meta/handshake"===t.channel&&!e.transport){var s="Could not negotiate transport, client=["+c+"], server=["+t.supportedConnectionTypes+"]";this._warn(s),ht(i.getType(),null,{reason:s,connectionType:i.getType(),transport:i})}}else if(e.delay=this.getBackoffPeriod(),"/meta/handshake"===t.channel){if(!e.transport){var u=i?i.getType():null,h=r.negotiateTransport(c,"1.0",a,o);if(h){var f=h.getType();this._debug("Transport",u,"->",f),ht(u,f,t.failure),e.action="handshake",e.transport=h}else this._warn("Could not negotiate transport, client=["+c+"]"),ht(u,null,t.failure),e.action="none"}"none"!==e.action&&this.increaseBackoffPeriod()}else{var l=(new Date).getTime();if(0===I&&(I=l),"retry"===e.action){e.delay=this.increaseBackoffPeriod();var p=E.maxInterval;if(p>0){var m=E.timeout+E.interval+p;l-I+N>m&&(e.action="handshake")}}"handshake"===e.action&&(e.delay=0,r.reset(!1),this.resetBackoffPeriod())}n.call(d,e)},this.receive=Et,f=function(t){d._debug("Received",t);for(var e=0;e<t.length;++e)Et(t[e])},l=function(t,e,n){d._debug("handleFailure",t,e,n),n.transport=t;for(var r=0;r<e.length;++r){var o=e[r],i={id:o.id,successful:!1,channel:o.channel,failure:n};switch(n.message=o,o.channel){case"/meta/handshake":gt(i);break;case"/meta/connect":wt(i);break;case"/meta/disconnect":St(i);break;case"/meta/subscribe":i.subscription=o.subscription,Tt(i);break;case"/meta/unsubscribe":i.subscription=o.subscription,Nt(i);break;default:jt(i)}}},this.registerTransport=function(t,e,n){var r=g.add(t,e,n);return r&&(this._debug("Registered transport",t),F(e.registered)&&e.registered(t,this)),r},this.unregisterTransport=function(t){var e=g.remove(t);return null!==e&&(this._debug("Unregistered transport",t),F(e.unregistered)&&e.unregistered()),e},this.unregisterTransports=function(){g.clear()},this.getTransportTypes=function(){return g.getTransportTypes()},this.findTransport=function(t){return g.find(t)},this.getTransportRegistry=function(){return g},this.configure=function(t){W.call(this,t)},this.init=function(t,e){this.configure(t),this.handshake(e)},this.handshake=function(t,e){if("disconnected"!==v)throw"Illegal state: handshaken";ft(t,e)},this.disconnect=function(t,e){if(!z()){F(t)&&(e=t,t=void 0);var n={id:Y(),channel:"/meta/disconnect"},r=this._mixin(!1,{},t,n);d._putCallback(r.id,e),G("disconnecting"),rt([r],!1,"disconnect")}},this.startBatch=function(){++x,d._debug("Starting batch, depth",x)},this.endBatch=function(){!function(){if(--x,d._debug("Ending batch, depth",x),x<0)throw"Calls to startBatch() and endBatch() are not paired";0!==x||z()||k||at()}()},this.batch=function(t,e){var n=Rt(t,e);this.startBatch();try{n.method.call(n.scope),this.endBatch()}catch(t){throw this._info("Exception during execution of batch",t),this.endBatch(),t}},this.addListener=function(t,e,n){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";return At(t,e,n,!0)},this.removeListener=function(t){if(!t||!t.channel||!("id"in t))throw"Invalid argument: expected subscription, not "+t;X(t)},this.clearListeners=function(){_={}},this.subscribe=function(t,e,n,r,o){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";if(z())throw"Illegal state: disconnected";F(e)&&(o=r,r=n,n=e,e=void 0),F(r)&&(o=r,r=void 0);var i=!Pt(t),a=At(t,e,n,!1);if(i){var c={id:Y(),channel:"/meta/subscribe",subscription:t},s=this._mixin(!1,{},r,c);d._putCallback(s.id,o),ot(s)}return a},this.unsubscribe=function(t,e,n){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(z())throw"Illegal state: disconnected";F(e)&&(n=e,e=void 0),this.removeListener(t);var r=t.channel;if(!Pt(r)){var o={id:Y(),channel:"/meta/unsubscribe",subscription:r},i=this._mixin(!1,{},e,o);d._putCallback(i.id,n),ot(i)}},this.resubscribe=function(t,e){if(V(t),t)return this.subscribe(t.channel,t.scope,t.callback,e)},this.clearSubscriptions=function(){J()},this.publish=function(t,e,n,r){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(t))throw"Illegal argument: cannot publish to meta channels";if(z())throw"Illegal state: disconnected";F(e)?(r=e,e={},n=void 0):F(n)&&(r=n,n=void 0);var o={id:Y(),channel:t,data:e},i=this._mixin(!1,{},n,o);d._putCallback(i.id,r),ot(i)},this.publishBinary=function(t,e,n,r,o){F(e)?(o=e,e=new ArrayBuffer(0),n=!0,r=void 0):F(n)?(o=n,n=!0,r=void 0):F(r)&&(o=r,r=void 0);var i={meta:r,data:e,last:n};this.publish(t,i,{ext:{binary:{}}},o)},this.remoteCall=function(t,e,n,r,o){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!M(t))throw"Illegal argument type: target must be a string";if(z())throw"Illegal state: disconnected";if(F(e)?(o=e,e={},n=D.maxNetworkDelay,r=void 0):F(n)?(o=n,n=D.maxNetworkDelay,r=void 0):F(r)&&(o=r,r=void 0),"number"!=typeof n)throw"Illegal argument type: timeout must be a number";t.match(/^\//)||(t="/"+t);var i="/service"+t,a={id:Y(),channel:i,data:e},c=this._mixin(!1,{},r,a),s={callback:o};n>0&&(s.timeout=d.setTimeout((function(){d._debug("Timing out remote call",c,"after",n,"ms"),Ot({id:c.id,error:"406::timeout",successful:!1,failure:{message:c,reason:"Remote Call Timeout"}})}),n),d._debug("Scheduled remote call timeout",c,"in",n,"ms")),R[c.id]=s,ot(c)},this.remoteCallBinary=function(t,e,n,r,o,i){F(e)?(i=e,e=new ArrayBuffer(0),n=!0,r=void 0,o=D.maxNetworkDelay):F(n)?(i=n,n=!0,r=void 0,o=D.maxNetworkDelay):F(r)?(i=r,r=void 0,o=D.maxNetworkDelay):F(o)&&(i=o,o=D.maxNetworkDelay);var a={meta:r,data:e,last:n};this.remoteCall(t,a,o,{ext:{binary:{}}},i)},this.getStatus=function(){return v},this.isDisconnected=z,this.setBackoffIncrement=function(t){D.backoffIncrement=t},this.getBackoffIncrement=function(){return D.backoffIncrement},this.getBackoffPeriod=function(){return N},this.increaseBackoffPeriod=function(){return N<D.maxBackoff&&(N+=D.backoffIncrement),N},this.resetBackoffPeriod=function(){it()},this.setLogLevel=function(t){D.logLevel=t},this.registerExtension=function(t,e){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: extension name must be a string";for(var n=!1,r=0;r<j.length;++r){var o=j[r];if(o.name===t){n=!0;break}}return n?(this._info("Could not register extension with name",t,"since another extension with the same name already exists"),!1):(j.push({name:t,extension:e}),this._debug("Registered extension",t),F(e.registered)&&e.registered(t,this),!0)},this.unregisterExtension=function(t){if(!M(t))throw"Illegal argument type: extension name must be a string";for(var e=!1,n=0;n<j.length;++n){var r=j[n];if(r.name===t){j.splice(n,1),e=!0,this._debug("Unregistered extension",t);var o=r.extension;F(o.unregistered)&&o.unregistered();break}}return e},this.getExtension=function(t){for(var e=0;e<j.length;++e){var n=j[e];if(n.name===t)return n.extension}return null},this.getName=function(){return m},this.getClientId=function(){return w},this.getURL=function(){if(i){var t=i.getURL();if(t)return t;if(t=D.urls[i.getType()])return t}return D.url},this.getTransport=function(){return i},this.getConfiguration=function(){return this._mixin(!0,{},D)},this.getAdvice=function(){return this._mixin(!0,{},E)},this.setTimeout=function(t,e){return p.setTimeout((function(){try{d._debug("Invoking timed function",t),t()}catch(e){d._debug("Exception invoking timed function",t,e)}}),e)},this.clearTimeout=function(t){p.clearTimeout(t)},window.WebSocket&&this.registerTransport("websocket",new s),this.registerTransport("long-polling",new a),this.registerTransport("callback-polling",new c)},Transport:o,RequestTransport:i,LongPollingTransport:a,CallbackPollingTransport:c,WebSocketTransport:s,Utils:n,Z85:{encode:function(t){var e=null;if(t instanceof ArrayBuffer?e=t:t.buffer instanceof ArrayBuffer?e=t.buffer:Array.isArray(t)&&(e=new Uint8Array(t).buffer),null==e)throw"Cannot Z85 encode "+t;for(var n=e.byteLength,r=n%4,o=4-(0===r?4:r),i=new DataView(e),a="",c=0,s=0;s<n+o;++s){var h=s>=n;if(c=256*c+(h?0:i.getUint8(s)),(s+1)%4==0){for(var f=52200625,l=5;l>0;--l){if(!h||l>o){var p=Math.floor(c/f)%85;a+=u[p]}f/=85}c=0}}return a},decode:function(t){for(var e=t.length%5,n=5-(0===e?5:e),r=0;r<n;++r)t+=u[u.length-1];for(var o=t.length,i=new ArrayBuffer(4*o/5-n),a=new DataView(i),c=0,s=0,f=0,l=0;l<o;++l){var p=t.charCodeAt(s++)-32;if(c=85*c+h[p],s%5==0){for(var d=16777216;d>=1;)f<a.byteLength&&a.setUint8(f++,Math.floor(c/d)%256),d/=256;c=0}}return i}}}}()},function(t,e,n){t.exports=n(17).AckExtension=function(){var t,e,n=!1;function r(e,n){t._debug(e,n)}this.registered=function(e,n){t=n,r("AckExtension: executing registration callback")},this.unregistered=function(){r("AckExtension: executing unregistration callback"),t=null},this.incoming=function(t){var o=t.channel,i=t.ext;if("/meta/handshake"===o){if(i){var a=i.ack;if("object"==typeof a){n=!0===a.enabled;var c=a.batch;"number"==typeof c&&(e=c)}else n=!0===a}r("AckExtension: server supports acknowledgements",n)}else"/meta/connect"===o&&t.successful&&n&&i&&"number"==typeof i.ack&&r("AckExtension: server sent batch",e=i.ack);return t},this.outgoing=function(o){var i=o.channel;return o.ext||(o.ext={}),"/meta/handshake"===i?(o.ext.ack=t&&!1!==t.ackEnabled,n=!1,e=0):"/meta/connect"===i&&n&&(o.ext.ack=e,r("AckExtension: client sending batch",e)),o}}},function(t,e,n){t.exports=n(17).ReloadExtension=function(t){var e,n,r={},o="org.cometd.reload",i=!1,a=!1;function c(t){if(r.handshakeResponse){a=!0;var i=e.getTransport();i&&i.abort(),s(t);var c=JSON.stringify(r);n("Reload extension saving state",c),window.sessionStorage.setItem(o,c)}}function s(t){t&&"string"==typeof t.name&&(o=t.name)}this.configure=s,this._receive=function(t){e.receive(t)},this.registered=function(t,r){(e=r).reload=c,n=e._debug},this.unregistered=function(){delete e.reload,e=null},this.outgoing=function(t){switch(t.channel){case"/meta/handshake":(r={}).url=e.getURL();var c=window.sessionStorage.getItem(o);if(n("Reload extension found state",c),c)try{var s=JSON.parse(c);if(window.sessionStorage.removeItem(o),s.handshakeResponse&&function(t){return r.url===t.url}(s)){n("Reload extension restoring state",s);var u=e._getCallback(t.id),h=this;return setTimeout((function(){n("Reload extension replaying handshake response",s.handshakeResponse),r.handshakeResponse=s.handshakeResponse,r.transportType=s.transportType,e._putCallback(t.id,u);var o=e._mixin(!0,{},r.handshakeResponse,{id:t.id,ext:{reload:!0}});o.supportedConnectionTypes=[r.transportType],h._receive(o),n("Reload extension replayed handshake response",o)}),0),i||(i=!0,e.startBatch()),null}n("Reload extension could not restore state",s)}catch(t){n("Reload extension error while trying to restore state",t)}break;case"/meta/connect":if(!0===a)return n("Reload extension aborting /meta/connect during reload"),null;r.transportType||(r.transportType=t.connectionType,n("Reload extension tracked transport type",r.transportType));break;case"/meta/disconnect":r={}}return t},this.incoming=function(t){if(t.successful)switch(t.channel){case"/meta/handshake":r.handshakeResponse||(r.handshakeResponse=t,n("Reload extension tracked handshake response",t));break;case"/meta/connect":i&&(i=!1,e.endBatch());break;case"/meta/disconnect":r={}}return t},s(t)}},function(t,e){var n=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:this);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=u(t),e=h(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},l.prototype.delete=function(t){delete this.map[u(t)]},l.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},l.prototype.set=function(t,e){this.map[u(t)]=h(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),f(t)},l.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},l.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),f(t)},r&&(l.prototype[Symbol.iterator]=l.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,r,o=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];x.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,n){return new Promise((function(r,i){var a=new b(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function s(){c.abort()}c.onload=function(){var t,e,n={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;r(new x(o,n))},c.onerror=function(){i(new TypeError("Network request failed"))},c.ontimeout=function(){i(new TypeError("Network request failed"))},c.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},c.open(a.method,a.url,!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&o&&(c.responseType="blob"),a.headers.forEach((function(t,e){c.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",s),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",s)}),c.send(void 0===a._bodyInit?null:a._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=l,t.Request=b,t.Response=x),e.Headers=l,e.Request=b,e.Response=x,e.fetch=k}({})}(n),delete n.fetch.polyfill,(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e},function(t,e,n){t.exports=n(35)},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(14),o=n(26);function i(e,n,a){return o()?t.exports=i=Reflect.construct:t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}t.exports=i},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=s(t,e,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function f(){}function l(){}var p={};p[o]=function(){return this};var d=Object.getPrototypeOf,m=d&&d(d(k([])));m&&m!==e&&n.call(m,o)&&(p=m);var y=l.prototype=h.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function v(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var h=u.arg,f=h.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){h.value=t,a(h)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=y.constructor=l,l.constructor=f,l[a]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(v.prototype),v.prototype[i]=function(){return this},t.AsyncIterator=v,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new v(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),y[a]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(16);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return en})),n.d(e,"SCOPE_BOUNDARY",(function(){return l})),n.d(e,"RITUAL",(function(){return p})),n.d(e,"PUSH_CATEGORY",(function(){return d})),n.d(e,"LOCK_TYPE",(function(){return m})),n.d(e,"config",(function(){return tt})),n.d(e,"errorManager",(function(){return We})),n.d(e,"Router",(function(){return tn})),n.d(e,"Channel",(function(){return qe})),n.d(e,"accountAdapter",(function(){return r})),n.d(e,"authAdapter",(function(){return o})),n.d(e,"episodeAdapter",(function(){return i})),n.d(e,"presenceAdapter",(function(){return a})),n.d(e,"projectAdapter",(function(){return c})),n.d(e,"runAdapter",(function(){return s})),n.d(e,"vaultAdapter",(function(){return u}));var r={};n.r(r),n.d(r,"createAccount",(function(){return ut})),n.d(r,"updateAccount",(function(){return ft})),n.d(r,"removeAccount",(function(){return pt}));var o={};n.r(o),n.d(o,"logout",(function(){return mt})),n.d(o,"login",(function(){return gt})),n.d(o,"upgrade",(function(){return bt})),n.d(o,"sso",(function(){return xt})),n.d(o,"getSession",(function(){return kt})),n.d(o,"getLocalSession",(function(){return _t}));var i={};n.r(i),n.d(i,"create",(function(){return Nt})),n.d(i,"get",(function(){return jt})),n.d(i,"remove",(function(){return Pt}));var a={};n.r(a),n.d(a,"forGroup",(function(){return At})),n.d(a,"forWorld",(function(){return It})),n.d(a,"connect",(function(){return Ut}));var c={};n.r(c),n.d(c,"channelsEnabled",(function(){return Bt}));var s={};n.r(s),n.d(s,"create",(function(){return Wt})),n.d(s,"clone",(function(){return Vt})),n.d(s,"restore",(function(){return Gt})),n.d(s,"rewind",(function(){return Yt})),n.d(s,"update",(function(){return Zt})),n.d(s,"remove",(function(){return te})),n.d(s,"get",(function(){return ne})),n.d(s,"query",(function(){return oe})),n.d(s,"introspect",(function(){return ae})),n.d(s,"operation",(function(){return se})),n.d(s,"getVariables",(function(){return he})),n.d(s,"getVariable",(function(){return le})),n.d(s,"updateVariables",(function(){return de})),n.d(s,"getMetadata",(function(){return ye})),n.d(s,"updateMetadata",(function(){return ve})),n.d(s,"action",(function(){return we})),n.d(s,"getWithStrategy",(function(){return Te}));var u={};n.r(u),n.d(u,"update",(function(){return Ne})),n.d(u,"get",(function(){return je})),n.d(u,"remove",(function(){return Pe})),n.d(u,"create",(function(){return Ae}));var h="COOKIE",f="SESSION",l={PROJECT:"PROJECT",GROUP:"GROUP",EPISODE:"EPISODE",WORLD:"WORLD"},p={NONE:"NONE",REANIMATE:"REANIMATE",EXORCISE:"EXORCISE"},d={CHAT:"CHAT",CONSENSUS:"CONSENSUS",CONTROL:"CONTROL",PRESENCE:"PRESENCE",LOBBY:"LOBBY",RUN:"RUN",SYSTEM:"SYSTEM"},m={SYSTEM:"SYSTEM",MONITER:"MONITER",AUTHOR:"AUTHOR",SUPPORT:"SUPPORT",FACILITATOR:"FACILITATOR",REVIEWER:"REVIEWER",USER:"USER",LEADER:"LEADER",PARTICIPANT:"PARTICIPANT",ANONYMOUS:"ANONYMOUS"},y=new Function("try {return this===window;}catch(e){ return false;}"),g=new Function("try {return this===global;}catch(e){return false;}"),v=function(t,e){return e.startsWith(t)?e:"".concat(t).concat(e)},b=n(10),w=n.n(b),x=n(7),S=n.n(x),k=n(8),T=n.n(k),_=n(4),N=n.n(_),O=n(3),j=n.n(O),E=n(5),P=n.n(E),R=n(2),A=n.n(R);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){return function(){var e,n=N()(t);if(L()){var r=N()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T()(this,e)}}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var U=function(){function t(e){j()(this,t),A()(this,"_store",void 0),this._store=e}return P()(t,[{key:"clear",value:function(){this._store.clear()}},{key:"store",get:function(){return this._store},set:function(t){this._store=t}}]),t}(),D=new Map,B=function(t){S()(n,t);var e=I(n);function n(){return j()(this,n),e.call(this,D)}return P()(n,[{key:"getItem",value:function(t){return w()(N()(n.prototype),"store",this).get(t)}},{key:"setItem",value:function(t,e){return w()(N()(n.prototype),"store",this).set(t,e)}},{key:"removeItem",value:function(t){return w()(N()(n.prototype),"store",this).delete(t)}}]),n}(U),M=function(t){S()(n,t);var e=I(n);function n(){return j()(this,n),e.call(this,window.sessionStorage)}return P()(n,[{key:"getItem",value:function(t){return JSON.parse(w()(N()(n.prototype),"store",this).getItem(t.toString()))}},{key:"setItem",value:function(t,e){return w()(N()(n.prototype),"store",this).setItem(t.toString(),JSON.stringify(e))}},{key:"removeItem",value:function(t){return w()(N()(n.prototype),"store",this).removeItem(t.toString())}}]),n}(U),F=function(){function t(e){j()(this,t);var n={domain:".".concat(window.location.hostname),path:"/"};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){A()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{},e)}return P()(t,[{key:"getItem",value:function(t){return JSON.parse(q.getItem(t.toString()))}},{key:"setItem",value:function(t,e){return q.setItem(t.toString(),JSON.stringify(e),this.options)}},{key:"removeItem",value:function(t){return q.removeItem(t.toString(),this.options)}},{key:"clear",value:function(){return q.clear()}}]),t}(),K=function(t){if(!t)return"";switch(t.constructor){case Number:return t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age=".concat(t);case String:return"; expires=".concat(t);case Date:return"; expires=".concat(t.toUTCString());default:return""}},q={getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null},setItem:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var r=n.path,o=n.domain,i=n.end,a=n.secure,c=n.samesite,s=K(i),u=o?"; domain=".concat(o):"",h=r?"; path=".concat(r):"",f=a?"; secure":"",l=c?"; samesite":"";return document.cookie="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e)).concat(s).concat(u).concat(h).concat(f).concat(l),!0},removeItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.hasItem(t))return!1;var n=e.path,r=e.domain,o=r?"; domain=".concat(r):"",i=n?"; path=".concat(n):"";return document.cookie="".concat(encodeURIComponent(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT").concat(o).concat(i),!0},hasItem:function(t){return!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&new RegExp("(?:^|;\\s*)".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)},clear:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]),this.removeItem(t[n]);return t}},H=n(11),W=n.n(H);function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var V=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=N()(e);if(X()){var r=N()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return T()(this,t)});function r(t){return j()(this,r),n.call(this,t)}return r}(W()(Error)),J=n(12),G=n.n(J);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Y=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=N()(e);if(z()){var r=N()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return T()(this,t)});function r(t,e){var o;j()(this,r),o=n.call(this);var i=e.status,a=t.information,c=t.message,s=t.cause;if(o.status=i,o.message=c,a){var u=a.code,h=G()(a,["code"]);o.code=u,o.information=h}return s&&(o.cause=new r(s)),o}return r}(W()(Error)),$=function t(e,n){j()(this,t);var r=n.status,o=n.headers;this.status=r,this.headers=o,this.body=e},Z=n(9),Q=n.n(Z),tt=new(function(){function t(){if(j()(this,t),A()(this,"_apiVersion",3),y())return this.loadBrowser();if(g())return this.loadNode();throw new V("Could not identify environment; no configuration was setup")}return P()(t,[{key:"isLocal",value:function(){if(!y())return!1;var t=window.location.host;return"127.0.0.1"===t||0===t.indexOf("local.")||-1!==t.indexOf("ngrok")||0===t.indexOf("localhost")}},{key:"loadNode",value:function(){this.apiProtocol="https",this.apiHost="test.forio.com"}},{key:"loadBrowser",value:function(){var t=this.isLocal(),e=window.location,n=e.protocol,r=e.pathname,o=e.host;this.apiProtocol=t?"https":n,this.apiHost=t?"forio.com":o;var i=r.match(/\/app\/([\w-]+)\/([\w-]+)/);if(i){var a=i.slice(1),c=Q()(a,2),s=c[0],u=c[1];this.accountShortName=s,this.projectShortName=u}}},{key:"apiProtocol",get:function(){return this._apiProtocol},set:function(t){t.startsWith("http")&&(t.endsWith(":")&&(t=t.slice(0,-1)),this._apiProtocol=t)}},{key:"apiHost",get:function(){return this._apiHost},set:function(t){this._apiHost=t}},{key:"apiVersion",get:function(){return this._apiVersion},set:function(t){}},{key:"accountShortName",get:function(){return this._accountShortName},set:function(t){this._accountShortName=t}},{key:"projectShortName",get:function(){return this._projectShortName},set:function(t){this._projectShortName=t}}]),t}()),et=h,nt=f,rt=Symbol("com.forio.epicenter.session"),ot=new(function(){function t(e){if(j()(this,t),A()(this,"type",void 0),e!==et&&e!==nt)throw new V('Invalid Storage Type: "'.concat(e,'", please use "').concat(et,'" or "').concat(nt,'".'));this.type=e,this.consumeSSO()}return P()(t,[{key:"getStore",value:function(){if(g())return B;switch(this.type){case nt:return M;case et:default:return F}}},{key:"getSessionPath",value:function(t){var e=t||this.session;if(!e||g())return"";var n=e.accountShortName,r=e.projectShortName,o=e.objectType,i=tt.isLocal(),a=!i&&"app"!==window.location.pathname.split("/")[1];return"user"===o&&n&&r&&(!i&&!a)?"/app/".concat(n,"/").concat(r):"/"}},{key:"consumeSSO",value:function(){if(!g()){var t=JSON.parse(JSON.parse('"'.concat(q.getItem("epicenter.v3.sso"),'"')));if(t){var e=t.accountShortName,n=t.projectShortName;this.session=t,q.removeItem("epicenter.v3.sso",{domain:".".concat(window.location.hostname),path:"/app/".concat(e,"/").concat(n)})}}}},{key:"session",get:function(){return(new(this.getStore())).getItem(rt.description)},set:function(t){var e=this.getStore(),n=this.getSessionPath(t);t?new e({path:n}).setItem(rt.description,t):this.session&&new e({path:n}).removeItem(rt.description)}}]),t}())(et),it=n(0),at=n.n(it),ct=n(1),st=n.n(ct);function ut(t){return ht.apply(this,arguments)}function ht(){return(ht=st()(at.a.mark((function t(e){var n,r,o,i,a,c,s,u;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.objectType,r=void 0===n?"personal":n,o=e.name,i=e.shortName,a=e.adminKey,c=e.subscriptionPlan,s=e.billingInterval,t.next=3,(new tn).post("/account",{body:{objectType:r,name:o,shortName:i,adminKey:a,subscriptionPlan:c,billingInterval:s}}).then((function(t){return t.body}));case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(t){return lt.apply(this,arguments)}function lt(){return(lt=st()(at.a.mark((function t(e){var n,r,o,i,a,c,s,u;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.objectType,r=void 0===n?"personal":n,o=e.name,i=e.shortName,a=e.adminKey,c=e.subscriptionPlan,s=e.billingInterval,t.next=3,(new tn).patch("/account",{body:{objectType:r,name:o,shortName:i,adminKey:a,subscriptionPlan:c,billingInterval:s}}).then((function(t){return t.body}));case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return dt.apply(this,arguments)}function dt(){return(dt=st()(at.a.mark((function t(e){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new tn).withAccountShortName(e).delete("/account").then((function(t){return t.body}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(){return yt.apply(this,arguments)}function yt(){return(yt=st()(at.a.mark((function t(){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ot.session=void 0,t.next=3,Ke.disconnect();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(t){return vt.apply(this,arguments)}function vt(){return(vt=st()(at.a.mark((function t(e){var n,r,o,i,a,c,s,u,h;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.handle,r=e.password,o=e.groupKey,i=e.objectType,a=void 0===i?"user":i,c=G()(e,["handle","password","groupKey","objectType"]),s=c.accountShortName,u=c.projectShortName,t.next=4,(new tn).withAccountShortName(s).withProjectShortName(u).post("/authentication",{body:{handle:n,password:r,groupKey:o,objectType:a},includeAuthorization:!1,inert:!0}).then((function(t){return t.body}));case 4:return h=t.sent,t.next=7,mt();case 7:return ot.session=h,t.abrupt("return",h);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t,e){return wt.apply(this,arguments)}function wt(){return(wt=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.objectType,o=void 0===r?"user":r,i=n.inert,a=G()(n,["objectType","inert"]),c=a.accountShortName,s=a.projectShortName,t.next=4,(new tn).withAccountShortName(c).withProjectShortName(s).patch("/authentication",{body:{objectType:o,groupKey:e},inert:i}).then((function(t){return t.body}));case 4:return u=t.sent,t.next=7,mt();case 7:return ot.session=u,t.abrupt("return",u);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xt(t){return St.apply(this,arguments)}function St(){return(St=st()(at.a.mark((function t(e){var n,r,o;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.accountShortName,r=e.projectShortName,t.next=3,(new tn).withAccountShortName(n).withProjectShortName(r).get("/registration/sso").then((function(t){return t.body}));case 3:return o=t.sent,ot.session=o,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(){return Tt.apply(this,arguments)}function Tt(){return(Tt=st()(at.a.mark((function t(){var e,n;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new tn).get("/authentication");case 2:return e=t.sent,n=e.body,ot.session=n,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(){return ot.session}function Nt(t,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.draft,c=r.runLimit,t.next=4,(new tn).withAccountShortName(o).withProjectShortName(i).post("/episode/".concat(n),{body:{name:e,draft:a,runLimit:c}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(){return Et.apply(this,arguments)}function Et(){return(Et=st()(at.a.mark((function t(){var e,n,r,o,i,a,c,s=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.accountShortName,r=e.projectShortName,o=e.episodeKey,i=e.groupName,a=e.episodeName,c="",o&&(c="/".concat(o)),i&&a&&(c="/with/".concat(i,"/").concat(a)),t.next=7,(new tn).withAccountShortName(n).withProjectShortName(r).get("/episode".concat(c)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(t){return Rt.apply(this,arguments)}function Rt(){return(Rt=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).delete("/episode/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function At(t){return Ct.apply(this,arguments)}function Ct(){return(Ct=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).get("/presence/group/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function It(t){return Lt.apply(this,arguments)}function Lt(){return(Lt=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).get("/presence/world/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ut(){return Dt.apply(this,arguments)}function Dt(){return(Dt=st()(at.a.mark((function t(){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ke.handshake());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bt(){return Mt.apply(this,arguments)}function Mt(){return(Mt=st()(at.a.mark((function t(){var e,n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.accountShortName,r=e.projectShortName,t.next=4,(new tn).withAccountShortName(n).withProjectShortName(r).get("/project/channel/isEnabled").then((function(t){return t.body}));case 4:return o=t.sent,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ft=n(6),Kt=n.n(Ft);function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(n),!0).forEach((function(e){A()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wt(t,e){return Xt.apply(this,arguments)}function Xt(){return(Xt=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,p,d,y,g,v,b,w,x=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.accountShortName,c=r.projectShortName,s=r.readLock,u=r.writeLock,h=r.userKey,f=r.ephemeral,p=r.trackingKey,d=r.modelContext,y=r.executionContext,g=l.WORLD,v=m.PARTICIPANT,b=m.USER,w=o===g?v:b,t.next=8,(new tn).withAccountShortName(a).withProjectShortName(c).post("/run",{body:{scope:{scopeBoundary:o,scopeKey:i,userKey:o===g?void 0:null!=h?h:ot.session.userKey},permit:{readLock:s||w,writeLock:u||w},morphology:"MANY",trackingKey:p,modelFile:e,modelContext:d||{},executionContext:y||{},ephemeral:f}}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vt(t){return Jt.apply(this,arguments)}function Jt(){return(Jt=st()(at.a.mark((function t(e){var n,r,o,i,a,c,s,u,h,f=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.ephemeral,a=n.trackingKey,c=n.modelContext,s=void 0===c?{}:c,u=n.executionContext,h=void 0===u?{}:u,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).post("/run/clone/".concat(e),{body:{trackingKey:a,modelContext:s,executionContext:h,ephemeral:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Gt(t){return zt.apply(this,arguments)}function zt(){return(zt=st()(at.a.mark((function t(e){var n,r,o,i,a,c,s,u,h=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.ephemeral,a=n.modelContext,c=void 0===a?{}:a,s=n.executionContext,u=void 0===s?{}:s,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).post("/run/restore/".concat(e),{body:{modelContext:c,executionContext:u,ephemeral:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yt(t,e){return $t.apply(this,arguments)}function $t(){return($t=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.ephemeral,c=r.modelContext,s=void 0===c?{}:c,t.next=4,(new tn).withAccountShortName(o).withProjectShortName(i).post("/run/rewind/".concat(e),{body:{rewindCount:n,modelContext:s,ephemeral:a}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zt(t,e){return Qt.apply(this,arguments)}function Qt(){return(Qt=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l,p,d=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},o=n.readLock,i=n.writeLock,a=n.trackingKey,c=n.marked,s=n.hidden,u=n.closed,h=r.accountShortName,f=r.projectShortName,l=Array.isArray(e)&&e.length>1,p=l?"":"/".concat(1===e.length?e[0]:e),t.next=7,(new tn).withAccountShortName(h).withProjectShortName(f).withSearchParams(l?{runKey:e}:"").patch("/run".concat(p),{body:{readLock:o,writeLock:i,trackingKey:a,marked:c,hidden:s,closed:u}}).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function te(t){return ee.apply(this,arguments)}function ee(){return(ee=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).delete("/run/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ne(t){return re.apply(this,arguments)}function re(){return(re=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).get("/run/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oe(t,e){return ie.apply(this,arguments)}function ie(){return(ie=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l,p,d,m,y,g,b=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.filter,c=void 0===a?{}:a,s=r.sort,u=void 0===s?[]:s,h=r.first,f=r.max,l=r.timeout,p=r.projections,d=void 0===p?{}:p,m=r.accountShortName,y=r.projectShortName,g={filter:[].concat(Kt()((c.variables||[]).map((function(t){return v("var.",t)}))),Kt()((c.metadata||[]).map((function(t){return v("meta.",t)}))),Kt()((c.attributes||[]).map((function(t){return v("run.",t)})))).join(";"),sort:u.join(";"),first:h,max:f,timeout:l,projections:[].concat(Kt()((d.variables||[]).map((function(t){return v("var.",t)}))),Kt()((d.metadata||[]).map((function(t){return v("meta.",t)}))),Kt()((d.attr||[]).map((function(t){return v("run.",t)})))).join(";")},t.next=6,(new tn).withAccountShortName(m).withProjectShortName(y).withSearchParams(g).get("/run/".concat(o,"/").concat(i,"/").concat(e)).then((function(t){return t.body}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ae(t){return ce.apply(this,arguments)}function ce(){return(ce=st()(at.a.mark((function t(e){var n,r,o,i=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new tn).withAccountShortName(r).withProjectShortName(o).get("/run/introspect/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(t,e){return ue.apply(this,arguments)}function ue(){return(ue=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:[],o=l.length>3&&void 0!==l[3]?l[3]:{},i=o.accountShortName,a=o.projectShortName,c=o.timeout,s=o.ritual,u=Array.isArray(e)&&e.length>1,h=u?"":"/".concat(1===e.length?e[0]:e),f=u?{runKey:e,timeout:c}:{ritual:s,timeout:c},s!==p.EXORCISE&&u&&console.warn("Detected ritual: ".concat(s," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=9,(new tn).withAccountShortName(i).withProjectShortName(a).withSearchParams(f).post("/run/operation".concat(h),{body:{name:n,arguments:r,objectType:"execute"}}).then((function(t){return t.body}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(t,e){return fe.apply(this,arguments)}function fe(){return(fe=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,s=n.join(";"),u=Array.isArray(e)&&e.length>1,h=u?"":"/".concat(1===e.length?e[0]:e),f=u?{runKey:e,timeout:a,include:s}:{ritual:c,timeout:a,include:s},c!==p.EXORCISE&&u&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=9,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams(f).get("/run/variable".concat(h)).then((function(t){return t.body}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function le(t,e){return pe.apply(this,arguments)}function pe(){return(pe=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,!Array.isArray(e)&&!Array.isArray(n)){t.next=5;break}return s=Array.isArray(n)?n:[n],t.abrupt("return",he(e,s,r));case 5:return t.next=7,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams({timeout:a,ritual:c}).get("/run/variable/".concat(e,"/").concat(n)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function de(t,e){return me.apply(this,arguments)}function me(){return(me=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,s=Array.isArray(e)&&e.length>1,u=s?"":"/".concat(1===e.length?e[0]:e),h=s?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==p.EXORCISE&&s&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).patch("/run/variable".concat(u),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ye(t,e){return ge.apply(this,arguments)}function ge(){return(ge=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,s=n.join(";"),u=Array.isArray(e)&&e.length>1,h=u?"":"/".concat(1===e.length?e[0]:e),f=u?{runKey:e,timeout:a,include:s}:{ritual:c,timeout:a,include:s},c!==p.EXORCISE&&u&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=9,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams(f).get("/run/meta".concat(h)).then((function(t){return t.body}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ve(t,e){return be.apply(this,arguments)}function be(){return(be=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,s=Array.isArray(e)&&e.length>1,u=s?"":"/".concat(1===e.length?e[0]:e),h=s?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==p.EXORCISE&&s&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).patch("/run/meta".concat(u),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function we(t,e){return xe.apply(this,arguments)}function xe(){return(xe=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,s=Array.isArray(e)&&e.length>1,u=s?"":"/".concat(1===e.length?e[0]:e),h=s?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==p.EXORCISE&&s&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).post("/run/action".concat(u),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Se(t,e,n){return ke.apply(this,arguments)}function ke(){return(ke=st()(at.a.mark((function t(e,n,r){var o;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.map((function(t){return{name:"string"==typeof t?t:t.name,params:t.params}})),t.abrupt("return",o.reduce((function(t,n){var o=n.name,i=n.params;return t.then((function(){return se(e,o,i,r)}))}),Promise.resolve()));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Te(t,e,n){return _e.apply(this,arguments)}function _e(){return(_e=st()(at.a.mark((function t(e,n,r){var o,i,a,c,s,u,h=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=h.length>3&&void 0!==h[3]?h[3]:{},i=o.initOperations,a=void 0===i?[]:i,"reuse-across-sessions"!==e){t.next=16;break}return t.next=5,oe(n,r,Ht({},o,{sort:["-created"]}));case 5:if(!(c=t.sent).length){t.next=8;break}return t.abrupt("return",c[0]);case 8:return t.next=10,Wt(n,r,o);case 10:return s=t.sent,t.next=13,Se(s.runKey,a,o);case 13:return t.abrupt("return",s);case 16:if("reuse-never"!==e){t.next=25;break}return t.next=19,Wt(n,r,o);case 19:return u=t.sent,t.next=22,Se(u.runKey,a,o);case 22:return t.abrupt("return",u);case 25:case 26:throw new V("Invalid run strategy.");case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ne(t,e,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=st()(at.a.mark((function t(e,n,r){var o,i,a,c=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]?c[3]:{},i=o.accountShortName,a=o.projectShortName,t.next=4,(new tn).withAccountShortName(i).withProjectShortName(a).withSearchParams({MutationKey:r}).patch("/vault/".concat(e),{body:{items:n}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function je(t,e,n){return Ee.apply(this,arguments)}function Ee(){return(Ee=st()(at.a.mark((function t(e,n,r){var o,i,a,c,s,u,h=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=h.length>3&&void 0!==h[3]?h[3]:{},i=r.scopeBoundary,a=r.scopeKey,c=o.accountShortName,s=o.projectShortName,u=o.userKey?"/".concat(o.userKey):"",t.next=6,(new tn).withAccountShortName(c).withProjectShortName(s).get("/vault/".concat(i,"/").concat(a).concat(u,"/").concat(e,"/").concat(n)).catch((function(t){return 404===t.status?{body:void 0}:Promise.reject(t)})).then((function(t){return t.body}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pe(t,e){return Re.apply(this,arguments)}function Re(){return(Re=st()(at.a.mark((function t(e,n){var r,o,i,a=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},o=r.accountShortName,i=r.projectShortName,t.next=4,(new tn).withAccountShortName(o).withProjectShortName(i).withSearchParams({MutationKey:n}).delete("/vault/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ae(t,e,n,r){return Ce.apply(this,arguments)}function Ce(){return(Ce=st()(at.a.mark((function t(e,n,r,o){var i,a,c,s,u,h,f,p,d,y,g,v,b=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=b.length>4&&void 0!==b[4]?b[4]:{},a=r.scopeBoundary,c=r.scopeKey,s=i.accountShortName,u=i.projectShortName,h=i.readLock,f=i.writeLock,p=i.userKey,d=l.WORLD,y=m.PARTICIPANT,g=m.USER,v=a===d?y:g,t.next=8,(new tn).withAccountShortName(s).withProjectShortName(u).post("/vault/".concat(e,"/").concat(n),{body:{scope:{scopeBoundary:a,scopeKey:c,userKey:a===d?void 0:p},permit:{readLock:h||v,writeLock:f||v},items:o}}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ie=n(18),Le=n.n(Ie),Ue=n(19),De=n.n(Ue);function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Me="com.forio.epicenter.token",Fe=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=N()(e);if(Be()){var r=N()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return T()(this,t)});function r(t){var e;j()(this,r),e=n.call(this);var o=t.error,i=t.successful;return o&&o.includes("403")&&!i&&(e.status=401),e.information=t,e.message=o,e}return r}(W()(Error)),Ke=new(function(){function t(){j()(this,t),A()(this,"url",void 0),A()(this,"customCometd",void 0),A()(this,"defaultCometd",void 0),A()(this,"initialization",void 0),A()(this,"subscriptions",new Map),A()(this,"state","disconnected"),A()(this,"requireAcknowledgement",!0)}var e,r,o,i,a,c,s,u,h;return P()(t,[{key:"startup",value:(h=st()(at.a.mark((function t(){var e,r,o,i,a,c=this,s=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{logLevel:"error"},t.next=3,Bt();case 3:if(t.sent){t.next=6;break}throw new V("Push Channels are not enabled on this project");case 6:if(!y()){t.next=11;break}return t.next=9,Promise.resolve().then(n.t.bind(null,17,7));case 9:r=t.sent,this.defaultCometd=new r.CometD;case 11:o=tt.apiProtocol,i=tt.apiHost,a=tt.apiVersion,this.url="".concat(o,"://").concat(i,"/push/v").concat(a,"/cometd"),this.cometd.registerExtension("ack",new Le.a),this.cometd.registerExtension("reload",new De.a),this.cometd.configure({url:this.url,logLevel:e.logLevel}),y()&&(window.onunload=function(){"connected"===c.cometd.getStatus()&&(c.cometd.reload(),c.cometd.getTransport().abort())});case 17:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"reinit",value:(u=st()(at.a.mark((function t(e,n){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.disconnect();case 2:return this.initialization=void 0,this.customCometd=e,t.abrupt("return",this.init(n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"init",value:(s=st()(at.a.mark((function t(e){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initialization||(this.initialization=this.startup(e)),t.abrupt("return",this.initialization);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"handshake",value:(c=st()(at.a.mark((function t(){var e,n,r,o,i=this,a=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,this.init();case 3:if("disconnected"===this.cometd.getStatus()){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return n={},(r=ot.session)&&(n.ext=(o={},A()(o,Me,r.token),A()(o,"ack",this.requireAcknowledgement),o)),this.cometd.ackEnabled=this.requireAcknowledgement,this.cometd.websocketEnabled=!0,t.abrupt("return",new Promise((function(t,r){return i.cometd.handshake(n,(function(n){if(n.successful)t(n);else{var o=new Fe(n);if(e.inert)r(o);else try{var a=We.handle(o,(function(){return i.handshake({inert:!0})}));t(a)}catch(t){r(t)}}}))})));case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"disconnect",value:(a=st()(at.a.mark((function t(){var e=this;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.cometd){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.next=4,this.init();case 4:return t.next=6,this.empty();case 6:if("connected"===this.cometd.getStatus()){t.next=8;break}return t.abrupt("return",Promise.resolve());case 8:return t.abrupt("return",new Promise((function(t,n){return e.cometd.disconnect((function(e){e.successful?t():n(new V("Unable to disconnect from CometD server"))}))})));case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"add",value:(i=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u=this,h=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:{},t.next=3,this.init();case 3:if(o=[].concat(e),"connected"===this.cometd.getStatus()){t.next=7;break}return t.next=7,this.handshake();case 7:return i={},(a=ot.session)&&(i.ext=A()({},Me,a.token)),c=function(t){t.channel;var e=t.data;return e="string"==typeof e?JSON.parse(e):e,n(e)},s=[],this.cometd.batch((function(){return o.forEach((function(t){var o=t.path;return s.push(new Promise((function(t,a){var s=u.cometd.subscribe(o,c,i,(function(o){if(o.successful)return u.subscriptions.set(s.channel,s),void t(s);var i=new Fe(o);if(r.inert)a(i);else try{var c=We.handle(i,(function(){return u.add(e,n,{inert:!0})}));t(c)}catch(t){a(t)}}))})))}))})),t.abrupt("return",1===s.length?Promise.all(s).then((function(t){return Q()(t,1)[0]})):Promise.all(s));case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"publish",value:(o=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s=this,u=arguments;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,this.init();case 3:if(o=[].concat(e),"connected"===this.cometd.getStatus()){t.next=7;break}return t.next=7,this.handshake();case 7:return i={},(a=ot.session)&&(i.ext=A()({},Me,a.token)),c=[],this.cometd.batch((function(){return o.forEach((function(t){var o=t.path;return c.push(new Promise((function(t,a){s.cometd.publish(o,n,i,(function(o){if(o.successful)t(o);else{var i=new Fe(o);if(r.inert)a(i);else try{var c=We.handle(i,(function(){return s.publish(e,n,{inert:!0})}));t(c)}catch(t){a(t)}}}))})))}))})),t.abrupt("return",1===c.length?Promise.all(c).then((function(t){return Q()(t,1)[0]})):Promise.all(c));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"remove",value:(r=st()(at.a.mark((function t(e){var n=this;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return this.subscriptions.delete(e.channel),t.abrupt("return",new Promise((function(t,r){return n.cometd.unsubscribe(e,(function(e){e.successful&&t(e);var n=new Fe(e);r(n)}))})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"empty",value:(e=st()(at.a.mark((function t(){var e,n=this;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return e=[],this.cometd.batch((function(){return n.subscriptions.forEach((function(t){e.push(n.remove(t))}))})),t.abrupt("return",Promise.all(e));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cometd",get:function(){return this.customCometd||this.defaultCometd}}]),t}()),qe=function(){function t(e){j()(this,t),A()(this,"path",void 0),A()(this,"update",void 0),A()(this,"subscription",void 0);var n=e.scopeBoundary,r=e.scopeKey,o=e.pushCategory;!function(t){if(!t)throw new V("No scope found where one was required");var e=t.scopeBoundary,n=t.scopeKey,r=t.pushCategory;if(!e)throw new V("Missing scope component: scopeBoundary");if(!n)throw new V("Missing scope component: scopeKey");if(!r)throw new V("Missing scope component: pushCategory");if(!l.hasOwnProperty(e))throw new V("Invalid scope boundary: ".concat(e));if(!d.hasOwnProperty(r))throw new V("Invalid push category: ".concat(r))}(e),this.path="/".concat(n.toLowerCase(),"/").concat(r,"/").concat(o.toLowerCase()),Ke.subscriptions.has(this.path)&&(this.subscription=Ke.subscriptions.get(this.path))}var e,n;return P()(t,[{key:"publish",value:function(t){return Ke.publish(this,t)}},{key:"subscribe",value:(n=st()(at.a.mark((function t(e,n){var r=this;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.subscription){t.next=3;break}return t.next=3,this.unsubscribe();case 3:return this.update=e,t.abrupt("return",Ke.add(this,e,n).then((function(t){return r.subscription=t,t})));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"unsubscribe",value:(e=st()(at.a.mark((function t(){return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.subscription){t.next=4;break}return t.next=3,Ke.remove(this.subscription);case 3:this.subscription=null;case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),He=function(t){var e,n=ot.session;switch(null==n||null===(e=n.loginMethod)||void 0===e?void 0:e.objectType){case"sso":return o.logout();case"none":return o.logout().then((function(){return window.location.href="/unknown.html"}));case"native":default:return function(t){var e="";return t.code&&(e=e.concat("?error=".concat(t.code))),o.logout().then((function(){return window.location.href="/login.html".concat(e)}))}(t)}},We=new(function(){function t(){j()(this,t),A()(this,"_handlers",[{identifier:function(t){return 401===t.status},handle:function(t,e){if("AUTHENTICATION_INVALIDATED"===t.code){var n=ot.session.groupKey;return o.upgrade(n,{objectType:"user",inert:!0}).then((function(){return e()})).catch((function(){return He(t)}))}return g()?Promise.reject(t):He(t)}}])}var e;return P()(t,[{key:"registerHandler",value:function(t,e){this.handlers.unshift({identifier:t,handle:e})}},{key:"handle",value:(e=st()(at.a.mark((function t(e,n,r){var o,i,a,c;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||this.handlers,o=r.findIndex((function(t){return(0,t.identifier)(e)})),i=r[o],a=o>0?r.slice(o+1):[],i){t.next=6;break}throw e;case 6:return t.prev=6,t.next=9,i.handle(e,n).catch((function(t){throw t}));case 9:c=t.sent,t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(6),t.next=16,this.handle(e,n,a);case 16:c=t.sent;case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(t,n,r){return e.apply(this,arguments)})},{key:"handlers",get:function(){return this._handlers}}]),t}()),Xe=n(13),Ve=n.n(Xe),Je=n(20),Ge=n.n(Je);function ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(n),!0).forEach((function(e){A()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){var r=Ye({},t,{allValues:Kt()(t.values)}),o=function(){var o=st()(at.a.mark((function o(){var i,a,c;return at.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=new URLSearchParams(e.search),a=r.first_result+r.max_results,!(r.allValues.length>=t.total_results)){o.next=5;break}return r.done=!0,o.abrupt("return",r);case 5:return i.set("first",a),e.search=i,o.next=9,Ze(e,Ye({},n,{paginated:!1}));case 9:return c=o.sent,r.allValues=r.allValues.concat(c.values),Object.assign(r,c),o.abrupt("return",r);case 13:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),i=function(){var t=st()(at.a.mark((function t(){var e,n,r;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:if(e=t.sent,n=e.done,r=e.allValues,!n){t.next=7;break}return t.abrupt("return",r);case 7:return t.next=9,i();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.next=o,r.withAll=i,r}function Ze(t,e){return Qe.apply(this,arguments)}function Qe(){return(Qe=st()(at.a.mark((function t(e,n){var r,o,i,a,c,s,u,h,f,l,p,d;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.method,o=n.body,i=n.includeAuthorization,a=n.inert,c=n.paginated,s={"Content-type":"application/json; charset=UTF-8"},u=ot.session,i&&u&&(s.Authorization="Bearer ".concat(u.token)),t.next=6,Ge()(e,{method:r,cache:"no-cache",headers:s,redirect:"follow",body:o?JSON.stringify(o):null});case 6:if(h=t.sent,(f=h.headers.get("content-type"))&&f.includes("application/json")){t.next=10;break}throw new V("Response content-type '".concat(f,"' does not include 'application/json'"));case 10:return t.next=12,h.json();case 12:if(l=t.sent,!(h.status>=200&&h.status<400)){t.next=15;break}return t.abrupt("return",new $(c?$e(l,e,n):l,h));case 15:if(p=new Y(l,h),!a){t.next=18;break}throw p;case 18:return d=function(){return Ze(e,{method:r,body:o,includeAuthorization:i,inert:!0})},t.abrupt("return",We.handle(p,d));case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var tn=function(){function t(){j()(this,t)}var e,n,r,o,i;return P()(t,[{key:"withServer",value:function(t){return t&&(this.server=t),this}},{key:"withVersion",value:function(t){return t&&(this.version=t),this}},{key:"withAccountShortName",value:function(t){return t&&(this.accountShortName=t),this}},{key:"withProjectShortName",value:function(t){return t&&(this.projectShortName=t),this}},{key:"withSearchParams",value:function(t){return t?("object"===Ve()(t)&&0===Object.entries(t).length||(this.searchParams=t),this):this}},{key:"configure",value:function(){this.server||this.withServer("".concat(tt.apiProtocol,"://").concat(tt.apiHost)),this.accountShortName||this.withAccountShortName(tt.accountShortName),this.projectShortName||this.withProjectShortName(tt.projectShortName),this.version||this.withVersion(tt.apiVersion)}},{key:"getURL",value:function(t){this.configure();var e=new URL("".concat(this.server));return e.pathname="api/v".concat(this.version,"/").concat(this.accountShortName,"/").concat(this.projectShortName).concat(v("/",t)),e.search=new URLSearchParams(this.searchParams),e}},{key:"get",value:(i=st()(at.a.mark((function t(e,n){var r,o;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this.getURL(e)).href.length>2048)){t.next=4;break}return o=new URL(r.href.split("?")[0]),t.abrupt("return",this.post(o,{body:r.search}));case 4:return t.abrupt("return",Ze(r,Ye({includeAuthorization:!0},n,{method:"GET"})));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"delete",value:(o=st()(at.a.mark((function t(e,n){var r;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",Ze(r,Ye({includeAuthorization:!0},n,{method:"DELETE"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"patch",value:(r=st()(at.a.mark((function t(e,n){var r;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",Ze(r,Ye({includeAuthorization:!0},n,{method:"PATCH"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"post",value:(n=st()(at.a.mark((function t(e,n){var r;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",Ze(r,Ye({includeAuthorization:!0},n,{method:"POST"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"put",value:(e=st()(at.a.mark((function t(e,n){var r;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",Ze(r,Ye({includeAuthorization:!0},n,{method:"PUT"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"server",get:function(){return this._server},set:function(t){this._server=t}},{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"accountShortName",get:function(){return this._accountShortName},set:function(t){this._accountShortName=t}},{key:"projectShortName",get:function(){return this._projectShortName},set:function(t){this._projectShortName=t}},{key:"searchParams",get:function(){return this._searchParams},set:function(t){"object"===Ve()(t)&&t.constructor===Object&&(t=Object.entries(t).reduce((function(t,e){var n=Q()(e,2),r=n[0],o=n[1];return Array.isArray(o)?[].concat(Kt()(t),Kt()(o.map((function(t){return[r,t]})))):(null==o||t.push([r,o]),t)}),[])),this._searchParams=t}}]),t}(),en="3.1.0-alpha"}])}));
//# sourceMappingURL=epicenter.js.map