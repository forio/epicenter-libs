/*! Epicenter v3.2.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.epicenter=e():t.epicenter=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){t.exports=n(31)},function(t,e){function n(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(14);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(15),o=n(11);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){var r=n(28),o=n(29),i=n(16),a=n(30);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(23);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},o(e,n,i||e)}t.exports=o},function(t,e,n){var r=n(4),o=n(14),i=n(24),a=n(25);function c(e){var n="function"==typeof Map?new Map:void 0;return t.exports=c=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},c(e)}t.exports=c},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(27);t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},function(t,e,n){var r=n(32),o=n(33),i=n(16),a=n(34);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(17);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){t.exports=function(){var t=function(){var t=0,e={};this.register=function(n){var r=++t;return e[r]=n,r},this.unregister=function(t){var n=e[t];return delete e[t],n},this.setTimeout=function(t,e){return window.setTimeout(t,e)},this.clearTimeout=function(t){window.clearTimeout(t)}};function e(){var t={};self.onmessage=function(e){var n=e.data,r=t[n.id];switch(n.type){case"setTimeout":t[n.id]=self.setTimeout((function(){delete t[n.id],self.postMessage({id:n.id})}),n.delay);break;case"clearTimeout":delete t[n.id],r&&self.clearTimeout(r);break;default:throw"Unknown command "+n.type}}}var n={isString:function(t){return null!=t&&("string"==typeof t||t instanceof String)},isArray:function(t){return null!=t&&t instanceof Array},inArray:function(t,e){for(var n=0;n<e.length;++n)if(t===e[n])return n;return-1}},r=function(){var t=[],e={};this.getTransportTypes=function(){return t.slice(0)},this.findTransportTypes=function(n,r,o){for(var i=[],a=0;a<t.length;++a){var c=t[a];!0===e[c].accept(n,r,o)&&i.push(c)}return i},this.negotiateTransport=function(n,r,o,i){for(var a=0;a<t.length;++a)for(var c=t[a],u=0;u<n.length;++u)if(c===n[u]){var s=e[c];if(!0===s.accept(r,o,i))return s}return null},this.add=function(n,r,o){for(var i=!1,a=0;a<t.length;++a)if(t[a]===n){i=!0;break}return i||("number"!=typeof o?t.push(n):t.splice(o,0,n),e[n]=r),!i},this.find=function(n){for(var r=0;r<t.length;++r)if(t[r]===n)return e[n];return null},this.remove=function(n){for(var r=0;r<t.length;++r)if(t[r]===n){t.splice(r,1);var o=e[n];return delete e[n],o}return null},this.clear=function(){t=[],e={}},this.reset=function(n){for(var r=0;r<t.length;++r)e[t[r]].reset(n)}},o=function(){var t,e,r;this.registered=function(n,r){t=n,e=r},this.unregistered=function(){t=null,e=null},this._debug=function(){e._debug.apply(e,arguments)},this._mixin=function(){return e._mixin.apply(e,arguments)},this.getConfiguration=function(){return e.getConfiguration()},this.getAdvice=function(){return e.getAdvice()},this.setTimeout=function(t,n){return e.setTimeout(t,n)},this.clearTimeout=function(t){e.clearTimeout(t)},this.convertToMessages=function(t){if(n.isString(t))try{return JSON.parse(t)}catch(e){throw this._debug("Could not convert to JSON the following string",'"'+t+'"'),e}if(n.isArray(t))return t;if(null==t)return[];if(t instanceof Object)return[t];throw"Conversion Error "+t+", typeof "+typeof t},this.accept=function(t,e,n){throw"Abstract"},this.getType=function(){return t},this.getURL=function(){return r},this.setURL=function(t){r=t},this.send=function(t,e){throw"Abstract"},this.reset=function(e){this._debug("Transport",t,"reset",e?"initial":"retry")},this.abort=function(){this._debug("Transport",t,"aborted")},this.toString=function(){return this.getType()}};o.derive=function(t){function e(){}return e.prototype=t,new e};var i=function(){var t=new o,e=o.derive(t),r=0,i=null,a=[],c=[];function u(t){for(;c.length>0;){var e=c[0],n=e[0],r=e[1];if(n.url!==t.url||n.sync!==t.sync)break;c.shift(),t.messages=t.messages.concat(n.messages),this._debug("Coalesced",n.messages.length,"messages from request",r.id)}}function s(t,e){if(this.transportSend(t,e),e.expired=!1,!t.sync){var n=this.getConfiguration().maxNetworkDelay,r=n;!0===e.metaConnect&&(r+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",r,"ms for the response, maxNetworkDelay",n);var o=this;e.timeout=this.setTimeout((function(){e.expired=!0;var n="Request "+e.id+" of transport "+o.getType()+" exceeded "+r+" ms max network delay",i={reason:n},a=e.xhr;i.httpCode=o.xhrStatus(a),o.abortXHR(a),o._debug(n),o.complete(e,!1,e.metaConnect),t.onFailure(a,t.messages,i)}),r)}}function h(t){var e=++r,n={id:e,metaConnect:!1,envelope:t};a.length<this.getConfiguration().maxConnections-1?(a.push(n),s.call(this,t,n)):(this._debug("Transport",this.getType(),"queueing request",e,"envelope",t),c.push([t,n]))}function p(t){var e=t.id;if(this._debug("Transport",this.getType(),"/meta/connect complete, request",e),null!==i&&i.id!==e)throw"/meta/connect request mismatch, completing request "+e;i=null}function f(t,e){var r=n.inArray(t,a);if(r>=0&&a.splice(r,1),c.length>0){var o=c.shift(),i=o[0],s=o[1];if(this._debug("Transport dequeued request",s.id),e)this.getConfiguration().autoBatch&&u.call(this,i),h.call(this,i),this._debug("Transport completed request",t.id,i);else{var p=this;this.setTimeout((function(){p.complete(s,!1,s.metaConnect);var t={reason:"Previous request failed"},e=s.xhr;t.httpCode=p.xhrStatus(e),i.onFailure(e,i.messages,t)}),0)}}}function l(t){if(null!==i)throw"Concurrent /meta/connect requests not allowed, request id="+i.id+" not yet completed";var e=++r;this._debug("Transport",this.getType(),"/meta/connect send, request",e,"envelope",t);var n={id:e,metaConnect:!0,envelope:t};s.call(this,t,n),i=n}return e.complete=function(t,e,n){n?p.call(this,t):f.call(this,t,e)},e.transportSend=function(t,e){throw"Abstract"},e.transportSuccess=function(t,e,n){e.expired||(this.clearTimeout(e.timeout),this.complete(e,!0,e.metaConnect),n&&n.length>0?t.onSuccess(n):t.onFailure(e.xhr,t.messages,{httpCode:204}))},e.transportFailure=function(t,e,n){e.expired||(this.clearTimeout(e.timeout),this.complete(e,!1,e.metaConnect),t.onFailure(e.xhr,t.messages,n))},e.send=function(t,e){e?l.call(this,t):h.call(this,t)},e.abort=function(){t.abort();for(var e=0;e<a.length;++e){var n=a[e];n&&(this._debug("Aborting request",n),this.abortXHR(n.xhr)||this.transportFailure(n.envelope,n,{reason:"abort"}))}var r=i;r&&(this._debug("Aborting /meta/connect request",r),this.abortXHR(r.xhr)||this.transportFailure(r.envelope,r,{reason:"abort"})),this.reset(!0)},e.reset=function(e){t.reset(e),i=null,a=[],c=[]},e.abortXHR=function(t){if(t)try{var e=t.readyState;return t.abort(),e!==window.XMLHttpRequest.UNSENT}catch(t){this._debug(t)}return!1},e.xhrStatus=function(t){if(t)try{return t.status}catch(t){this._debug(t)}return-1},e},a=function(){var t=new i,e=o.derive(t),n=!0;return e.accept=function(t,e,r){return n||!e},e.newXMLHttpRequest=function(){return new window.XMLHttpRequest},e.xhrSend=function(t){var n=e.newXMLHttpRequest();!function(t){try{t.context=e.context}catch(t){this._debug("Could not copy transport context into XHR",t)}}(n),n.withCredentials=!0,n.open("POST",t.url,!0!==t.sync);var r=t.headers;if(r)for(var o in r)r.hasOwnProperty(o)&&n.setRequestHeader(o,r[o]);return n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onload=function(){200===n.status?t.onSuccess(n.responseText):t.onError(n.statusText)},n.onabort=n.onerror=function(){t.onError(n.statusText)},n.send(t.body),n},e.transportSend=function(t,e){this._debug("Transport",this.getType(),"sending request",e.id,"envelope",t);var r=this;try{var o=!0;e.xhr=this.xhrSend({transport:this,url:t.url,sync:t.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(t.messages),onSuccess:function(o){r._debug("Transport",r.getType(),"received response",o);var i=!1;try{var a=r.convertToMessages(o);0===a.length?(n=!1,r.transportFailure(t,e,{httpCode:204})):(i=!0,r.transportSuccess(t,e,a))}catch(o){if(r._debug(o),!i){n=!1;var c={exception:o};c.httpCode=r.xhrStatus(e.xhr),r.transportFailure(t,e,c)}}},onError:function(i,a){r._debug("Transport",r.getType(),"received error",i,a),n=!1;var c={reason:i,exception:a};c.httpCode=r.xhrStatus(e.xhr),o?r.setTimeout((function(){r.transportFailure(t,e,c)}),0):r.transportFailure(t,e,c)}}),o=!1}catch(o){n=!1,this.setTimeout((function(){r.transportFailure(t,e,{exception:o})}),0)}},e.reset=function(e){t.reset(e),n=!0},e},c=function(){var t=new i,e=o.derive(t),n=0;function r(t,e,n){var r=this;return function(){r.transportFailure(t,e,"error",n)}}return e.accept=function(t,e,n){return!0},e.jsonpSend=function(t){var e=document.getElementsByTagName("head")[0],r=document.createElement("script"),o="_cometd_jsonp_"+n++;window[o]=function(n){e.removeChild(r),delete window[o],t.onSuccess(n)};var i=t.url;i+=i.indexOf("?")<0?"?":"&",i+="jsonp="+o,i+="&message="+encodeURIComponent(t.body),r.src=i,r.async=!0!==t.sync,r.type="application/javascript",r.onerror=function(e){t.onError("jsonp "+e.type)},e.appendChild(r)},e.transportSend=function(t,e){for(var n=this,o=0,i=t.messages.length,a=[];i>0;){var c=JSON.stringify(t.messages.slice(o,o+i)),u=t.url.length+encodeURI(c).length,s=this.getConfiguration().maxURILength;if(u>s){if(1===i){var h="Bayeux message too big ("+u+" bytes, max is "+s+") for transport "+this.getType();return void this.setTimeout(r.call(this,t,e,h),0)}--i}else a.push(i),o+=i,i=t.messages.length-o}var p=t;if(a.length>1){var f=0,l=a[0];this._debug("Transport",this.getType(),"split",t.messages.length,"messages into",a.join(" + ")),(p=this._mixin(!1,{},t)).messages=t.messages.slice(f,l),p.onSuccess=t.onSuccess,p.onFailure=t.onFailure;for(var d=1;d<a.length;++d){var m=this._mixin(!1,{},t);f=l,l+=a[d],m.messages=t.messages.slice(f,l),m.onSuccess=t.onSuccess,m.onFailure=t.onFailure,this.send(m,e.metaConnect)}}this._debug("Transport",this.getType(),"sending request",e.id,"envelope",p);try{var y=!0;this.jsonpSend({transport:this,url:p.url,sync:p.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(p.messages),onSuccess:function(t){var r=!1;try{var o=n.convertToMessages(t);0===o.length?n.transportFailure(p,e,{httpCode:204}):(r=!0,n.transportSuccess(p,e,o))}catch(t){n._debug(t),r||n.transportFailure(p,e,{exception:t})}},onError:function(t,r){var o={reason:t,exception:r};y?n.setTimeout((function(){n.transportFailure(p,e,o)}),0):n.transportFailure(p,e,o)}}),y=!1}catch(t){this.setTimeout((function(){n.transportFailure(p,e,{exception:t})}),0)}},e},u=function(){var t,e=new o,r=o.derive(e),i=!0,a=!1,c=!0,u=null,s=null,h=!1,p=null;function f(t,e){t&&(this.webSocketClose(t,e.code,e.reason),this.onClose(t,e))}function l(t){return t===s||t===u}function d(t,e,n){for(var r=[],o=0;o<e.messages.length;++o){var i=e.messages[o];i.id&&r.push(i.id)}t.envelopes[r.join(",")]=[e,n],this._debug("Transport",this.getType(),"stored envelope, envelopes",t.envelopes)}function m(e){if(!s){var n=t.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",n);try{var r=t.getConfiguration().protocol;e.webSocket=r?new window.WebSocket(n,r):new window.WebSocket(n),s=e}catch(t){throw i=!1,this._debug("Exception while creating WebSocket object",t),t}c=!1!==t.getConfiguration().stickyReconnect;var o=this,h=t.getConfiguration().connectTimeout;h>0&&(e.connectTimer=this.setTimeout((function(){t._debug("Transport",o.getType(),"timed out while connecting to URL",n,":",h,"ms"),f.call(o,e,{code:1e3,reason:"Connect Timeout"})}),h));var p=function(n){n=n||{code:1e3},t._debug("WebSocket onclose",e,n,"connecting",s,"current",u),e.connectTimer&&o.clearTimeout(e.connectTimer),o.onClose(e,n)};e.webSocket.onopen=function(){t._debug("WebSocket onopen",e),e.connectTimer&&o.clearTimeout(e.connectTimer),l(e)?(s=null,u=e,a=!0,o.onOpen(e)):(t._warn("Closing extra WebSocket connection",this,"active connection",u),f.call(o,e,{code:1e3,reason:"Extra Connection"}))},e.webSocket.onclose=p,e.webSocket.onerror=function(){p({code:1e3,reason:"Error"})},e.webSocket.onmessage=function(n){t._debug("WebSocket onmessage",n,e),o.onMessage(e,n)},this._debug("Transport",this.getType(),"configured callbacks on",e)}}function y(e,n,r){var o=JSON.stringify(n.messages);e.webSocket.send(o),this._debug("Transport",this.getType(),"sent",n,"/meta/connect =",r);var i=this.getConfiguration().maxNetworkDelay,a=i;r&&(a+=this.getAdvice().timeout,h=!0);for(var c=this,u=[],s=0;s<n.messages.length;++s)!function(){var r=n.messages[s];r.id&&(u.push(r.id),e.timeouts[r.id]=c.setTimeout((function(){t._debug("Transport",c.getType(),"timing out message",r.id,"after",a,"on",e),f.call(c,e,{code:1e3,reason:"Message Timeout"})}),a))}();this._debug("Transport",this.getType(),"waiting at most",a,"ms for messages",u,"maxNetworkDelay",i,", timeouts:",e.timeouts)}function v(t,e,n){try{null===t?(t=s||{envelopes:{},timeouts:{}},d.call(this,t,e,n),m.call(this,t)):(d.call(this,t,e,n),y.call(this,t,e,n))}catch(e){var r=this;this.setTimeout((function(){f.call(r,t,{code:1e3,reason:"Exception",exception:e})}),0)}}return r.reset=function(t){e.reset(t),i=!0,t&&(a=!1),c=!0,u=null,s=null,h=!1},r._notifySuccess=function(t,e){t.call(this,e)},r._notifyFailure=function(t,e,n,r){t.call(this,e,n,r)},r.onOpen=function(t){var e=t.envelopes;for(var n in this._debug("Transport",this.getType(),"opened",t,"pending messages",e),e)if(e.hasOwnProperty(n)){var r=e[n],o=r[0],i=r[1];p=o.onSuccess,y.call(this,t,o,i)}},r.onMessage=function(t,e){this._debug("Transport",this.getType(),"received websocket message",e,t);for(var r=!1,o=this.convertToMessages(e.data),i=[],a=0;a<o.length;++a){var c=o[a];if((/^\/meta\//.test(c.channel)||void 0===c.data)&&c.id){i.push(c.id);var u=t.timeouts[c.id];u&&(this.clearTimeout(u),delete t.timeouts[c.id],this._debug("Transport",this.getType(),"removed timeout for message",c.id,", timeouts",t.timeouts))}"/meta/connect"===c.channel&&(h=!1),"/meta/disconnect"!==c.channel||h||(r=!0)}for(var s=!1,f=t.envelopes,l=0;l<i.length;++l){var d=i[l];for(var m in f)if(f.hasOwnProperty(m)){var y=m.split(","),v=n.inArray(d,y);if(v>=0){s=!0,y.splice(v,1);var g=f[m][0],w=f[m][1];delete f[m],y.length>0&&(f[y.join(",")]=[g,w]);break}}}s&&this._debug("Transport",this.getType(),"removed envelope, envelopes",f),this._notifySuccess(p,o),r&&this.webSocketClose(t,1e3,"Disconnect")},r.onClose=function(t,e){this._debug("Transport",this.getType(),"closed",t,e),l(t)&&(i=c&&a,s=null,u=null);var n=t.timeouts;for(var r in t.timeouts={},n)n.hasOwnProperty(r)&&this.clearTimeout(n[r]);var o=t.envelopes;for(var p in t.envelopes={},o)if(o.hasOwnProperty(p)){var f=o[p][0];o[p][1]&&(h=!1);var d={websocketCode:e.code,reason:e.reason};e.exception&&(d.exception=e.exception),this._notifyFailure(f.onFailure,t,f.messages,d)}},r.registered=function(n,r){e.registered(n,r),t=r},r.accept=function(e,n,r){return this._debug("Transport",this.getType(),"accept, supported:",i),i&&!!window.WebSocket&&!1!==t.websocketEnabled},r.send=function(t,e){this._debug("Transport",this.getType(),"sending",t,"/meta/connect =",e),v.call(this,u,t,e)},r.webSocketClose=function(t,e,n){try{t.webSocket&&t.webSocket.close(e,n)}catch(t){this._debug(t)}},r.abort=function(){e.abort(),f.call(this,u,{code:1e3,reason:"Abort"}),this.reset(!0)},r},s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",".","-",":","+","=","^","!","/","*","?","&","<",">","(",")","[","]","{","}","@","%","$","#"],h=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0];return{CometD:function(o){var i,s,h,p,f,l=new t,d=this,m=o||"default",y=!1,v=new r,g="disconnected",w=0,b=null,x=0,S=[],k=!1,N=0,T={},j=0,P=null,_=[],A={},O={},R={},E=!1,C=!1,I=0,L=0,U=null,D={useWorkerScheduler:!0,protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,urls:{},maxURILength:2e3,advice:{timeout:6e4,interval:0,reconnect:void 0,maxInterval:0}};function B(t,e){try{return t[e]}catch(t){return}}function M(t){return n.isString(t)}function F(t){return null!=t&&"function"==typeof t}function K(t,e){for(var n="";--e>0&&!(t>=Math.pow(10,e));)n+="0";return n+=t}function q(t,e){if(window.console){var n=window.console[t];if(F(n)){var r=new Date;[].splice.call(e,0,0,K(r.getHours(),2)+":"+K(r.getMinutes(),2)+":"+K(r.getSeconds(),2)+"."+K(r.getMilliseconds(),3)),n.apply(window.console,e)}}}function H(t){return new RegExp("(^https?://)?(((\\[[^\\]]+])|([^:/?#]+))(:(\\d+))?)?([^?#]*)(.*)?").exec(t)}function W(t){d._debug("Configuring cometd object with",t),M(t)&&(t={url:t}),t||(t={}),D=d._mixin(!1,D,t);var n=d.getURL();if(!n)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var r=H(n),o=r[2],i=r[8],a=r[9];if(y=d._isCrossDomain(o),D.appendMessageTypeToURL)if(void 0!==a&&a.length>0)d._info("Appending message type to URI "+i+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1;else{var c=i.split("/"),u=c.length-1;i.match(/\/$/)&&(u-=1),c[u].indexOf(".")>=0&&(d._info("Appending message type to URI "+i+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1)}if(window.Worker&&window.Blob&&window.URL&&D.useWorkerScheduler){var s=e.toString();s=s.substring(s.indexOf("{")+1,s.lastIndexOf("}"));var h=new window.Blob([s],{type:"application/json"}),p=window.URL.createObjectURL(h),f=new window.Worker(p);l.setTimeout=function(t,e){var n=l.register(t);return f.postMessage({id:n,type:"setTimeout",delay:e}),n},l.clearTimeout=function(t){l.unregister(t),f.postMessage({id:t,type:"clearTimeout"})},f.onmessage=function(t){var e=t.data.id,n=l.unregister(e);n&&n()}}}function z(t){if(t){var e=T[t.channel];e&&e[t.id]&&(delete e[t.id],d._debug("Removed",t.listener?"listener":"subscription",t))}}function X(t){t&&!t.listener&&z(t)}function G(){for(var t in T)if(T.hasOwnProperty(t)){var e=T[t];if(e)for(var n in e)e.hasOwnProperty(n)&&X(e[n])}}function J(t){g!==t&&(d._debug("Status",g,"->",t),g=t)}function V(){return"disconnecting"===g||"disconnected"===g}function $(){return""+ ++w}function Y(t,e,n,r,o){try{return e.call(t,r)}catch(t){var i=d.onExtensionException;if(F(i)){d._debug("Invoking extension exception handler",n,t);try{i.call(d,t,n,o,r)}catch(t){d._info("Exception during execution of extension exception handler",n,t)}}else d._info("Exception during execution of extension",n,t);return r}}function Z(t){for(var e=_.length-1;e>=0&&null!=t;--e){var n=_[e],r=n.extension.outgoing;if(F(r)){var o=Y(n.extension,r,n.name,t,!0);t=void 0===o?t:o}}return t}function Q(t,e){var n=T[t];if(n)for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o)try{o.callback.call(o.scope,e)}catch(t){var i=d.onListenerException;if(F(i)){d._debug("Invoking listener exception handler",o,t);try{i.call(d,t,o,o.listener,e)}catch(t){d._info("Exception during execution of listener exception handler",o,t)}}else d._info("Exception during execution of listener",o,e,t)}}}function tt(t,e){Q(t,e);for(var n=t.split("/"),r=n.length-1,o=r;o>0;--o){var i=n.slice(0,o).join("/")+"/*";o===r&&Q(i,e),Q(i+="*",e)}}function et(){null!==P&&d.clearTimeout(P),P=null}function nt(t,e){et();var n=A.interval+e;d._debug("Function scheduled in",n,"ms, interval =",A.interval,"backoff =",j,t),P=d.setTimeout(t,n)}function rt(t,e,n){for(var r=0;r<t.length;++r){var o=t[r],a=o.id;b&&(o.clientId=b),null!=(o=Z(o))?(o.id=a,t[r]=o):(delete O[a],t.splice(r--,1))}if(0!==t.length){e&&(U=t[0]);var c=d.getURL();D.appendMessageTypeToURL&&(c.match(/\/$/)||(c+="/"),n&&(c+=n));var u={url:c,sync:!1,messages:t,onSuccess:function(t){try{p.call(d,t)}catch(t){d._info("Exception during handling of messages",t)}},onFailure:function(t,e,n){try{var r=d.getTransport();n.connectionType=r?r.getType():"unknown",f.call(d,t,e,n)}catch(t){d._info("Exception during handling of failure",t)}}};d._debug("Send",u),i.send(u,e)}}function ot(t){x>0||!0===k?S.push(t):rt([t],!1)}function it(){j=0}function at(){var t=S;S=[],t.length>0&&rt(t,!1)}function ct(t){J("connecting"),nt((function(){!function(){if(!V()){var t={id:$(),channel:"/meta/connect",connectionType:i.getType()};C||(t.advice={timeout:0}),J("connecting"),d._debug("Connect sent",t),rt([t],!0,"connect"),J("connected")}}()}),t)}function ut(t){t&&(A=d._mixin(!1,{},D.advice,t),d._debug("New advice",A))}function st(t){if(et(),t&&i&&i.abort(),y=!1,i=null,J("disconnected"),b=null,x=0,it(),E=!1,C=!1,I=0,U=null,S.length>0){var e=S;S=[],f.call(d,void 0,e,{reason:"Disconnected"})}}function ht(t,e,n){var r=d.onTransportException;if(F(r)){d._debug("Invoking transport exception handler",t,e,n);try{r.call(d,n,t,e)}catch(t){d._info("Exception during execution of transport exception handler",t)}}}function pt(t,e){F(t)&&(e=t,t=void 0),b=null,G(),V()&&v.reset(!0),ut({}),x=0,k=!0,s=t,h=e;var n=d.getURL(),r=v.findTransportTypes("1.0",y,n),o={id:$(),version:"1.0",minimumVersion:"1.0",channel:"/meta/handshake",supportedConnectionTypes:r,advice:{timeout:A.timeout,interval:A.interval}},a=d._mixin(!1,{},s,o);if(d._putCallback(a.id,e),!i&&!(i=v.negotiateTransport(r,"1.0",y,n))){var c="Could not find initial transport among: "+v.getTransportTypes();throw d._warn(c),c}d._debug("Initial transport is",i.getType()),J("handshaking"),d._debug("Handshake sent",a),rt([a],!1,"handshake")}function ft(t,e){try{t.call(d,e)}catch(t){var n=d.onCallbackException;if(F(n)){d._debug("Invoking callback exception handler",t);try{n.call(d,t,e)}catch(t){d._info("Exception during execution of callback exception handler",t)}}else d._info("Exception during execution of message callback",t)}}function lt(t){var e=d._getCallback([t.id]);F(e)&&(delete O[t.id],ft(e,t))}function dt(t){var e=R[t.id];if(delete R[t.id],e){d._debug("Handling remote call response for",t,"with context",e);var n=e.timeout;n&&d.clearTimeout(n);var r=e.callback;if(F(r))return ft(r,t),!0}return!1}function mt(t){d._debug("Transport failure handling",t),t.transport&&(i=t.transport),t.url&&i.setURL(t.url);var e=t.action,n=t.delay||0;switch(e){case"handshake":!function(t){J("handshaking"),k=!0,nt((function(){pt(s,h)}),t)}(n);break;case"retry":ct(n);break;case"none":st(!0);break;default:throw"Unknown action "+e}}function yt(t,e){lt(t),tt("/meta/handshake",t),tt("/meta/unsuccessful",t),V()&&(e.action="none"),d.onTransportFailure.call(d,t,e,mt)}function vt(t){yt(t,{cause:"failure",action:"handshake",transport:null})}function gt(t){return"disconnected"===g||!(!U||U.id!==t.id)&&(U=null,!0)}function wt(t,e){tt("/meta/connect",t),tt("/meta/unsuccessful",t),V()&&(e.action="none"),d.onTransportFailure.call(d,t,e,mt)}function bt(t){gt(t)?(C=!1,wt(t,{cause:"failure",action:"retry",transport:null})):d._debug("Mismatched /meta/connect failure",t)}function xt(t){st(!0),lt(t),tt("/meta/disconnect",t),tt("/meta/unsuccessful",t)}function St(t){xt(t)}function kt(t){var e=T[t.subscription];if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r&&!r.listener&&(delete e[n],d._debug("Removed failed subscription",r))}lt(t),tt("/meta/subscribe",t),tt("/meta/unsuccessful",t)}function Nt(t){kt(t)}function Tt(t){lt(t),tt("/meta/unsubscribe",t),tt("/meta/unsuccessful",t)}function jt(t){Tt(t)}function Pt(t){dt(t)||(lt(t),tt("/meta/publish",t),tt("/meta/unsuccessful",t))}function _t(t){Pt(t)}function At(t){if(I=0,null!=(t=function(t){for(var e=0;e<_.length&&null!=t;++e){var n=_[e],r=n.extension.incoming;if(F(r)){var o=Y(n.extension,r,n.name,t,!1);t=void 0===o?t:o}}return t}(t)))switch(ut(t.advice),t.channel){case"/meta/handshake":!function(t){var e=d.getURL();if(t.successful){var n=d._isCrossDomain(H(e)[2]),r=v.negotiateTransport(t.supportedConnectionTypes,t.version,n,e);if(null===r)return t.successful=!1,void yt(t,{cause:"negotiation",action:"none",transport:null});i!==r&&(d._debug("Transport",i.getType(),"->",r.getType()),i=r),b=t.clientId,k=!1,at(),t.reestablish=E,E=!0,lt(t),tt("/meta/handshake",t),L=t["x-messages"]||0;var o=V()?"none":A.reconnect||"retry";switch(o){case"retry":it(),0===L?ct(0):d._debug("Processing",L,"handshake-delivered messages");break;case"none":st(!0);break;default:throw"Unrecognized advice action "+o}}else yt(t,{cause:"unsuccessful",action:A.reconnect||"handshake",transport:i})}(t);break;case"/meta/connect":!function(t){if(gt(t))if(C=t.successful){tt("/meta/connect",t);var e=V()?"none":A.reconnect||"retry";switch(e){case"retry":it(),ct(j);break;case"none":st(!1);break;default:throw"Unrecognized advice action "+e}}else wt(t,{cause:"unsuccessful",action:A.reconnect||"retry",transport:i});else d._debug("Mismatched /meta/connect reply",t)}(t);break;case"/meta/disconnect":!function(t){t.successful?(st(!1),lt(t),tt("/meta/disconnect",t)):xt(t)}(t);break;case"/meta/subscribe":!function(t){t.successful?(lt(t),tt("/meta/subscribe",t)):kt(t)}(t);break;case"/meta/unsubscribe":!function(t){t.successful?(lt(t),tt("/meta/unsubscribe",t)):Tt(t)}(t);break;default:!function(t){void 0!==t.data?dt(t)||(tt(t.channel,t),L>0&&0==--L&&(d._debug("Processed last handshake-delivered message"),ct(0))):void 0===t.successful?d._warn("Unknown Bayeux Message",t):t.successful?(lt(t),tt("/meta/publish",t)):Pt(t)}(t)}}function Ot(t){var e=T[t];if(e)for(var n in e)if(e.hasOwnProperty(n)&&e[n])return!0;return!1}function Rt(t,e){var n={scope:t,method:e};if(F(t))n.scope=void 0,n.method=t;else if(M(e)){if(!t)throw"Invalid scope "+t;if(n.method=t[e],!F(n.method))throw"Invalid callback "+e+" for scope "+t}else if(!F(e))throw"Invalid callback "+e;return n}function Et(t,e,n,r){var o=Rt(e,n);d._debug("Adding",r?"listener":"subscription","on",t,"with scope",o.scope,"and callback",o.method);var i=++N,a={id:i,channel:t,scope:o.scope,callback:o.method,listener:r},c=T[t];return c||(c={},T[t]=c),c[i]=a,d._debug("Added",r?"listener":"subscription",a),a}this._mixin=function(t,e,n){for(var r=e||{},o=2;o<arguments.length;++o){var i=arguments[o];if(null!=i)for(var a in i)if(i.hasOwnProperty(a)){var c=B(i,a),u=B(r,a);if(c===e)continue;if(void 0===c)continue;if(t&&"object"==typeof c&&null!==c)if(c instanceof Array)r[a]=this._mixin(t,u instanceof Array?u:[],c);else{var s="object"!=typeof u||u instanceof Array?{}:u;r[a]=this._mixin(t,s,c)}else r[a]=c}}return r},this._warn=function(){q("warn",arguments)},this._info=function(){"warn"!==D.logLevel&&q("info",arguments)},this._debug=function(){"debug"===D.logLevel&&q("debug",arguments)},this._isCrossDomain=function(t){return!!(window.location&&window.location.host&&t)&&t!==window.location.host},this.send=ot,this._getCallback=function(t){return O[t]},this._putCallback=function(t,e){var n=this._getCallback(t);return F(e)&&(O[t]=e),n},this.onTransportFailure=function(t,e,n){this._debug("Transport failure",e,"for",t);var r=this.getTransportRegistry(),o=this.getURL(),a=this._isCrossDomain(H(o)[2]),c=r.findTransportTypes("1.0",a,o);if("none"===e.action){if("/meta/handshake"===t.channel&&!e.transport){var u="Could not negotiate transport, client=["+c+"], server=["+t.supportedConnectionTypes+"]";this._warn(u),ht(i.getType(),null,{reason:u,connectionType:i.getType(),transport:i})}}else if(e.delay=this.getBackoffPeriod(),"/meta/handshake"===t.channel){if(!e.transport){var s=i?i.getType():null,h=r.negotiateTransport(c,"1.0",a,o);if(h){var p=h.getType();this._debug("Transport",s,"->",p),ht(s,p,t.failure),e.action="handshake",e.transport=h}else this._warn("Could not negotiate transport, client=["+c+"]"),ht(s,null,t.failure),e.action="none"}"none"!==e.action&&this.increaseBackoffPeriod()}else{var f=(new Date).getTime();if(0===I&&(I=f),"retry"===e.action){e.delay=this.increaseBackoffPeriod();var l=A.maxInterval;if(l>0){var m=A.timeout+A.interval+l;f-I+j>m&&(e.action="handshake")}}"handshake"===e.action&&(e.delay=0,r.reset(!1),this.resetBackoffPeriod())}n.call(d,e)},this.receive=At,p=function(t){d._debug("Received",t);for(var e=0;e<t.length;++e)At(t[e])},f=function(t,e,n){d._debug("handleFailure",t,e,n),n.transport=t;for(var r=0;r<e.length;++r){var o=e[r],i={id:o.id,successful:!1,channel:o.channel,failure:n};switch(n.message=o,o.channel){case"/meta/handshake":vt(i);break;case"/meta/connect":bt(i);break;case"/meta/disconnect":St(i);break;case"/meta/subscribe":i.subscription=o.subscription,Nt(i);break;case"/meta/unsubscribe":i.subscription=o.subscription,jt(i);break;default:_t(i)}}},this.registerTransport=function(t,e,n){var r=v.add(t,e,n);return r&&(this._debug("Registered transport",t),F(e.registered)&&e.registered(t,this)),r},this.unregisterTransport=function(t){var e=v.remove(t);return null!==e&&(this._debug("Unregistered transport",t),F(e.unregistered)&&e.unregistered()),e},this.unregisterTransports=function(){v.clear()},this.getTransportTypes=function(){return v.getTransportTypes()},this.findTransport=function(t){return v.find(t)},this.getTransportRegistry=function(){return v},this.configure=function(t){W.call(this,t)},this.init=function(t,e){this.configure(t),this.handshake(e)},this.handshake=function(t,e){if("disconnected"!==g)throw"Illegal state: handshaken";pt(t,e)},this.disconnect=function(t,e){if(!V()){F(t)&&(e=t,t=void 0);var n={id:$(),channel:"/meta/disconnect"},r=this._mixin(!1,{},t,n);d._putCallback(r.id,e),J("disconnecting"),rt([r],!1,"disconnect")}},this.startBatch=function(){++x,d._debug("Starting batch, depth",x)},this.endBatch=function(){!function(){if(--x,d._debug("Ending batch, depth",x),x<0)throw"Calls to startBatch() and endBatch() are not paired";0!==x||V()||k||at()}()},this.batch=function(t,e){var n=Rt(t,e);this.startBatch();try{n.method.call(n.scope),this.endBatch()}catch(t){throw this._info("Exception during execution of batch",t),this.endBatch(),t}},this.addListener=function(t,e,n){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";return Et(t,e,n,!0)},this.removeListener=function(t){if(!t||!t.channel||!("id"in t))throw"Invalid argument: expected subscription, not "+t;z(t)},this.clearListeners=function(){T={}},this.subscribe=function(t,e,n,r,o){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";if(V())throw"Illegal state: disconnected";F(e)&&(o=r,r=n,n=e,e=void 0),F(r)&&(o=r,r=void 0);var i=!Ot(t),a=Et(t,e,n,!1);if(i){var c={id:$(),channel:"/meta/subscribe",subscription:t},u=this._mixin(!1,{},r,c);d._putCallback(u.id,o),ot(u)}return a},this.unsubscribe=function(t,e,n){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(V())throw"Illegal state: disconnected";F(e)&&(n=e,e=void 0),this.removeListener(t);var r=t.channel;if(!Ot(r)){var o={id:$(),channel:"/meta/unsubscribe",subscription:r},i=this._mixin(!1,{},e,o);d._putCallback(i.id,n),ot(i)}},this.resubscribe=function(t,e){if(X(t),t)return this.subscribe(t.channel,t.scope,t.callback,e)},this.clearSubscriptions=function(){G()},this.publish=function(t,e,n,r){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!M(t))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(t))throw"Illegal argument: cannot publish to meta channels";if(V())throw"Illegal state: disconnected";F(e)?(r=e,e={},n=void 0):F(n)&&(r=n,n=void 0);var o={id:$(),channel:t,data:e},i=this._mixin(!1,{},n,o);d._putCallback(i.id,r),ot(i)},this.publishBinary=function(t,e,n,r,o){F(e)?(o=e,e=new ArrayBuffer(0),n=!0,r=void 0):F(n)?(o=n,n=!0,r=void 0):F(r)&&(o=r,r=void 0);var i={meta:r,data:e,last:n};this.publish(t,i,{ext:{binary:{}}},o)},this.remoteCall=function(t,e,n,r,o){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!M(t))throw"Illegal argument type: target must be a string";if(V())throw"Illegal state: disconnected";if(F(e)?(o=e,e={},n=D.maxNetworkDelay,r=void 0):F(n)?(o=n,n=D.maxNetworkDelay,r=void 0):F(r)&&(o=r,r=void 0),"number"!=typeof n)throw"Illegal argument type: timeout must be a number";t.match(/^\//)||(t="/"+t);var i="/service"+t,a={id:$(),channel:i,data:e},c=this._mixin(!1,{},r,a),u={callback:o};n>0&&(u.timeout=d.setTimeout((function(){d._debug("Timing out remote call",c,"after",n,"ms"),Pt({id:c.id,error:"406::timeout",successful:!1,failure:{message:c,reason:"Remote Call Timeout"}})}),n),d._debug("Scheduled remote call timeout",c,"in",n,"ms")),R[c.id]=u,ot(c)},this.remoteCallBinary=function(t,e,n,r,o,i){F(e)?(i=e,e=new ArrayBuffer(0),n=!0,r=void 0,o=D.maxNetworkDelay):F(n)?(i=n,n=!0,r=void 0,o=D.maxNetworkDelay):F(r)?(i=r,r=void 0,o=D.maxNetworkDelay):F(o)&&(i=o,o=D.maxNetworkDelay);var a={meta:r,data:e,last:n};this.remoteCall(t,a,o,{ext:{binary:{}}},i)},this.getStatus=function(){return g},this.isDisconnected=V,this.setBackoffIncrement=function(t){D.backoffIncrement=t},this.getBackoffIncrement=function(){return D.backoffIncrement},this.getBackoffPeriod=function(){return j},this.increaseBackoffPeriod=function(){return j<D.maxBackoff&&(j+=D.backoffIncrement),j},this.resetBackoffPeriod=function(){it()},this.setLogLevel=function(t){D.logLevel=t},this.registerExtension=function(t,e){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!M(t))throw"Illegal argument type: extension name must be a string";for(var n=!1,r=0;r<_.length;++r){var o=_[r];if(o.name===t){n=!0;break}}return n?(this._info("Could not register extension with name",t,"since another extension with the same name already exists"),!1):(_.push({name:t,extension:e}),this._debug("Registered extension",t),F(e.registered)&&e.registered(t,this),!0)},this.unregisterExtension=function(t){if(!M(t))throw"Illegal argument type: extension name must be a string";for(var e=!1,n=0;n<_.length;++n){var r=_[n];if(r.name===t){_.splice(n,1),e=!0,this._debug("Unregistered extension",t);var o=r.extension;F(o.unregistered)&&o.unregistered();break}}return e},this.getExtension=function(t){for(var e=0;e<_.length;++e){var n=_[e];if(n.name===t)return n.extension}return null},this.getName=function(){return m},this.getClientId=function(){return b},this.getURL=function(){if(i){var t=i.getURL();if(t)return t;if(t=D.urls[i.getType()])return t}return D.url},this.getTransport=function(){return i},this.getConfiguration=function(){return this._mixin(!0,{},D)},this.getAdvice=function(){return this._mixin(!0,{},A)},this.setTimeout=function(t,e){return l.setTimeout((function(){try{d._debug("Invoking timed function",t),t()}catch(e){d._debug("Exception invoking timed function",t,e)}}),e)},this.clearTimeout=function(t){l.clearTimeout(t)},window.WebSocket&&this.registerTransport("websocket",new u),this.registerTransport("long-polling",new a),this.registerTransport("callback-polling",new c)},Transport:o,RequestTransport:i,LongPollingTransport:a,CallbackPollingTransport:c,WebSocketTransport:u,Utils:n,Z85:{encode:function(t){var e=null;if(t instanceof ArrayBuffer?e=t:t.buffer instanceof ArrayBuffer?e=t.buffer:Array.isArray(t)&&(e=new Uint8Array(t).buffer),null==e)throw"Cannot Z85 encode "+t;for(var n=e.byteLength,r=n%4,o=4-(0===r?4:r),i=new DataView(e),a="",c=0,u=0;u<n+o;++u){var h=u>=n;if(c=256*c+(h?0:i.getUint8(u)),(u+1)%4==0){for(var p=52200625,f=5;f>0;--f){if(!h||f>o){var l=Math.floor(c/p)%85;a+=s[l]}p/=85}c=0}}return a},decode:function(t){for(var e=t.length%5,n=5-(0===e?5:e),r=0;r<n;++r)t+=s[s.length-1];for(var o=t.length,i=new ArrayBuffer(4*o/5-n),a=new DataView(i),c=0,u=0,p=0,f=0;f<o;++f){var l=t.charCodeAt(u++)-32;if(c=85*c+h[l],u%5==0){for(var d=16777216;d>=1;)p<a.byteLength&&a.setUint8(p++,Math.floor(c/d)%256),d/=256;c=0}}return i}}}}()},function(t,e,n){t.exports=n(18).AckExtension=function(){var t,e,n=!1;function r(e,n){t._debug(e,n)}this.registered=function(e,n){t=n,r("AckExtension: executing registration callback")},this.unregistered=function(){r("AckExtension: executing unregistration callback"),t=null},this.incoming=function(t){var o=t.channel,i=t.ext;if("/meta/handshake"===o){if(i){var a=i.ack;if("object"==typeof a){n=!0===a.enabled;var c=a.batch;"number"==typeof c&&(e=c)}else n=!0===a}r("AckExtension: server supports acknowledgements",n)}else"/meta/connect"===o&&t.successful&&n&&i&&"number"==typeof i.ack&&r("AckExtension: server sent batch",e=i.ack);return t},this.outgoing=function(o){var i=o.channel;return o.ext||(o.ext={}),"/meta/handshake"===i?(o.ext.ack=t&&!1!==t.ackEnabled,n=!1,e=0):"/meta/connect"===i&&n&&(o.ext.ack=e,r("AckExtension: client sending batch",e)),o}}},function(t,e,n){t.exports=n(18).ReloadExtension=function(t){var e,n,r={},o="org.cometd.reload",i=!1,a=!1;function c(t){if(r.handshakeResponse){a=!0;var i=e.getTransport();i&&i.abort(),u(t);var c=JSON.stringify(r);n("Reload extension saving state",c),window.sessionStorage.setItem(o,c)}}function u(t){t&&"string"==typeof t.name&&(o=t.name)}this.configure=u,this._receive=function(t){e.receive(t)},this.registered=function(t,r){(e=r).reload=c,n=e._debug},this.unregistered=function(){delete e.reload,e=null},this.outgoing=function(t){switch(t.channel){case"/meta/handshake":(r={}).url=e.getURL();var c=window.sessionStorage.getItem(o);if(n("Reload extension found state",c),c)try{var u=JSON.parse(c);if(window.sessionStorage.removeItem(o),u.handshakeResponse&&function(t){return r.url===t.url}(u)){n("Reload extension restoring state",u);var s=e._getCallback(t.id),h=this;return setTimeout((function(){n("Reload extension replaying handshake response",u.handshakeResponse),r.handshakeResponse=u.handshakeResponse,r.transportType=u.transportType,e._putCallback(t.id,s);var o=e._mixin(!0,{},r.handshakeResponse,{id:t.id,ext:{reload:!0}});o.supportedConnectionTypes=[r.transportType],h._receive(o),n("Reload extension replayed handshake response",o)}),0),i||(i=!0,e.startBatch()),null}n("Reload extension could not restore state",u)}catch(t){n("Reload extension error while trying to restore state",t)}break;case"/meta/connect":if(!0===a)return n("Reload extension aborting /meta/connect during reload"),null;r.transportType||(r.transportType=t.connectionType,n("Reload extension tracked transport type",r.transportType));break;case"/meta/disconnect":r={}}return t},this.incoming=function(t){if(t.successful)switch(t.channel){case"/meta/handshake":r.handshakeResponse||(r.handshakeResponse=t,n("Reload extension tracked handshake response",t));break;case"/meta/connect":i&&(i=!1,e.endBatch());break;case"/meta/disconnect":r={}}return t},u(t)}},function(t,e){var n=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:this);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=s(t),e=h(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[s(t)]},f.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},f.prototype.set=function(t,e){this.map[s(t)]=h(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var n,r,o=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),g.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];x.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,n){return new Promise((function(r,i){var a=new w(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function u(){c.abort()}c.onload=function(){var t,e,n={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;r(new x(o,n))},c.onerror=function(){i(new TypeError("Network request failed"))},c.ontimeout=function(){i(new TypeError("Network request failed"))},c.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},c.open(a.method,a.url,!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&o&&(c.responseType="blob"),a.headers.forEach((function(t,e){c.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",u)}),c.send(void 0===a._bodyInit?null:a._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=f,t.Request=w,t.Response=x),e.Headers=f,e.Request=w,e.Response=x,e.fetch=k}({})}(n),delete n.fetch.polyfill,(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e},function(t,e,n){t.exports=n(35)},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(14),o=n(26);function i(e,n,a){return o()?t.exports=i=Reflect.construct:t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}t.exports=i},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return N()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=u(t,e,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===s)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function h(){}function p(){}function f(){}var l={};l[o]=function(){return this};var d=Object.getPrototypeOf,m=d&&d(d(k([])));m&&m!==e&&n.call(m,o)&&(l=m);var y=f.prototype=h.prototype=Object.create(l);function v(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var h=s.arg,p=h.value;return p&&"object"==typeof p&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(p).then((function(t){h.value=t,a(h)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=y.constructor=f,f.constructor=p,f[a]=p.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),g.prototype[i]=function(){return this},t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),y[a]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(17);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return hr})),n.d(e,"SCOPE_BOUNDARY",(function(){return l})),n.d(e,"RITUAL",(function(){return d})),n.d(e,"PUSH_CATEGORY",(function(){return m})),n.d(e,"ROLE",(function(){return y})),n.d(e,"config",(function(){return rt})),n.d(e,"errorManager",(function(){return $n})),n.d(e,"Router",(function(){return sr})),n.d(e,"Channel",(function(){return Jn})),n.d(e,"accountAdapter",(function(){return r})),n.d(e,"authAdapter",(function(){return o})),n.d(e,"episodeAdapter",(function(){return i})),n.d(e,"groupAdapter",(function(){return a})),n.d(e,"presenceAdapter",(function(){return c})),n.d(e,"projectAdapter",(function(){return u})),n.d(e,"runAdapter",(function(){return s})),n.d(e,"vaultAdapter",(function(){return h})),n.d(e,"worldAdapter",(function(){return f}));var r={};n.r(r),n.d(r,"createAccount",(function(){return ft})),n.d(r,"updateAccount",(function(){return dt})),n.d(r,"removeAccount",(function(){return yt}));var o={};n.r(o),n.d(o,"logout",(function(){return gt})),n.d(o,"login",(function(){return bt})),n.d(o,"upgrade",(function(){return St})),n.d(o,"sso",(function(){return Nt})),n.d(o,"getSession",(function(){return jt})),n.d(o,"getLocalSession",(function(){return _t}));var i={};n.r(i),n.d(i,"create",(function(){return At})),n.d(i,"get",(function(){return Rt})),n.d(i,"query",(function(){return Ct})),n.d(i,"forGroup",(function(){return Lt})),n.d(i,"byName",(function(){return Dt})),n.d(i,"remove",(function(){return Mt}));var a={};n.r(a),n.d(a,"get",(function(){return Kt})),n.d(a,"destroy",(function(){return Ht})),n.d(a,"gather",(function(){return zt})),n.d(a,"update",(function(){return Gt})),n.d(a,"create",(function(){return Vt})),n.d(a,"search",(function(){return Yt})),n.d(a,"withGroupName",(function(){return Qt})),n.d(a,"forUserKey",(function(){return ee})),n.d(a,"getSessionGroups",(function(){return re})),n.d(a,"register",(function(){return ie})),n.d(a,"addUser",(function(){return ce})),n.d(a,"updateUser",(function(){return se})),n.d(a,"removeUser",(function(){return pe}));var c={};n.r(c),n.d(c,"connect",(function(){return le})),n.d(c,"forGroup",(function(){return me})),n.d(c,"forWorld",(function(){return ve}));var u={};n.r(u),n.d(u,"channelsEnabled",(function(){return we}));var s={};n.r(s),n.d(s,"create",(function(){return ke})),n.d(s,"clone",(function(){return Te})),n.d(s,"restore",(function(){return Pe})),n.d(s,"rewind",(function(){return Ae})),n.d(s,"update",(function(){return Re})),n.d(s,"remove",(function(){return Ce})),n.d(s,"get",(function(){return Le})),n.d(s,"query",(function(){return De})),n.d(s,"introspect",(function(){return Me})),n.d(s,"operation",(function(){return Ke})),n.d(s,"getVariables",(function(){return He})),n.d(s,"getVariable",(function(){return ze})),n.d(s,"updateVariables",(function(){return Ge})),n.d(s,"getMetadata",(function(){return Ve})),n.d(s,"updateMetadata",(function(){return Ye})),n.d(s,"action",(function(){return Qe})),n.d(s,"getWithStrategy",(function(){return rn})),n.d(s,"retrieveFromWorld",(function(){return an})),n.d(s,"removeFromWorld",(function(){return un}));var h={};n.r(h),n.d(h,"update",(function(){return hn})),n.d(h,"get",(function(){return fn})),n.d(h,"getWithScope",(function(){return dn})),n.d(h,"remove",(function(){return yn})),n.d(h,"create",(function(){return gn}));var p,f={};n.r(f),n.d(f,"update",(function(){return bn})),n.d(f,"destroy",(function(){return Sn})),n.d(f,"create",(function(){return Nn})),n.d(f,"get",(function(){return jn})),n.d(f,"selfAssign",(function(){return _n})),n.d(f,"assignUsers",(function(){return On})),n.d(f,"updateUsers",(function(){return En})),n.d(f,"getAssignments",(function(){return In})),n.d(f,"removeUsers",(function(){return Un})),n.d(f,"editPersonas",(function(){return Bn})),function(t){t.COOKIE="COOKIE",t.SESSION="SESSION"}(p||(p={}));var l={PROJECT:"PROJECT",GROUP:"GROUP",EPISODE:"EPISODE",WORLD:"WORLD"},d={NONE:"NONE",REANIMATE:"REANIMATE",EXORCISE:"EXORCISE"},m={CHAT:"CHAT",CONSENSUS:"CONSENSUS",CONTROL:"CONTROL",PRESENCE:"PRESENCE",LOBBY:"LOBBY",RUN:"RUN",VAULT:"VAULT",WORLD:"WORLD",SYSTEM:"SYSTEM"},y={SYSTEM:"system",MONITOR:"monitor",AUTHOR:"author",SUPPORT:"support",FACILITATOR:"facilitator",REVIEWER:"reviewer",USER:"user",LEADER:"leader",PARTICIPANT:"participant",ANONYMOUS:"anonymous"},v=new Function("try {return this===window;}catch(e){ return false;}"),g=new Function("try {return this===global;}catch(e){return false;}"),w=n(9),b=n.n(w),x=n(6),S=n.n(x),k=n(7),N=n.n(k),T=n(4),j=n.n(T),P=n(3),_=n.n(P),A=n(5),O=n.n(A),R=n(2),E=n.n(R),C=function(t){if(!t)return"";switch(t.constructor){case Number:return t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age=".concat(t);case String:return"; expires=".concat(t);case Date:return"; expires=".concat(t.toUTCString());default:return""}},I={getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null},setItem:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var r=n.path,o=n.domain,i=n.end,a=n.secure,c=n.samesite,u=C(i),s=o?"; domain=".concat(o):"",h=r?"; path=".concat(r):"",p=a?"; secure":"",f=c?"; samesite":"";return document.cookie="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e)).concat(u).concat(s).concat(h).concat(p).concat(f),!0},removeItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.hasItem(t))return!1;var n=e.path,r=e.domain,o=r?"; domain=".concat(r):"",i=n?"; path=".concat(n):"";return document.cookie="".concat(encodeURIComponent(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT").concat(o).concat(i),!0},hasItem:function(t){return!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&new RegExp("(?:^|;\\s*)".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)},clear:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]),this.removeItem(t[n]);return t}};function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t){return function(){var e,n=j()(t);if(B()){var r=j()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return N()(this,e)}}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var M=function(){function t(e){_()(this,t),E()(this,"_store",void 0),this._store=e}return O()(t,[{key:"clear",value:function(){this._store.clear()}},{key:"store",get:function(){return this._store},set:function(t){this._store=t}}]),t}(),F=new Map,K=function(t){S()(n,t);var e=D(n);function n(){return _()(this,n),e.call(this,F)}return O()(n,[{key:"getItem",value:function(t){return b()(j()(n.prototype),"store",this).get(t)}},{key:"setItem",value:function(t,e){return b()(j()(n.prototype),"store",this).set(t,e)}},{key:"removeItem",value:function(t){return b()(j()(n.prototype),"store",this).delete(t)}}]),n}(M),q=function(t){S()(n,t);var e=D(n);function n(){return _()(this,n),e.call(this,window.sessionStorage)}return O()(n,[{key:"getItem",value:function(t){return JSON.parse(b()(j()(n.prototype),"store",this).getItem(t))}},{key:"setItem",value:function(t,e){return b()(j()(n.prototype),"store",this).setItem(t,JSON.stringify(e))}},{key:"removeItem",value:function(t){return b()(j()(n.prototype),"store",this).removeItem(t)}}]),n}(M),H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_()(this,t),E()(this,"options",{});var n={domain:".".concat(window.location.hostname),path:"/"};this.options=U({},n,{},e)}return O()(t,[{key:"getItem",value:function(t){var e=I.getItem(t);return e?JSON.parse(e):null}},{key:"setItem",value:function(t,e){return I.setItem(t,JSON.stringify(e),this.options)}},{key:"removeItem",value:function(t){return I.removeItem(t,this.options)}},{key:"clear",value:function(){return I.clear()}}]),t}(),W=n(10),z=n.n(W);function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var G=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(X()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return N()(this,t)});function r(t){return _()(this,r),n.call(this,t)}return r}(z()(Error)),J=n(12),V=n.n(J),$=n(11),Y=n.n($);function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Q=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(Z()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return N()(this,t)});function r(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_()(this,r),e=n.call(this),E()(Y()(e),"status",void 0),E()(Y()(e),"code",void 0),E()(Y()(e),"information",void 0),E()(Y()(e),"cause",void 0);var i=o.status,a=t.information,c=t.message,u=t.cause;if(e.status=i,e.message=c,a){var s=a.code,h=V()(a,["code"]);e.code=s,e.information=h}return u&&(e.cause=new r(u)),e}return r}(z()(Error)),tt=function t(e,n){_()(this,t);var r=n.status,o=n.headers;this.status=r,this.headers=o,this.body=e},et=n(8),nt=n.n(et),rt=new(function(){function t(){if(_()(this,t),E()(this,"_apiVersion",3),E()(this,"_apiProtocol",""),E()(this,"_apiHost",""),E()(this,"_accountShortName",""),E()(this,"_projectShortName",""),v())this.loadBrowser();else{if(!g())throw new G("Could not identify environment; no configuration was setup");this.loadNode()}}return O()(t,[{key:"isLocal",value:function(){if(!v())return!1;var t=window.location.host;return"127.0.0.1"===t||0===t.indexOf("local.")||-1!==t.indexOf("ngrok")||0===t.indexOf("localhost")}},{key:"loadNode",value:function(){this.apiProtocol="https",this.apiHost="test.forio.com"}},{key:"loadBrowser",value:function(){var t=this.isLocal(),e=window.location,n=e.protocol,r=e.pathname,o=e.host;this.apiProtocol=t?"https":n,this.apiHost=t?"forio.com":o;var i=r.match(/\/app\/([\w-]+)\/([\w-]+)/);if(i){var a=i.slice(1),c=nt()(a,2),u=c[0],s=c[1];this.accountShortName=u,this.projectShortName=s}}},{key:"apiProtocol",get:function(){return this._apiProtocol},set:function(t){t.startsWith("http")&&(t.endsWith(":")&&(t=t.slice(0,-1)),this._apiProtocol=t)}},{key:"apiHost",get:function(){return this._apiHost},set:function(t){this._apiHost=t}},{key:"apiVersion",get:function(){return this._apiVersion},set:function(t){}},{key:"accountShortName",get:function(){return this._accountShortName},set:function(t){this._accountShortName=t}},{key:"projectShortName",get:function(){return this._projectShortName},set:function(t){this._projectShortName=t}}]),t}()),ot=p.COOKIE,it=p.SESSION,at="com.forio.epicenter.session",ct=new(function(){function t(e){if(_()(this,t),E()(this,"type",void 0),e!==ot&&e!==it)throw new G('Invalid Storage Type: "'.concat(e,'", please use "').concat(ot,'" or "').concat(it,'".'));this.type=e,this.consumeSSO()}return O()(t,[{key:"getStore",value:function(){if(g())return K;switch(this.type){case it:return q;case ot:default:return H}}},{key:"getSessionPath",value:function(t){var e=t||this.session;if(!e||g())return"";var n=e.accountShortName,r=e.projectShortName,o=e.objectType,i=rt.isLocal(),a=!i&&"app"!==window.location.pathname.split("/")[1];return"user"===o&&n&&r&&(!i&&!a)?"/app/".concat(n,"/").concat(r):"/"}},{key:"consumeSSO",value:function(){if(!g()){var t=JSON.parse(JSON.parse('"'.concat(I.getItem("epicenter.v3.sso"),'"')));if(t){var e=t.accountShortName,n=t.projectShortName;this.session=t,I.removeItem("epicenter.v3.sso",{domain:".".concat(window.location.hostname),path:"/app/".concat(e,"/").concat(n)})}}}},{key:"session",get:function(){return(new(this.getStore())).getItem(at)},set:function(t){var e=this.getStore(),n=this.getSessionPath(t);t?new e({path:n}).setItem(at,t):this.session&&new e({path:n}).removeItem(at)}}]),t}())(ot),ut=n(0),st=n.n(ut),ht=n(1),pt=n.n(ht);function ft(){return lt.apply(this,arguments)}function lt(){return(lt=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:{},n=e.objectType,r=void 0===n?"personal":n,o=e.name,i=e.shortName,a=e.adminKey,c=e.subscriptionPlan,u=e.billingInterval,t.next=4,(new sr).post("/account",{body:{objectType:r,name:o,shortName:i,adminKey:a,subscriptionPlan:c,billingInterval:u}}).then((function(t){return t.body}));case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(){return mt.apply(this,arguments)}function mt(){return(mt=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:{},n=e.objectType,r=void 0===n?"personal":n,o=e.name,i=e.shortName,a=e.adminKey,c=e.subscriptionPlan,u=e.billingInterval,t.next=4,(new sr).patch("/account",{body:{objectType:r,name:o,shortName:i,adminKey:a,subscriptionPlan:c,billingInterval:u}}).then((function(t){return t.body}));case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yt(t){return vt.apply(this,arguments)}function vt(){return(vt=pt()(st.a.mark((function t(e){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new sr).withAccountShortName(e).delete("/account").then((function(t){return t.body}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(){return wt.apply(this,arguments)}function wt(){return(wt=pt()(st.a.mark((function t(){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct.session=void 0,t.next=3,Gn.disconnect();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t){return xt.apply(this,arguments)}function xt(){return(xt=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.handle,r=e.password,o=e.groupKey,i=e.objectType,a=void 0===i?"user":i,c=V()(e,["handle","password","groupKey","objectType"]),u=c.accountShortName,s=c.projectShortName,console.log("%c logging in!","font-size: 20px; color: #FB15B9FF;"),t.next=5,(new sr).withAccountShortName(u).withProjectShortName(s).post("/authentication",{body:{objectType:a,handle:n,password:r,groupKey:o||void 0},includeAuthorization:!1,inert:!0}).then((function(t){return t.body}));case 5:return h=t.sent,t.next=8,gt();case 8:return ct.session=h,t.abrupt("return",h);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function St(t,e){return kt.apply(this,arguments)}function kt(){return(kt=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.objectType,o=void 0===r?"user":r,i=n.inert,a=V()(n,["objectType","inert"]),c=a.accountShortName,u=a.projectShortName,t.next=4,(new sr).withAccountShortName(c).withProjectShortName(u).patch("/authentication",{body:{objectType:o,groupKey:e},inert:i}).then((function(t){return t.body}));case 4:return s=t.sent,t.next=7,gt();case 7:return ct.session=s,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(t){return Tt.apply(this,arguments)}function Tt(){return(Tt=pt()(st.a.mark((function t(e){var n,r,o;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.accountShortName,r=e.projectShortName,t.next=3,(new sr).withAccountShortName(n).withProjectShortName(r).get("/registration/sso").then((function(t){return t.body}));case 3:return o=t.sent,ct.session=o,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=pt()(st.a.mark((function t(){var e,n;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new sr).get("/authentication");case 2:return e=t.sent,n=e.body,ct.session=n,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(){return ct.session}function At(t,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.draft,c=r.runLimit,t.next=4,(new sr).withAccountShortName(o).withProjectShortName(i).post("/episode/".concat(n),{body:{name:e,draft:a,runLimit:c}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t){return Et.apply(this,arguments)}function Et(){return(Et=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/episode/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ct(){return It.apply(this,arguments)}function It(){return(It=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c,u,s,h,p,f=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.length>0&&void 0!==f[0]?f[0]:{},n=e.accountShortName,r=e.projectShortName,o=e.filter,i=void 0===o?[]:o,a=e.sort,c=void 0===a?[]:a,u=e.first,s=void 0===u?0:u,h=e.max,p=void 0===h?100:h,t.next=4,(new sr).withAccountShortName(n).withProjectShortName(r).withSearchParams({filter:i.join(";"),sort:c.join(";"),first:s,max:p}).get("/episode/search").then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lt(t){return Ut.apply(this,arguments)}function Ut(){return(Ut=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/episode/in/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dt(t,e){return Bt.apply(this,arguments)}function Bt(){return(Bt=pt()(st.a.mark((function t(e,n){var r,o,i,a=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},o=r.accountShortName,i=r.projectShortName,t.next=4,(new sr).withAccountShortName(o).withProjectShortName(i).get("/episode/with/".concat(e,"/").concat(n)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mt(t){return Ft.apply(this,arguments)}function Ft(){return(Ft=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).delete("/episode/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kt(t){return qt.apply(this,arguments)}function qt(){return(qt=pt()(st.a.mark((function t(e){var n,r,o,i,a,c=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.augment,a="","MEMBERS"===i&&(a="/member"),"QUANTIZED"===i&&(a="/quantized"),t.next=7,(new sr).withAccountShortName(r).withProjectShortName(o).get("/group".concat(a,"/").concat(e)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ht(t){return Wt.apply(this,arguments)}function Wt(){return(Wt=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).delete("/group/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zt(){return Xt.apply(this,arguments)}function Xt(){return(Xt=pt()(st.a.mark((function t(){var e,n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.accountShortName,r=e.projectShortName,o=e.expired,t.next=4,(new sr).withAccountShortName(n).withProjectShortName(r).withSearchParams({expired:o}).get("/group").then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Gt(t,e){return Jt.apply(this,arguments)}function Jt(){return(Jt=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l,d,m,y=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:{},o=n.runLimit,i=n.organization,a=n.allowSelfRegistration,c=n.flightRecorder,u=n.event,s=n.allowMembershipChanges,h=n.pricing,p=n.startDate,f=n.expirationDate,l=n.capacity,d=r.accountShortName,m=r.projectShortName,t.next=5,(new sr).withAccountShortName(d).withProjectShortName(m).patch("/group/".concat(e),{body:{runLimit:o,organization:i,allowSelfRegistration:a,flightRecorder:c,event:u,allowMembershipChanges:s,pricing:h,startDate:p,expirationDate:f,capacity:l}}).then((function(t){return t.body}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vt(t){return $t.apply(this,arguments)}function $t(){return($t=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h,p,f,l,d,m,y=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},r=e.name,o=e.runLimit,i=e.organization,a=e.allowSelfRegistration,c=e.flightRecorder,u=e.event,s=e.allowMembershipChanges,h=e.pricing,p=e.startDate,f=e.expirationDate,l=e.capacity,d=n.accountShortName,m=n.projectShortName,r){t.next=5;break}throw new G("Cannot create a group with no name");case 5:return t.next=7,(new sr).withAccountShortName(d).withProjectShortName(m).post("/group",{body:{name:r,runLimit:o,organization:i,allowSelfRegistration:a,flightRecorder:c,event:u,allowMembershipChanges:s,pricing:h,startDate:p,expirationDate:f,capacity:l}}).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yt(){return Zt.apply(this,arguments)}function Zt(){return(Zt=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c,u,s,h,p,f=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.length>0&&void 0!==f[0]?f[0]:{},n=e.filter,r=void 0===n?[]:n,o=e.sort,i=void 0===o?[]:o,a=e.first,c=e.max,u=e.quantized,s=e.accountShortName,h=e.projectShortName,p={filter:r.join(";")||void 0,sort:i.join(";")||void 0,first:a,max:c},t.next=5,(new sr).withAccountShortName(s).withProjectShortName(h).withSearchParams(p).get("/group".concat(u?"/quantized":"","/search"),{paginated:!0}).then((function(t){return t.body}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t){return te.apply(this,arguments)}function te(){return(te=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/group/with/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ee(t){return ne.apply(this,arguments)}function ne(){return(ne=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h,p=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},r=n.expired,o=n.all,i=n.role,a=n.accountShortName,c=n.projectShortName,u=Array.isArray(i)&&i.length>0,s=u?i:[i],h={expired:r,all:o,role:i?s:void 0},t.next=7,(new sr).withAccountShortName(a).withProjectShortName(c).withSearchParams(h).get("/group/member/for/".concat(e)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function re(){return oe.apply(this,arguments)}function oe(){return(oe=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.expired,r=e.role,o=e.accountShortName,i=e.projectShortName,a=Array.isArray(r)&&r.length>0,c=a?r:[r],u={expired:n,role:r?c:void 0},t.next=7,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(u).get("/group/member").then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(t){return ae.apply(this,arguments)}function ae(){return(ae=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).post("/group/selfRegistration/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ce(t,e){return ue.apply(this,arguments)}function ue(){return(ue=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.role,i=r.available,a=r.accountShortName,c=r.projectShortName,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).post("/group/member/".concat(e),{body:{objectType:"group",userKey:n,role:null!=o?o:y.PARTICIPANT,available:null==i||i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(t,e){return he.apply(this,arguments)}function he(){return(he=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.role,i=r.available,a=r.accountShortName,c=r.projectShortName,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).patch("/group/member/".concat(e,"/").concat(n),{body:{objectType:"group",role:o,available:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pe(t,e){return fe.apply(this,arguments)}function fe(){return(fe=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},o=r.accountShortName,i=r.projectShortName,a=Array.isArray(n)&&n.length>1,c=a?"":"/".concat(1===n.length?n[0]:n),u=a?{userKey:n}:void 0,t.next=7,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(u).delete("/group/member/".concat(e).concat(c)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function le(){return de.apply(this,arguments)}function de(){return(de=pt()(st.a.mark((function t(){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Gn.handshake());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function me(t){return ye.apply(this,arguments)}function ye(){return(ye=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/presence/group/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ve(t){return ge.apply(this,arguments)}function ge(){return(ge=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/presence/world/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function we(){return be.apply(this,arguments)}function be(){return(be=pt()(st.a.mark((function t(){var e,n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.accountShortName,r=e.projectShortName,t.next=4,(new sr).withAccountShortName(n).withProjectShortName(r).get("/project/channel/isEnabled").then((function(t){return t.body}));case 4:return o=t.sent,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ke(t,e){return Ne.apply(this,arguments)}function Ne(){return(Ne=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,d,m,v,g,w,b,x=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.readLock,c=r.writeLock,u=r.userKey,s=r.ephemeral,h=r.trackingKey,p=r.modelContext,f=r.executionContext,d=r.accountShortName,m=r.projectShortName,v=l.WORLD,g=y.PARTICIPANT,w=y.USER,b=o===v?g:w,t.next=8,(new sr).withAccountShortName(d).withProjectShortName(m).post("/run",{body:{scope:{scopeBoundary:o,scopeKey:i,userKey:o===v?void 0:null!=u?u:ct.session.userKey},permit:{readLock:a||b,writeLock:c||b},morphology:"MANY",trackingKey:h,modelFile:e,modelContext:p||{},executionContext:f||{},ephemeral:s}}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Te(t){return je.apply(this,arguments)}function je(){return(je=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h,p=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.ephemeral,a=n.trackingKey,c=n.modelContext,u=void 0===c?{}:c,s=n.executionContext,h=void 0===s?{}:s,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).post("/run/clone/".concat(e),{body:{trackingKey:a,modelContext:u,executionContext:h,ephemeral:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pe(t){return _e.apply(this,arguments)}function _e(){return(_e=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.ephemeral,a=n.modelContext,c=void 0===a?{}:a,u=n.executionContext,s=void 0===u?{}:u,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).post("/run/restore/".concat(e),{body:{modelContext:c,executionContext:s,ephemeral:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ae(t,e){return Oe.apply(this,arguments)}function Oe(){return(Oe=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.ephemeral,c=r.modelContext,u=void 0===c?{}:c,t.next=4,(new sr).withAccountShortName(o).withProjectShortName(i).post("/run/rewind/".concat(e),{body:{rewindCount:n,modelContext:u,ephemeral:a}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Re(t,e){return Ee.apply(this,arguments)}function Ee(){return(Ee=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l,d=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},o=n.readLock,i=n.writeLock,a=n.trackingKey,c=n.marked,u=n.hidden,s=n.closed,h=r.accountShortName,p=r.projectShortName,f=Array.isArray(e)&&e.length>1,l=f?"":"/".concat(1===e.length?e[0]:e),t.next=7,(new sr).withAccountShortName(h).withProjectShortName(p).withSearchParams(f?{runKey:e}:"").patch("/run".concat(l),{body:{readLock:o,writeLock:i,trackingKey:a,marked:c,hidden:u,closed:s}}).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ce(t){return Ie.apply(this,arguments)}function Ie(){return(Ie=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).delete("/run/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Le(t){return Ue.apply(this,arguments)}function Ue(){return(Ue=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/run/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function De(t,e){return Be.apply(this,arguments)}function Be(){return(Be=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l,d,m,y,v,g,w,b=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.filter,c=void 0===a?[]:a,u=r.sort,s=void 0===u?[]:u,h=r.first,p=r.max,f=r.timeout,l=r.variables,d=void 0===l?[]:l,m=r.metadata,y=void 0===m?[]:m,v=r.accountShortName,g=r.projectShortName,w={filter:c.join(";")||void 0,sort:s.join(";")||void 0,var:d.join(";")||void 0,meta:y.join(";")||void 0,first:h,max:p,timeout:f},t.next=6,(new sr).withAccountShortName(v).withProjectShortName(g).withSearchParams(w).get("/run/".concat(o,"/").concat(i,"/").concat(e),{paginated:!0,parsePage:function(t){return t.map((function(t){return t.variables=d.reduce((function(t,e,n){return t[e]=d[n],t}),{}),t}))}}).then((function(t){return t.body}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Me(t){return Fe.apply(this,arguments)}function Fe(){return(Fe=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/run/introspect/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ke(t,e){return qe.apply(this,arguments)}function qe(){return(qe=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:[],o=f.length>3&&void 0!==f[3]?f[3]:{},i=o.accountShortName,a=o.projectShortName,c=o.timeout,u=o.ritual,s=Array.isArray(e)&&e.length>1,h=s?"":"/".concat(1===e.length?e[0]:e),p=s?{runKey:e,timeout:c}:{ritual:u,timeout:c},u!==d.EXORCISE&&s&&console.warn("Detected ritual: ".concat(u," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=9,(new sr).withAccountShortName(i).withProjectShortName(a).withSearchParams(p).post("/run/operation".concat(h),{body:{name:n,arguments:r,objectType:"execute"}}).then((function(t){return t.body}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function He(t,e){return We.apply(this,arguments)}function We(){return(We=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,u=n.join(";"),s=Array.isArray(e)&&e.length>1,h=s?"":"/".concat(1===e.length?e[0]:e),p=s?{runKey:e,timeout:a,include:u}:{ritual:c,timeout:a,include:u},c!==d.EXORCISE&&s&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),f=function(t){return n.reduce((function(e,n,r){return e[n]=t[r],e}),{})},t.next=10,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(p).get("/run/variable".concat(h)).then((function(t){var e=t.body;return s?Object.keys(e).map((function(t){return{runKey:t,variables:f(e[t])}})):f(e)}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ze(t,e){return Xe.apply(this,arguments)}function Xe(){return(Xe=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,!Array.isArray(e)&&!Array.isArray(n)){t.next=5;break}return u=Array.isArray(n)?n:[n],t.abrupt("return",He(e,u,r));case 5:return t.next=7,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams({timeout:a,ritual:c}).get("/run/variable/".concat(e,"/").concat(n)).then((function(t){return t.body}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ge(t,e){return Je.apply(this,arguments)}function Je(){return(Je=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,u=Array.isArray(e)&&e.length>1,s=u?"":"/".concat(1===e.length?e[0]:e),h=u?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==d.EXORCISE&&u&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).patch("/run/variable".concat(s),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ve(t,e){return $e.apply(this,arguments)}function $e(){return($e=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,u=n.join(";"),s=Array.isArray(e)&&e.length>1,h=s?"":"/".concat(1===e.length?e[0]:e),p=s?{runKey:e,timeout:a,include:u}:{ritual:c,timeout:a,include:u},c!==d.EXORCISE&&s&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=9,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(p).get("/run/meta".concat(h)).then((function(t){return t.body}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ye(t,e){return Ze.apply(this,arguments)}function Ze(){return(Ze=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,u=Array.isArray(e)&&e.length>1,s=u?"":"/".concat(1===e.length?e[0]:e),h=u?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==d.EXORCISE&&u&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).patch("/run/meta".concat(s),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qe(t,e){return tn.apply(this,arguments)}function tn(){return(tn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},o=r.accountShortName,i=r.projectShortName,a=r.timeout,c=r.ritual,u=Array.isArray(e)&&e.length>1,s=u?"":"/".concat(1===e.length?e[0]:e),h=u?{runKey:e,timeout:a}:{ritual:c,timeout:a},c!==d.EXORCISE&&u&&console.warn("Detected ritual: ".concat(c," usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE")),t.next=8,(new sr).withAccountShortName(o).withProjectShortName(i).withSearchParams(h).post("/run/action".concat(s),{body:n}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function en(t,e){return nn.apply(this,arguments)}function nn(){return(nn=pt()(st.a.mark((function t(e,n){var r,o=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.length>2&&void 0!==o[2]?o[2]:{},r=n.map((function(t){return{name:"string"==typeof t?t:t.name,params:t.params}})),t.abrupt("return",r.reduce((function(t,n){var r=n.name,o=n.params;return t.then((function(){return Ke(e,r,o,{})}))}),Promise.resolve()));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rn(t,e,n){return on.apply(this,arguments)}function on(){return(on=pt()(st.a.mark((function t(e,n,r){var o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=h.length>3&&void 0!==h[3]?h[3]:{},i=o.initOperations,a=void 0===i?[]:i,"reuse-across-sessions"!==e){t.next=16;break}return t.next=5,De(n,r,Se({},o,{sort:["-created"]}));case 5:if(!(c=t.sent).length){t.next=8;break}return t.abrupt("return",c[0]);case 8:return t.next=10,ke(n,r,o={});case 10:return u=t.sent,t.next=13,en(u.runKey,a,o={});case 13:return t.abrupt("return",u);case 16:if("reuse-never"!==e){t.next=25;break}return t.next=19,ke(n,r,o={});case 19:return s=t.sent,t.next=22,en(s.runKey,a,o={});case 22:return t.abrupt("return",s);case 25:case 26:throw new G("Invalid run strategy.");case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function an(t,e){return cn.apply(this,arguments)}function cn(){return(cn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},o=r.readLock,i=r.writeLock,a=r.ephemeral,c=r.trackingKey,u=r.modelContext,s=r.executionContext,h=r.accountShortName,p=r.projectShortName,f=y.PARTICIPANT,t.next=5,(new sr).withAccountShortName(h).withProjectShortName(p).post("/run/world/".concat(e),{body:{permit:{readLock:o||f,writeLock:i||f},morphology:"MANY",trackingKey:c,modelFile:n,modelContext:u||{},executionContext:s||{},ephemeral:a}}).then((function(t){return t.body}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function un(t){return sn.apply(this,arguments)}function sn(){return(sn=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).delete("/run/world/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function hn(t,e){return pn.apply(this,arguments)}function pn(){return(pn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},a=i.accountShortName,c=i.projectShortName,u=i.mutationKey,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).withSearchParams({MutationKey:u}).patch("/vault/".concat(e),{body:{set:null!==(r=n.set)&&void 0!==r?r:{},push:null!==(o=n.push)&&void 0!==o?o:{}}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fn(t){return ln.apply(this,arguments)}function ln(){return(ln=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/vault/".concat(e)).catch((function(t){return 404===t.status?{body:void 0}:Promise.reject(t)})).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dn(t,e){return mn.apply(this,arguments)}function mn(){return(mn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.accountShortName,c=r.projectShortName,u=r.userKey?"/".concat(r.userKey):"",t.next=6,(new sr).withAccountShortName(a).withProjectShortName(c).get("/vault/with/".concat(o,"/").concat(i).concat(u,"/").concat(e)).catch((function(t){return 404===t.status?{body:void 0}:Promise.reject(t)})).then((function(t){return t.body}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yn(t){return vn.apply(this,arguments)}function vn(){return(vn=pt()(st.a.mark((function t(e){var n,r,o,i,a=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=n.accountShortName,o=n.projectShortName,i=n.mutationKey,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).withSearchParams({MutationKey:i}).delete("/vault/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gn(t,e,n){return wn.apply(this,arguments)}function wn(){return(wn=pt()(st.a.mark((function t(e,n,r){var o,i,a,c,u,s,h,p,f,d,m,v,g,w,b=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=b.length>3&&void 0!==b[3]?b[3]:{},i=n.scopeBoundary,a=n.scopeKey,c=o.readLock,u=o.writeLock,s=o.userKey,h=o.ttlSeconds,p=o.mutationKey,f=o.accountShortName,d=o.projectShortName,m=l.WORLD,v=y.PARTICIPANT,g=y.USER,w=i===m?v:g,t.next=8,(new sr).withAccountShortName(f).withProjectShortName(d).post("/vault/".concat(e),{body:{scope:{scopeBoundary:i,scopeKey:a,userKey:i===m?void 0:s},permit:{readLock:c||w,writeLock:u||w},ttlSeconds:h,mutationKey:p,items:r}}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bn(t,e){return xn.apply(this,arguments)}function xn(){return(xn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=n.name,i=n.runKey,a=r.accountShortName,c=r.projectShortName,t.next=5,(new sr).withAccountShortName(a).withProjectShortName(c).patch("/world/".concat(e),{body:{name:o,runKey:i}}).then((function(t){return t.body}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Sn(t){return kn.apply(this,arguments)}function kn(){return(kn=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).delete("/world/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nn(t){return Tn.apply(this,arguments)}function Tn(){return(Tn=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},o=r.groupName,i=r.episodeName,a=r.accountShortName,c=r.projectShortName,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).post("/world/".concat(null!=o?o:null===(n=ct.session)||void 0===n?void 0:n.groupName).concat(i?"/".concat(i):""),{body:e}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jn(){return Pn.apply(this,arguments)}function Pn(){return(Pn=pt()(st.a.mark((function t(){var e,n,r,o,i,a,c=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:{},r=n.groupName,o=n.episodeName,i=n.accountShortName,a=n.projectShortName,t.next=4,(new sr).withAccountShortName(i).withProjectShortName(a).get("/world/".concat(null!=r?r:null===(e=ct.session)||void 0===e?void 0:e.groupName).concat(o?"/".concat(o):"")).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _n(t){return An.apply(this,arguments)}function An(){return(An=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},o=r.groupName,i=r.episodeName,a=r.exceedMinimums,c=r.accountShortName,u=r.projectShortName,t.next=4,(new sr).withAccountShortName(c).withProjectShortName(u).post("/world/selfassign/".concat(null!=o?o:null===(n=ct.session)||void 0===n?void 0:n.groupName).concat(i?"/".concat(i):""),{body:{role:e,exceedMinimums:a}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function On(t){return Rn.apply(this,arguments)}function Rn(){return(Rn=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},o=r.groupName,i=r.episodeName,a=r.exceedMinimums,c=r.requireAllAssignments,u=r.accountShortName,s=r.projectShortName,t.next=4,(new sr).withAccountShortName(u).withProjectShortName(s).post("/world/assignment/".concat(null!=o?o:null===(n=ct.session)||void 0===n?void 0:n.groupName).concat(i?"/".concat(i):""),{body:{assignments:e,exceedMinimums:a,requireAllAssignments:c}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function En(t,e){return Cn.apply(this,arguments)}function Cn(){return(Cn=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.exceedMinimums,i=r.requireAllAssignments,a=r.accountShortName,c=r.projectShortName,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).put("/world/assignment/".concat(e),{body:{assignments:n,exceedMinimums:o,requireAllAssignments:i}}).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function In(t){return Ln.apply(this,arguments)}function Ln(){return(Ln=pt()(st.a.mark((function t(e){var n,r,o,i=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.accountShortName,o=n.projectShortName,t.next=4,(new sr).withAccountShortName(r).withProjectShortName(o).get("/world/assignment/".concat(e)).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Un(t){return Dn.apply(this,arguments)}function Dn(){return(Dn=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},o=r.groupName,i=r.episodeName,a=r.accountShortName,c=r.projectShortName,t.next=4,(new sr).withAccountShortName(a).withProjectShortName(c).withSearchParams({userKey:e}).get("/world/assignment/".concat(null!=o?o:null===(n=ct.session)||void 0===n?void 0:n.groupName).concat(i?"/".concat(i):"")).then((function(t){return t.body}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bn(t){return Mn.apply(this,arguments)}function Mn(){return(Mn=pt()(st.a.mark((function t(e){var n,r,o,i,a,c,u,s,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},r=h.length>2&&void 0!==h[2]?h[2]:{},o=n.scopeBoundary,i=n.scopeKey,a=r.accountShortName,c=r.projectShortName,u=o||l.PROJECT,s=u===l.PROJECT?"":"/".concat(i),t.next=8,(new sr).withAccountShortName(a).withProjectShortName(c).put("/world/persona/".concat(u.toLowerCase()).concat(s),{body:e}).then((function(t){return t.body}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Fn=n(19),Kn=n.n(Fn),qn=n(20),Hn=n.n(qn);function Wn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var zn="com.forio.epicenter.token",Xn=function(t){S()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(Wn()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return N()(this,t)});function r(t){var e;_()(this,r),e=n.call(this);var o=t.error,i=t.successful;return o&&o.includes("403")&&!i&&(e.status=401),e.information=t,e.message=o,e}return r}(z()(Error)),Gn=new(function(){function t(){_()(this,t),E()(this,"url",void 0),E()(this,"customCometd",void 0),E()(this,"defaultCometd",void 0),E()(this,"initialization",void 0),E()(this,"subscriptions",new Map),E()(this,"state","disconnected"),E()(this,"requireAcknowledgement",!0)}var e,r,o,i,a,c,u,s,h;return O()(t,[{key:"startup",value:(h=pt()(st.a.mark((function t(){var e,r,o,i,a,c=this,u=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{logLevel:"error"},t.next=3,we();case 3:if(t.sent){t.next=6;break}throw new G("Push Channels are not enabled on this project");case 6:if(!v()){t.next=11;break}return t.next=9,Promise.resolve().then(n.t.bind(null,18,7));case 9:r=t.sent,this.defaultCometd=new r.CometD;case 11:o=rt.apiProtocol,i=rt.apiHost,a=rt.apiVersion,this.url="".concat(o,"://").concat(i,"/push/v").concat(a,"/cometd"),this.cometd.registerExtension("ack",new Kn.a),this.cometd.registerExtension("reload",new Hn.a),this.cometd.configure({url:this.url,logLevel:e.logLevel}),v()&&(window.onunload=function(){"connected"===c.cometd.getStatus()&&(c.cometd.reload(),c.cometd.getTransport().abort())});case 17:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"reinit",value:(s=pt()(st.a.mark((function t(e,n){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.disconnect();case 2:return this.initialization=void 0,this.customCometd=e,t.abrupt("return",this.init(n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"init",value:(u=pt()(st.a.mark((function t(e){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initialization||(this.initialization=this.startup(e)),t.abrupt("return",this.initialization);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"handshake",value:(c=pt()(st.a.mark((function t(){var e,n,r,o,i=this,a=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,this.init();case 3:if("disconnected"===this.cometd.getStatus()){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return n={},(r=ct.session)&&(n.ext=(o={},E()(o,zn,r.token),E()(o,"ack",this.requireAcknowledgement),o)),this.cometd.ackEnabled=this.requireAcknowledgement,this.cometd.websocketEnabled=!0,t.abrupt("return",new Promise((function(t,r){return i.cometd.handshake(n,(function(n){if(n.successful)t(n);else{var o=new Xn(n);if(e.inert)r(o);else try{var a=$n.handle(o,(function(){return i.handshake({inert:!0})}));t(a)}catch(t){r(t)}}}))})));case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"disconnect",value:(a=pt()(st.a.mark((function t(){var e=this;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.cometd){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.next=4,this.init();case 4:return t.next=6,this.empty();case 6:if("connected"===this.cometd.getStatus()){t.next=8;break}return t.abrupt("return",Promise.resolve());case 8:return t.abrupt("return",new Promise((function(t,n){return e.cometd.disconnect((function(e){e.successful?t():n(new G("Unable to disconnect from CometD server"))}))})));case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"add",value:(i=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s=this,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:{},t.next=3,this.init();case 3:if(o=[].concat(e),"connected"===this.cometd.getStatus()){t.next=7;break}return t.next=7,this.handshake();case 7:return i={},(a=ct.session)&&(i.ext=E()({},zn,a.token)),c=function(t){t.channel;var e=t.data;return e="string"==typeof e?JSON.parse(e):e,n(e)},u=[],this.cometd.batch((function(){return o.forEach((function(t){var o=t.path;return u.push(new Promise((function(t,a){var u=s.cometd.subscribe(o,c,i,(function(o){if(o.successful)return s.subscriptions.set(u.channel,u),void t(u);var i=new Xn(o);if(r.inert)a(i);else try{var c=$n.handle(i,(function(){return s.add(e,n,{inert:!0})}));t(c)}catch(t){a(t)}}))})))}))})),t.abrupt("return",1===u.length?Promise.all(u).then((function(t){return nt()(t,1)[0]})):Promise.all(u));case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"publish",value:(o=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u=this,s=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,this.init();case 3:if(o=[].concat(e),"connected"===this.cometd.getStatus()){t.next=7;break}return t.next=7,this.handshake();case 7:return i={},(a=ct.session)&&(i.ext=E()({},zn,a.token)),c=[],this.cometd.batch((function(){return o.forEach((function(t){var o=t.path;return c.push(new Promise((function(t,a){u.cometd.publish(o,n,i,(function(o){if(o.successful)t(o);else{var i=new Xn(o);if(r.inert)a(i);else try{var c=$n.handle(i,(function(){return u.publish(e,n,{inert:!0})}));t(c)}catch(t){a(t)}}}))})))}))})),t.abrupt("return",1===c.length?Promise.all(c).then((function(t){return nt()(t,1)[0]})):Promise.all(c));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"remove",value:(r=pt()(st.a.mark((function t(e){var n=this;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return this.subscriptions.delete(e.channel),t.abrupt("return",new Promise((function(t,r){return n.cometd.unsubscribe(e,(function(e){e.successful&&t(e);var n=new Xn(e);r(n)}))})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"empty",value:(e=pt()(st.a.mark((function t(){var e,n=this;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return e=[],this.cometd.batch((function(){return n.subscriptions.forEach((function(t){e.push(n.remove(t))}))})),t.abrupt("return",Promise.all(e));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cometd",get:function(){return this.customCometd||this.defaultCometd}}]),t}()),Jn=function(){function t(e){_()(this,t),E()(this,"path",void 0),E()(this,"update",void 0),E()(this,"subscription",void 0);var n=e.scopeBoundary,r=e.scopeKey,o=e.pushCategory;!function(t){if(!t)throw new G("No scope found where one was required");var e=t.scopeBoundary,n=t.scopeKey,r=t.pushCategory;if(!e)throw new G("Missing scope component: scopeBoundary");if(!n)throw new G("Missing scope component: scopeKey");if(!r)throw new G("Missing scope component: pushCategory");if(!l.hasOwnProperty(e))throw new G("Invalid scope boundary: ".concat(e));if(!m.hasOwnProperty(r))throw new G("Invalid push category: ".concat(r))}(e),this.path="/".concat(n.toLowerCase(),"/").concat(r,"/").concat(o.toLowerCase()),Gn.subscriptions.has(this.path)&&(this.subscription=Gn.subscriptions.get(this.path))}var e,n;return O()(t,[{key:"publish",value:function(t){return Gn.publish(this,t)}},{key:"subscribe",value:(n=pt()(st.a.mark((function t(e,n){var r=this;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.subscription){t.next=3;break}return t.next=3,this.unsubscribe();case 3:return this.update=e,t.abrupt("return",Gn.add(this,e,n).then((function(t){return r.subscription=t,t})));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"unsubscribe",value:(e=pt()(st.a.mark((function t(){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.subscription){t.next=4;break}return t.next=3,Gn.remove(this.subscription);case 3:this.subscription=null;case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Vn=function(t){var e,n=ct.session;switch(null==n||null===(e=n.loginMethod)||void 0===e?void 0:e.objectType){case"sso":return o.logout();case"none":return o.logout().then((function(){return window.location.href="/unknown.html"}));case"native":default:return function(t){var e="";return t.code&&(e=e.concat("?error=".concat(t.code))),o.logout().then((function(){return window.location.href="/login.html".concat(e)}))}(t)}},$n=new(function(){function t(){_()(this,t),E()(this,"_handlers",[{identifier:function(t){return 401===t.status},handle:function(t,e){if("AUTHENTICATION_INVALIDATED"===t.code){var n=ct.session.groupKey;return o.upgrade(n,{objectType:"user",inert:!0}).then((function(){return e()})).catch((function(){return Vn(t)}))}return g()?Promise.reject(t):Vn(t)}}])}var e;return O()(t,[{key:"registerHandler",value:function(t,e){this.handlers.unshift({identifier:t,handle:e})}},{key:"handle",value:(e=pt()(st.a.mark((function t(e,n,r){var o,i,a,c;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||this.handlers,o=r.findIndex((function(t){return(0,t.identifier)(e)})),i=r[o],a=o>0?r.slice(o+1):[],i){t.next=6;break}throw e;case 6:return t.prev=6,t.next=9,i.handle(e,n).catch((function(t){throw t}));case 9:c=t.sent,t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(6),t.next=16,this.handle(e,n,a);case 16:c=t.sent;case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(t,n,r){return e.apply(this,arguments)})},{key:"handlers",get:function(){return this._handlers}}]),t}()),Yn=n(15),Zn=n.n(Yn),Qn=n(13),tr=n.n(Qn),er=n(21),nr=n.n(er);function rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ir(t,e,n){var r,o=null!==(r=n.parsePage)&&void 0!==r?r:function(t){return t},i=or({},t,{values:o(t.values)}),a=function(){var t=pt()(st.a.mark((function t(){var r,a,c,u;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new URLSearchParams(e.search),0!==i.firstResult){t.next=4;break}return console.warn('Pagination: cannot call "prev" on first page'),t.abrupt("return",[]);case 4:return a=i.firstResult-i.maxResults,c=i.maxResults+(a<0?a:0),r.set("first",Math.max(a,0).toString()),r.set("max",c.toString()),e.search=r.toString(),t.next=11,cr(e,or({},n,{paginated:!1})).then((function(t){return t.body}));case 11:return(u=t.sent).values=o(u.values),Object.assign(i,u),t.abrupt("return",i.values);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=pt()(st.a.mark((function t(){var r,a,c;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new URLSearchParams(e.search),!((a=i.firstResult+i.maxResults)>=i.totalResults)){t.next=5;break}return console.warn('Pagination: cannot call "next" on final page'),t.abrupt("return",[]);case 5:return r.set("first",a.toString()),e.search=r.toString(),t.next=9,cr(e,or({},n,{paginated:!1})).then((function(t){return t.body}));case 9:return(c=t.sent).values=o(c.values),Object.assign(i,c),t.abrupt("return",i.values);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=t.totalResults,s=function(){var t=pt()(st.a.mark((function t(){var r,i,a,c,h=arguments;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>0&&void 0!==h[0]?h[0]:0,i=h.length>1&&void 0!==h[1]?h[1]:[],!(r>=u)){t.next=4;break}return t.abrupt("return",i);case 4:return(a=new URLSearchParams(e.search)).set("first",r.toString()),a.delete("max"),e.search=a.toString(),t.next=10,cr(e,or({},n,{paginated:!1})).then((function(t){return t.body}));case 10:return c=t.sent,i.push.apply(i,tr()(o(c.values))),t.abrupt("return",s(r+c.maxResults,i));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.prev=a,i.next=c,i.all=s,i}var ar=function(t){var e={"Content-type":"application/json; charset=UTF-8"},n=ct.session;return t&&n&&(e.Authorization="Bearer ".concat(n.token)),t&&rt.tokenOverride&&(e.Authorization="Bearer ".concat(rt.tokenOverride)),e};function cr(t,e){return ur.apply(this,arguments)}function ur(){return(ur=pt()(st.a.mark((function t(e,n){var r,o,i,a,c,u,s,h,p,f,l,d;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.method,o=n.body,i=n.includeAuthorization,a=n.inert,c=n.paginated,u=ar(i),t.next=4,nr()(e,{method:r,cache:"no-cache",headers:u,redirect:"follow",body:o?JSON.stringify(o):null});case 4:if(204!==(s=t.sent).status){t.next=7;break}return t.abrupt("return",new tt(void 0,s));case 7:if((h=s.headers.get("content-type"))&&h.includes("application/json")){t.next=10;break}throw new G("Response content-type '".concat(h,"' does not include 'application/json'"));case 10:return t.next=12,s.json();case 12:if(p=t.sent,console.log("%c json!","font-size: 20px; color: #FB15B9FF;",p),!(s.status>=200&&s.status<400)){t.next=17;break}return f=new tt(c?ir(p,e,n):p,s),t.abrupt("return",f);case 17:if(l=new Q(p,s),!a){t.next=20;break}throw l;case 20:return d=function(){return cr(e,or({},n,{inert:!0}))},t.abrupt("return",$n.handle(l,d));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var sr=function(){function t(){_()(this,t),E()(this,"_searchParams",new URLSearchParams)}var e,n,r,o,i;return O()(t,[{key:"withServer",value:function(t){return void 0!==t&&(this.server=t),this}},{key:"withVersion",value:function(t){return void 0!==t&&(this.version=t),this}},{key:"withAccountShortName",value:function(t){return void 0!==t&&(this.accountShortName=t),this}},{key:"withProjectShortName",value:function(t){return void 0!==t&&(this.projectShortName=t),this}},{key:"withSearchParams",value:function(t){return void 0!==t&&(this.searchParams=t),this}},{key:"getURL",value:function(t){var e;this.server||this.withServer("".concat(rt.apiProtocol,"://").concat(rt.apiHost)),this.accountShortName||this.withAccountShortName(rt.accountShortName),this.projectShortName||this.withProjectShortName(rt.projectShortName),this.version||this.withVersion(rt.apiVersion);var n,r,o=new URL("".concat(this.server));return o.pathname="api/v".concat(this.version,"/").concat(this.accountShortName,"/").concat(this.projectShortName).concat((n="/",(r=t).startsWith(n)?r:"".concat(n).concat(r))),o.search=null!==(e=this.searchParams)&&void 0!==e?e:new URLSearchParams,o}},{key:"get",value:(i=pt()(st.a.mark((function t(e,n){var r,o;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this.getURL(e)).href.length>2048)){t.next=4;break}return o=new URL(r.href.split("?")[0]),t.abrupt("return",this.post(o,or({},n,{body:r.search})));case 4:return t.abrupt("return",cr(r,or({includeAuthorization:!0},n,{method:"GET"})));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"delete",value:(o=pt()(st.a.mark((function t(e,n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",cr(r,or({includeAuthorization:!0},n,{method:"DELETE"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"patch",value:(r=pt()(st.a.mark((function t(e,n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",cr(r,or({includeAuthorization:!0},n,{method:"PATCH"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"post",value:(n=pt()(st.a.mark((function t(e,n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",cr(r,or({includeAuthorization:!0},n,{method:"POST"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"put",value:(e=pt()(st.a.mark((function t(e,n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getURL(e),t.abrupt("return",cr(r,or({includeAuthorization:!0},n,{method:"PUT"})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"server",get:function(){return this._server},set:function(t){this._server=t}},{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"accountShortName",get:function(){return this._accountShortName},set:function(t){this._accountShortName=t}},{key:"projectShortName",get:function(){return this._projectShortName},set:function(t){this._projectShortName=t}},{key:"searchParams",get:function(){return this._searchParams},set:function(t){t.constructor!==URLSearchParams?("object"===Zn()(t)&&t.constructor===Object&&(t=Object.entries(t).reduce((function(t,e){var n=nt()(e,2),r=n[0],o=n[1];return Array.isArray(o)?[].concat(tr()(t),tr()(o.map((function(t){return[r,t]})))):(null==o||t.push([r,o]),t)}),[])),this._searchParams=new URLSearchParams(t)):this._searchParams=t}}]),t}(),hr="__VERSION__"}])}));
//# sourceMappingURL=epicenter.js.map