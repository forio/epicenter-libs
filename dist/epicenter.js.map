{"version":3,"sources":["webpack://epicenter/webpack/universalModuleDefinition","webpack://epicenter/webpack/bootstrap","webpack://epicenter/./node_modules/@babel/runtime/regenerator/index.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/createClass.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/inherits.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/get.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/typeof.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://epicenter/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://epicenter/./node_modules/cometd/cometd.js","webpack://epicenter/./node_modules/cometd/AckExtension.js","webpack://epicenter/./node_modules/cometd/ReloadExtension.js","webpack://epicenter/./node_modules/regenerator-runtime/runtime.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/construct.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://epicenter/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://epicenter/./src/utils/constants.js","webpack://epicenter/./src/utils/helpers.js","webpack://epicenter/./src/utils/store.js","webpack://epicenter/./src/utils/cookies.js","webpack://epicenter/./src/utils/error.js","webpack://epicenter/./src/utils/fault.js","webpack://epicenter/./src/utils/result.js","webpack://epicenter/./src/adapters/account.js","webpack://epicenter/./src/adapters/authentication.js","webpack://epicenter/./src/adapters/presence.js","webpack://epicenter/./src/adapters/project.js","webpack://epicenter/./src/adapters/run.js","webpack://epicenter/./src/adapters/cometd.js","webpack://epicenter/./src/adapters/channel.js","webpack://epicenter/./src/utils/error-manager.js","webpack://epicenter/./src/utils/identification.js","webpack://epicenter/./src/utils/router.js","webpack://epicenter/./src/config.js","webpack://epicenter/./src/epicenter.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","args","arguments","apply","err","undefined","obj","configurable","writable","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_typeof","assertThisInitialized","subClass","superClass","constructor","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","superPropBase","_get","receiver","Reflect","base","desc","getOwnPropertyDescriptor","arrayWithoutHoles","iterableToArray","nonIterableSpread","isNativeFunction","construct","_wrapNativeSuper","Class","_cache","Map","has","set","Wrapper","_typeof2","iterator","objectWithoutPropertiesLoose","source","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","__self__","F","fetch","DOMException","support","searchParams","iterable","blob","Blob","e","formData","arrayBuffer","viewClasses","isArrayBufferView","ArrayBuffer","isView","toString","normalizeName","String","test","toLowerCase","normalizeValue","iteratorFor","items","next","shift","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","onload","result","onerror","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","slice","view","Uint8Array","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","type","rejected","Error","text","readAsText","chars","fromCharCode","join","readArrayBufferAsText","decode","json","JSON","parse","oldValue","callback","thisArg","keys","push","values","entries","methods","Request","input","options","method","upcased","url","credentials","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","message","stack","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","default","_setPrototypeOf","Scheduler","_ids","_tasks","register","funktion","id","unregister","setTimeout","delay","window","clearTimeout","WorkerScheduler","onmessage","cmd","data","postMessage","Utils","isString","inArray","element","array","TransportRegistry","_types","_transports","getTransportTypes","findTransportTypes","version","crossDomain","accept","negotiateTransport","types","j","transport","add","index","existing","splice","find","remove","clear","reset","Transport","_type","_cometd","_url","registered","cometd","unregistered","_debug","_mixin","getConfiguration","getAdvice","convertToMessages","x","getType","getURL","setURL","envelope","metaConnect","derive","baseObject","RequestTransport","_super","_self","_requestIds","_metaConnectRequest","_requests","_envelopes","_coalesceEnvelopes","envelopeAndRequest","newEnvelope","newRequest","sync","messages","concat","_transportSend","transportSend","expired","maxDelay","maxNetworkDelay","timeout","errorMessage","failure","reason","httpCode","xhrStatus","abortXHR","complete","onFailure","_queueSend","requestId","maxConnections","_metaConnectComplete","_complete","success","nextEnvelope","nextRequest","autoBatch","_metaConnectSend","transportSuccess","responses","onSuccess","transportFailure","metaConnectRequest","state","UNSENT","LongPollingTransport","_supportsCrossDomain","newXMLHttpRequest","xhrSend","packet","context","headerName","onError","sameStack","requestHeaders","stringify","received","exception","CallbackPollingTransport","jsonp","_failTransportFn","jsonpSend","head","document","getElementsByTagName","script","createElement","callbackName","removeChild","encodeURIComponent","src","async","appendChild","start","lengths","urlLength","encodeURI","maxLength","maxURILength","envelopeToSend","begin","end","xx","WebSocketTransport","_webSocketSupported","_webSocketConnected","_stickyReconnect","_context","_connecting","_connected","_successCallback","_forceClose","event","webSocketClose","code","onClose","_sameContext","_storeEnvelope","messageIds","envelopes","_websocketConnect","protocol","webSocket","WebSocket","stickyReconnect","connectTimeout","connectTimer","onclose","onopen","onOpen","_warn","wsMessage","onMessage","_webSocketSend","timeouts","_send","_notifySuccess","_notifyFailure","close","channel","removed","ids","websocketCode","websocketEnabled","_z85EncodeTable","_z85DecodeTable","CometD","_transport","_handshakeProps","_handshakeCallback","_handleMessages","_handleFailure","_scheduler","_name","_crossDomain","_status","_messageId","_clientId","_batch","_messageQueue","_internalBatch","_listenerId","_listeners","_backoff","_scheduledSend","_extensions","_advice","_callbacks","_remoteCalls","_reestablish","_unconnectTime","_handshakeMessages","_metaConnect","_config","useWorkerScheduler","backoffIncrement","maxBackoff","logLevel","appendMessageTypeToURL","urls","advice","interval","reconnect","maxInterval","_fieldValue","_isString","_isFunction","_zeroPad","Math","pow","_log","level","console","logger","now","Date","getHours","getMinutes","getSeconds","getMilliseconds","_splitURL","RegExp","exec","_configure","configuration","urlParts","hostAndPort","uri","afterURI","_isCrossDomain","_info","uriSegments","lastSegmentIndex","match","Worker","URL","substring","lastIndexOf","blobURL","createObjectURL","worker","_removeListener","subscription","subscriptions","listener","_removeSubscription","_clearSubscriptions","_setStatus","newStatus","_isDisconnected","_nextMessageId","_applyExtension","scope","outgoing","handler","onExtensionException","_applyOutgoingExtensions","extension","_notify","onListenerException","_notifyListeners","channelParts","last","channelPart","_cancelDelayedSend","_delayedSend","operation","time","extraPath","messageId","clientId","rcvdMessages","conduit","getTransport","connectionType","_resetBackoff","_flushBatch","_delayedConnect","bayeuxMessage","_connect","_updateAdvice","newAdvice","_disconnect","_notifyTransportException","oldTransport","newTransport","onTransportException","_handshake","handshakeProps","handshakeCallback","transportTypes","minimumVersion","supportedConnectionTypes","_putCallback","_notifyCallback","onCallbackException","_handleCallback","_getCallback","_handleRemoteCall","_handleTransportFailure","failureInfo","action","_delayedHandshake","_failHandshake","onTransportFailure","_handshakeFailure","cause","_matchMetaConnect","connect","_failConnect","_connectFailure","_failDisconnect","_disconnectFailure","_failSubscribe","_subscribeFailure","_failUnsubscribe","_unsubscribeFailure","_failMessage","_messageFailure","_receive","incoming","_applyIncomingExtensions","successful","reestablish","_handshakeResponse","_connectResponse","_disconnectResponse","_subscribeResponse","_unsubscribeResponse","_messageResponse","_hasSubscriptions","_resolveScopedCallback","delegate","_addListener","isListener","deep","objects","propName","prop","targ","host","failureHandler","transports","getTransportRegistry","getBackoffPeriod","increaseBackoffPeriod","getTime","expiration","resetBackoffPeriod","receive","failureMessage","registerTransport","unregisterTransport","unregisterTransports","findTransport","configure","handshake","disconnect","disconnectProps","disconnectCallback","startBatch","endBatch","_endBatch","batch","addListener","removeListener","clearListeners","subscribe","subscribeProps","subscribeCallback","unsubscribe","unsubscribeProps","unsubscribeCallback","resubscribe","clearSubscriptions","publish","content","publishProps","publishCallback","publishBinary","meta","ext","binary","remoteCall","callProps","remoteCallBinary","getStatus","isDisconnected","setBackoffIncrement","period","getBackoffIncrement","setLogLevel","registerExtension","existingExtension","unregisterExtension","getExtension","getName","getClientId","Z85","encode","remainder","padding","isPadding","getUint8","divisor","floor","string","charIdx","byteIdx","charCodeAt","setUint8","AckExtension","_serverSupportsAcks","ackField","ack","enabled","ackEnabled","ReloadExtension","_state","_reloading","_reload","config","handshakeResponse","sessionStorage","setItem","reload","getItem","oldState","removeItem","_similarState","transportType","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","iter","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","_arr","_n","_d","_e","_s","_i","ReferenceError","_construct","Parent","sham","Proxy","isNativeReflectConstruct","a","sourceKeys","arr2","from","BROWSER_STORAGE_TYPE","COOKIE","SESSION","SCOPE_BOUNDARY","PROJECT","GROUP","EPISODE","WORLD","RUN","RITUAL","NONE","INTER","REANIMATE","EXORCISE","PUSH_CATEGORY","CHAT","CONSENSUS","CONTROL","PRESENCE","SYSTEM","LOCK_TYPE","MONITER","AUTHOR","SUPPORT","FACILITATOR","REVIEWER","USER","LEADER","PARTICIPANT","ANONYMOUS","isBrowser","isNode","prefix","pre","str","startsWith","Store","store","_store","nodeMap","NodeStore","SessionStore","CookieStore","defaults","domain","hostname","path","cookies","getExpiration","vEnd","Number","Infinity","toUTCString","cookie","secure","samesite","expireStr","domainStr","pathStr","secureStr","samesiteStr","hasItem","aKeys","nLen","nIdx","EpicenterError","Fault","information","rest","Result","createAccount","objectType","shortName","adminKey","subscriptionPlan","billingInterval","Router","post","updateAccount","patch","removeAccount","accountShortName","withAccountShortName","logout","identification","session","cometdAdapter","login","password","groupKey","others","projectShortName","withProjectShortName","includeAuthorization","inert","upgrade","sso","getSession","getLocalSession","forGroup","forWorld","worldKey","channelsEnabled","optionals","model","scopeBoundary","scopeKey","pseudonymKey","readLock","writeLock","morphology","ephemeral","trackingKey","modelContext","executionContext","defaultLock","permit","modelFile","runKey","restore","rewind","steps","rewindCount","update","marked","hidden","closed","hasMultiple","uriComponent","withSearchParams","MAX_URL_LENGTH","query","filter","sort","first","max","projections","variables","statement","metadata","attr","router","introspect","ritual","warn","getVariables","include","getVariable","variable","updateVariables","getMetadata","updateMetadata","actionList","AUTH_TOKEN_KEY","DISCONNECTED","CometdError","reply","includes","customCometd","initialized","defaultCometd","load","apiScheme","apiHost","onunload","checkEnabled","token","requireAcknowledgement","handshakeReply","errorManager","empty","disconnectReply","channels","subscriptionProps","handleCometdUpdate","promises","subscribeReply","all","publishReply","unsubscribeReply","validateScope","pushCategory","Channel","handleByLoginMethod","defaultValue","ref","access","authAdapter","href","handleByRelog","UNAUTHORIZED","identifier","retry","handleFn","handlers","unshift","retryFn","findIndex","remainingHandlers","_handlers","SESSION_KEY","storeType","consumeSSO","mySession","isLocal","isCustomDomain","pathname","getStore","description","getSessionPath","Authorization","cache","contentType","server","withServer","withVersion","apiVersion","search","_server","_version","_accountShortName","_projectShortName","_searchParams","flatMap","v","API_VERSION","account","project","localConfigProtocol","localConfigHost","getPathAccountProject","_apiVersion","api","loading","loadNode","loadBrowser","_apiScheme","_apiHost","_localConfigProtocol","strOrArr","_localConfigHost","VERSION"],"mappings":"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","file":"epicenter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"epicenter\"] = factory();\n\telse\n\t\troot[\"epicenter\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/*\n * Copyright (c) 2008-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* CometD Version 3.1.10 */\n\n(function(root, factory) {\n    if (typeof exports === 'object') {\n        // CommonJS.\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD.\n        define([], factory);\n    } else {\n        // Globals.\n        root.org = root.org || {};\n        root.org.cometd = factory();\n    }\n}(this, function() {\n    /**\n     * Browsers may throttle the Window scheduler,\n     * so we may replace it with a Worker scheduler.\n     */\n    var Scheduler = function() {\n        var _ids = 0;\n        var _tasks = {};\n        this.register = function(funktion) {\n            var id = ++_ids;\n            _tasks[id] = funktion;\n            return id;\n        };\n        this.unregister = function(id) {\n            var funktion = _tasks[id];\n            delete _tasks[id];\n            return funktion;\n        };\n        this.setTimeout = function(funktion, delay) {\n            return window.setTimeout(funktion, delay);\n        };\n        this.clearTimeout = function(id) {\n            window.clearTimeout(id);\n        };\n    };\n\n    /**\n     * The scheduler code that will run in the Worker.\n     */\n    function WorkerScheduler() {\n        var _tasks = {};\n        self.onmessage = function(e) {\n            var cmd = e.data;\n            var id = _tasks[cmd.id];\n            switch (cmd.type) {\n                case 'setTimeout':\n                    _tasks[cmd.id] = self.setTimeout(function() {\n                        delete _tasks[cmd.id];\n                        self.postMessage({\n                            id: cmd.id\n                        });\n                    }, cmd.delay);\n                    break;\n                case 'clearTimeout':\n                    delete _tasks[cmd.id];\n                    if (id) {\n                        self.clearTimeout(id);\n                    }\n                    break;\n                default:\n                    throw 'Unknown command ' + cmd.type;\n            }\n        };\n    }\n\n\n    /**\n     * Utility functions.\n     */\n    var Utils = {\n        isString: function(value) {\n            if (value === undefined || value === null) {\n                return false;\n            }\n            return typeof value === 'string' || value instanceof String;\n        },\n        isArray: function(value) {\n            if (value === undefined || value === null) {\n                return false;\n            }\n            return value instanceof Array;\n        },\n        /**\n         * Returns whether the given element is contained into the given array.\n         * @param element the element to check presence for\n         * @param array the array to check for the element presence\n         * @return the index of the element, if present, or a negative index if the element is not present\n         */\n        inArray: function(element, array) {\n            for (var i = 0; i < array.length; ++i) {\n                if (element === array[i]) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    };\n\n\n    /**\n     * A registry for transports used by the CometD object.\n     */\n    var TransportRegistry = function() {\n        var _types = [];\n        var _transports = {};\n\n        this.getTransportTypes = function() {\n            return _types.slice(0);\n        };\n\n        this.findTransportTypes = function(version, crossDomain, url) {\n            var result = [];\n            for (var i = 0; i < _types.length; ++i) {\n                var type = _types[i];\n                if (_transports[type].accept(version, crossDomain, url) === true) {\n                    result.push(type);\n                }\n            }\n            return result;\n        };\n\n        this.negotiateTransport = function(types, version, crossDomain, url) {\n            for (var i = 0; i < _types.length; ++i) {\n                var type = _types[i];\n                for (var j = 0; j < types.length; ++j) {\n                    if (type === types[j]) {\n                        var transport = _transports[type];\n                        if (transport.accept(version, crossDomain, url) === true) {\n                            return transport;\n                        }\n                    }\n                }\n            }\n            return null;\n        };\n\n        this.add = function(type, transport, index) {\n            var existing = false;\n            for (var i = 0; i < _types.length; ++i) {\n                if (_types[i] === type) {\n                    existing = true;\n                    break;\n                }\n            }\n\n            if (!existing) {\n                if (typeof index !== 'number') {\n                    _types.push(type);\n                } else {\n                    _types.splice(index, 0, type);\n                }\n                _transports[type] = transport;\n            }\n\n            return !existing;\n        };\n\n        this.find = function(type) {\n            for (var i = 0; i < _types.length; ++i) {\n                if (_types[i] === type) {\n                    return _transports[type];\n                }\n            }\n            return null;\n        };\n\n        this.remove = function(type) {\n            for (var i = 0; i < _types.length; ++i) {\n                if (_types[i] === type) {\n                    _types.splice(i, 1);\n                    var transport = _transports[type];\n                    delete _transports[type];\n                    return transport;\n                }\n            }\n            return null;\n        };\n\n        this.clear = function() {\n            _types = [];\n            _transports = {};\n        };\n\n        this.reset = function(init) {\n            for (var i = 0; i < _types.length; ++i) {\n                _transports[_types[i]].reset(init);\n            }\n        };\n    };\n\n\n    /**\n     * Base object with the common functionality for transports.\n     */\n    var Transport = function() {\n        var _type;\n        var _cometd;\n        var _url;\n\n        /**\n         * Function invoked just after a transport has been successfully registered.\n         * @param type the type of transport (for example 'long-polling')\n         * @param cometd the cometd object this transport has been registered to\n         * @see #unregistered()\n         */\n        this.registered = function(type, cometd) {\n            _type = type;\n            _cometd = cometd;\n        };\n\n        /**\n         * Function invoked just after a transport has been successfully unregistered.\n         * @see #registered(type, cometd)\n         */\n        this.unregistered = function() {\n            _type = null;\n            _cometd = null;\n        };\n\n        this._debug = function() {\n            _cometd._debug.apply(_cometd, arguments);\n        };\n\n        this._mixin = function() {\n            return _cometd._mixin.apply(_cometd, arguments);\n        };\n\n        this.getConfiguration = function() {\n            return _cometd.getConfiguration();\n        };\n\n        this.getAdvice = function() {\n            return _cometd.getAdvice();\n        };\n\n        this.setTimeout = function(funktion, delay) {\n            return _cometd.setTimeout(funktion, delay);\n        };\n\n        this.clearTimeout = function(id) {\n            _cometd.clearTimeout(id);\n        };\n\n        /**\n         * Converts the given response into an array of bayeux messages\n         * @param response the response to convert\n         * @return an array of bayeux messages obtained by converting the response\n         */\n        this.convertToMessages = function(response) {\n            if (Utils.isString(response)) {\n                try {\n                    return JSON.parse(response);\n                } catch (x) {\n                    this._debug('Could not convert to JSON the following string', '\"' + response + '\"');\n                    throw x;\n                }\n            }\n            if (Utils.isArray(response)) {\n                return response;\n            }\n            if (response === undefined || response === null) {\n                return [];\n            }\n            if (response instanceof Object) {\n                return [response];\n            }\n            throw 'Conversion Error ' + response + ', typeof ' + (typeof response);\n        };\n\n        /**\n         * Returns whether this transport can work for the given version and cross domain communication case.\n         * @param version a string indicating the transport version\n         * @param crossDomain a boolean indicating whether the communication is cross domain\n         * @param url the URL to connect to\n         * @return true if this transport can work for the given version and cross domain communication case,\n         * false otherwise\n         */\n        this.accept = function(version, crossDomain, url) {\n            throw 'Abstract';\n        };\n\n        /**\n         * Returns the type of this transport.\n         * @see #registered(type, cometd)\n         */\n        this.getType = function() {\n            return _type;\n        };\n\n        this.getURL = function() {\n            return _url;\n        };\n\n        this.setURL = function(url) {\n            _url = url;\n        };\n\n        this.send = function(envelope, metaConnect) {\n            throw 'Abstract';\n        };\n\n        this.reset = function(init) {\n            this._debug('Transport', _type, 'reset', init ? 'initial' : 'retry');\n        };\n\n        this.abort = function() {\n            this._debug('Transport', _type, 'aborted');\n        };\n\n        this.toString = function() {\n            return this.getType();\n        };\n    };\n\n    Transport.derive = function(baseObject) {\n        function F() {\n        }\n\n        F.prototype = baseObject;\n        return new F();\n    };\n\n\n    /**\n     * Base object with the common functionality for transports based on requests.\n     * The key responsibility is to allow at most 2 outstanding requests to the server,\n     * to avoid that requests are sent behind a long poll.\n     * To achieve this, we have one reserved request for the long poll, and all other\n     * requests are serialized one after the other.\n     */\n    var RequestTransport = function() {\n        var _super = new Transport();\n        var _self = Transport.derive(_super);\n        var _requestIds = 0;\n        var _metaConnectRequest = null;\n        var _requests = [];\n        var _envelopes = [];\n\n        function _coalesceEnvelopes(envelope) {\n            while (_envelopes.length > 0) {\n                var envelopeAndRequest = _envelopes[0];\n                var newEnvelope = envelopeAndRequest[0];\n                var newRequest = envelopeAndRequest[1];\n                if (newEnvelope.url === envelope.url &&\n                    newEnvelope.sync === envelope.sync) {\n                    _envelopes.shift();\n                    envelope.messages = envelope.messages.concat(newEnvelope.messages);\n                    this._debug('Coalesced', newEnvelope.messages.length, 'messages from request', newRequest.id);\n                    continue;\n                }\n                break;\n            }\n        }\n\n        function _transportSend(envelope, request) {\n            this.transportSend(envelope, request);\n            request.expired = false;\n\n            if (!envelope.sync) {\n                var maxDelay = this.getConfiguration().maxNetworkDelay;\n                var delay = maxDelay;\n                if (request.metaConnect === true) {\n                    delay += this.getAdvice().timeout;\n                }\n\n                this._debug('Transport', this.getType(), 'waiting at most', delay, 'ms for the response, maxNetworkDelay', maxDelay);\n\n                var self = this;\n                request.timeout = this.setTimeout(function() {\n                    request.expired = true;\n                    var errorMessage = 'Request ' + request.id + ' of transport ' + self.getType() + ' exceeded ' + delay + ' ms max network delay';\n                    var failure = {\n                        reason: errorMessage\n                    };\n                    var xhr = request.xhr;\n                    failure.httpCode = self.xhrStatus(xhr);\n                    self.abortXHR(xhr);\n                    self._debug(errorMessage);\n                    self.complete(request, false, request.metaConnect);\n                    envelope.onFailure(xhr, envelope.messages, failure);\n                }, delay);\n            }\n        }\n\n        function _queueSend(envelope) {\n            var requestId = ++_requestIds;\n            var request = {\n                id: requestId,\n                metaConnect: false,\n                envelope: envelope\n            };\n\n            // Consider the /meta/connect requests which should always be present.\n            if (_requests.length < this.getConfiguration().maxConnections - 1) {\n                _requests.push(request);\n                _transportSend.call(this, envelope, request);\n            } else {\n                this._debug('Transport', this.getType(), 'queueing request', requestId, 'envelope', envelope);\n                _envelopes.push([envelope, request]);\n            }\n        }\n\n        function _metaConnectComplete(request) {\n            var requestId = request.id;\n            this._debug('Transport', this.getType(), '/meta/connect complete, request', requestId);\n            if (_metaConnectRequest !== null && _metaConnectRequest.id !== requestId) {\n                throw '/meta/connect request mismatch, completing request ' + requestId;\n            }\n            _metaConnectRequest = null;\n        }\n\n        function _complete(request, success) {\n            var index = Utils.inArray(request, _requests);\n            // The index can be negative if the request has been aborted\n            if (index >= 0) {\n                _requests.splice(index, 1);\n            }\n\n            if (_envelopes.length > 0) {\n                var envelopeAndRequest = _envelopes.shift();\n                var nextEnvelope = envelopeAndRequest[0];\n                var nextRequest = envelopeAndRequest[1];\n                this._debug('Transport dequeued request', nextRequest.id);\n                if (success) {\n                    if (this.getConfiguration().autoBatch) {\n                        _coalesceEnvelopes.call(this, nextEnvelope);\n                    }\n                    _queueSend.call(this, nextEnvelope);\n                    this._debug('Transport completed request', request.id, nextEnvelope);\n                } else {\n                    // Keep the semantic of calling response callbacks asynchronously after the request\n                    var self = this;\n                    this.setTimeout(function() {\n                        self.complete(nextRequest, false, nextRequest.metaConnect);\n                        var failure = {\n                            reason: 'Previous request failed'\n                        };\n                        var xhr = nextRequest.xhr;\n                        failure.httpCode = self.xhrStatus(xhr);\n                        nextEnvelope.onFailure(xhr, nextEnvelope.messages, failure);\n                    }, 0);\n                }\n            }\n        }\n\n        _self.complete = function(request, success, metaConnect) {\n            if (metaConnect) {\n                _metaConnectComplete.call(this, request);\n            } else {\n                _complete.call(this, request, success);\n            }\n        };\n\n        /**\n         * Performs the actual send depending on the transport type details.\n         * @param envelope the envelope to send\n         * @param request the request information\n         */\n        _self.transportSend = function(envelope, request) {\n            throw 'Abstract';\n        };\n\n        _self.transportSuccess = function(envelope, request, responses) {\n            if (!request.expired) {\n                this.clearTimeout(request.timeout);\n                this.complete(request, true, request.metaConnect);\n                if (responses && responses.length > 0) {\n                    envelope.onSuccess(responses);\n                } else {\n                    envelope.onFailure(request.xhr, envelope.messages, {\n                        httpCode: 204\n                    });\n                }\n            }\n        };\n\n        _self.transportFailure = function(envelope, request, failure) {\n            if (!request.expired) {\n                this.clearTimeout(request.timeout);\n                this.complete(request, false, request.metaConnect);\n                envelope.onFailure(request.xhr, envelope.messages, failure);\n            }\n        };\n\n        function _metaConnectSend(envelope) {\n            if (_metaConnectRequest !== null) {\n                throw 'Concurrent /meta/connect requests not allowed, request id=' + _metaConnectRequest.id + ' not yet completed';\n            }\n\n            var requestId = ++_requestIds;\n            this._debug('Transport', this.getType(), '/meta/connect send, request', requestId, 'envelope', envelope);\n            var request = {\n                id: requestId,\n                metaConnect: true,\n                envelope: envelope\n            };\n            _transportSend.call(this, envelope, request);\n            _metaConnectRequest = request;\n        }\n\n        _self.send = function(envelope, metaConnect) {\n            if (metaConnect) {\n                _metaConnectSend.call(this, envelope);\n            } else {\n                _queueSend.call(this, envelope);\n            }\n        };\n\n        _self.abort = function() {\n            _super.abort();\n            for (var i = 0; i < _requests.length; ++i) {\n                var request = _requests[i];\n                if (request) {\n                    this._debug('Aborting request', request);\n                    if (!this.abortXHR(request.xhr)) {\n                        this.transportFailure(request.envelope, request, {reason: 'abort'});\n                    }\n                }\n            }\n            var metaConnectRequest = _metaConnectRequest;\n            if (metaConnectRequest) {\n                this._debug('Aborting /meta/connect request', metaConnectRequest);\n                if (!this.abortXHR(metaConnectRequest.xhr)) {\n                    this.transportFailure(metaConnectRequest.envelope, metaConnectRequest, {reason: 'abort'});\n                }\n            }\n            this.reset(true);\n        };\n\n        _self.reset = function(init) {\n            _super.reset(init);\n            _metaConnectRequest = null;\n            _requests = [];\n            _envelopes = [];\n        };\n\n        _self.abortXHR = function(xhr) {\n            if (xhr) {\n                try {\n                    var state = xhr.readyState;\n                    xhr.abort();\n                    return state !== window.XMLHttpRequest.UNSENT;\n                } catch (x) {\n                    this._debug(x);\n                }\n            }\n            return false;\n        };\n\n        _self.xhrStatus = function(xhr) {\n            if (xhr) {\n                try {\n                    return xhr.status;\n                } catch (x) {\n                    this._debug(x);\n                }\n            }\n            return -1;\n        };\n\n        return _self;\n    };\n\n\n    var LongPollingTransport = function() {\n        var _super = new RequestTransport();\n        var _self = Transport.derive(_super);\n        // By default, support cross domain\n        var _supportsCrossDomain = true;\n\n        _self.accept = function(version, crossDomain, url) {\n            return _supportsCrossDomain || !crossDomain;\n        };\n\n        _self.newXMLHttpRequest = function() {\n            return new window.XMLHttpRequest();\n        };\n\n        _self.xhrSend = function(packet) {\n            var xhr = _self.newXMLHttpRequest();\n            // Copy external context, to be used in other environments.\n            xhr.context = _self.context;\n            xhr.withCredentials = true;\n            xhr.open('POST', packet.url, packet.sync !== true);\n            var headers = packet.headers;\n            if (headers) {\n                for (var headerName in headers) {\n                    if (headers.hasOwnProperty(headerName)) {\n                        xhr.setRequestHeader(headerName, headers[headerName]);\n                    }\n                }\n            }\n            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            xhr.onload = function() {\n                if (xhr.status === 200) {\n                    packet.onSuccess(xhr.responseText);\n                } else {\n                    packet.onError(xhr.statusText);\n                }\n            };\n            xhr.onabort = xhr.onerror = function() {\n                packet.onError(xhr.statusText);\n            };\n            xhr.send(packet.body);\n            return xhr;\n        };\n\n        _self.transportSend = function(envelope, request) {\n            this._debug('Transport', this.getType(), 'sending request', request.id, 'envelope', envelope);\n\n            var self = this;\n            try {\n                var sameStack = true;\n                request.xhr = this.xhrSend({\n                    transport: this,\n                    url: envelope.url,\n                    sync: envelope.sync,\n                    headers: this.getConfiguration().requestHeaders,\n                    body: JSON.stringify(envelope.messages),\n                    onSuccess: function(response) {\n                        self._debug('Transport', self.getType(), 'received response', response);\n                        var success = false;\n                        try {\n                            var received = self.convertToMessages(response);\n                            if (received.length === 0) {\n                                _supportsCrossDomain = false;\n                                self.transportFailure(envelope, request, {\n                                    httpCode: 204\n                                });\n                            } else {\n                                success = true;\n                                self.transportSuccess(envelope, request, received);\n                            }\n                        } catch (x) {\n                            self._debug(x);\n                            if (!success) {\n                                _supportsCrossDomain = false;\n                                var failure = {\n                                    exception: x\n                                };\n                                failure.httpCode = self.xhrStatus(request.xhr);\n                                self.transportFailure(envelope, request, failure);\n                            }\n                        }\n                    },\n                    onError: function(reason, exception) {\n                        self._debug('Transport', self.getType(), 'received error', reason, exception);\n                        _supportsCrossDomain = false;\n                        var failure = {\n                            reason: reason,\n                            exception: exception\n                        };\n                        failure.httpCode = self.xhrStatus(request.xhr);\n                        if (sameStack) {\n                            // Keep the semantic of calling response callbacks asynchronously after the request\n                            self.setTimeout(function() {\n                                self.transportFailure(envelope, request, failure);\n                            }, 0);\n                        } else {\n                            self.transportFailure(envelope, request, failure);\n                        }\n                    }\n                });\n                sameStack = false;\n            } catch (x) {\n                _supportsCrossDomain = false;\n                // Keep the semantic of calling response callbacks asynchronously after the request\n                this.setTimeout(function() {\n                    self.transportFailure(envelope, request, {\n                        exception: x\n                    });\n                }, 0);\n            }\n        };\n\n        _self.reset = function(init) {\n            _super.reset(init);\n            _supportsCrossDomain = true;\n        };\n\n        return _self;\n    };\n\n\n    var CallbackPollingTransport = function() {\n        var _super = new RequestTransport();\n        var _self = Transport.derive(_super);\n        var jsonp = 0;\n\n        _self.accept = function(version, crossDomain, url) {\n            return true;\n        };\n\n        _self.jsonpSend = function(packet) {\n            var head = document.getElementsByTagName('head')[0];\n            var script = document.createElement('script');\n\n            var callbackName = '_cometd_jsonp_' + jsonp++;\n            window[callbackName] = function(responseText) {\n                head.removeChild(script);\n                delete window[callbackName];\n                packet.onSuccess(responseText);\n            };\n\n            var url = packet.url;\n            url += url.indexOf('?') < 0 ? '?' : '&';\n            url += 'jsonp=' + callbackName;\n            url += '&message=' + encodeURIComponent(packet.body);\n            script.src = url;\n            script.async = packet.sync !== true;\n            script.type = 'application/javascript';\n            script.onerror = function(e) {\n                packet.onError('jsonp ' + e.type);\n            };\n            head.appendChild(script);\n        };\n\n        function _failTransportFn(envelope, request, x) {\n            var self = this;\n            return function() {\n                self.transportFailure(envelope, request, 'error', x);\n            };\n        }\n\n        _self.transportSend = function(envelope, request) {\n            var self = this;\n\n            // Microsoft Internet Explorer has a 2083 URL max length\n            // We must ensure that we stay within that length\n            var start = 0;\n            var length = envelope.messages.length;\n            var lengths = [];\n            while (length > 0) {\n                // Encode the messages because all brackets, quotes, commas, colons, etc\n                // present in the JSON will be URL encoded, taking many more characters\n                var json = JSON.stringify(envelope.messages.slice(start, start + length));\n                var urlLength = envelope.url.length + encodeURI(json).length;\n\n                var maxLength = this.getConfiguration().maxURILength;\n                if (urlLength > maxLength) {\n                    if (length === 1) {\n                        var x = 'Bayeux message too big (' + urlLength + ' bytes, max is ' + maxLength + ') ' +\n                            'for transport ' + this.getType();\n                        // Keep the semantic of calling response callbacks asynchronously after the request\n                        this.setTimeout(_failTransportFn.call(this, envelope, request, x), 0);\n                        return;\n                    }\n\n                    --length;\n                    continue;\n                }\n\n                lengths.push(length);\n                start += length;\n                length = envelope.messages.length - start;\n            }\n\n            // Here we are sure that the messages can be sent within the URL limit\n\n            var envelopeToSend = envelope;\n            if (lengths.length > 1) {\n                var begin = 0;\n                var end = lengths[0];\n                this._debug('Transport', this.getType(), 'split', envelope.messages.length, 'messages into', lengths.join(' + '));\n                envelopeToSend = this._mixin(false, {}, envelope);\n                envelopeToSend.messages = envelope.messages.slice(begin, end);\n                envelopeToSend.onSuccess = envelope.onSuccess;\n                envelopeToSend.onFailure = envelope.onFailure;\n\n                for (var i = 1; i < lengths.length; ++i) {\n                    var nextEnvelope = this._mixin(false, {}, envelope);\n                    begin = end;\n                    end += lengths[i];\n                    nextEnvelope.messages = envelope.messages.slice(begin, end);\n                    nextEnvelope.onSuccess = envelope.onSuccess;\n                    nextEnvelope.onFailure = envelope.onFailure;\n                    this.send(nextEnvelope, request.metaConnect);\n                }\n            }\n\n            this._debug('Transport', this.getType(), 'sending request', request.id, 'envelope', envelopeToSend);\n\n            try {\n                var sameStack = true;\n                this.jsonpSend({\n                    transport: this,\n                    url: envelopeToSend.url,\n                    sync: envelopeToSend.sync,\n                    headers: this.getConfiguration().requestHeaders,\n                    body: JSON.stringify(envelopeToSend.messages),\n                    onSuccess: function(responses) {\n                        var success = false;\n                        try {\n                            var received = self.convertToMessages(responses);\n                            if (received.length === 0) {\n                                self.transportFailure(envelopeToSend, request, {\n                                    httpCode: 204\n                                });\n                            } else {\n                                success = true;\n                                self.transportSuccess(envelopeToSend, request, received);\n                            }\n                        } catch (x) {\n                            self._debug(x);\n                            if (!success) {\n                                self.transportFailure(envelopeToSend, request, {\n                                    exception: x\n                                });\n                            }\n                        }\n                    },\n                    onError: function(reason, exception) {\n                        var failure = {\n                            reason: reason,\n                            exception: exception\n                        };\n                        if (sameStack) {\n                            // Keep the semantic of calling response callbacks asynchronously after the request\n                            self.setTimeout(function() {\n                                self.transportFailure(envelopeToSend, request, failure);\n                            }, 0);\n                        } else {\n                            self.transportFailure(envelopeToSend, request, failure);\n                        }\n                    }\n                });\n                sameStack = false;\n            } catch (xx) {\n                // Keep the semantic of calling response callbacks asynchronously after the request\n                this.setTimeout(function() {\n                    self.transportFailure(envelopeToSend, request, {\n                        exception: xx\n                    });\n                }, 0);\n            }\n        };\n\n        return _self;\n    };\n\n\n    var WebSocketTransport = function() {\n        var _super = new Transport();\n        var _self = Transport.derive(_super);\n        var _cometd;\n        // By default WebSocket is supported\n        var _webSocketSupported = true;\n        // Whether we were able to establish a WebSocket connection\n        var _webSocketConnected = false;\n        var _stickyReconnect = true;\n        // The context contains the envelopes that have been sent\n        // and the timeouts for the messages that have been sent.\n        var _context = null;\n        var _connecting = null;\n        var _connected = false;\n        var _successCallback = null;\n\n        _self.reset = function(init) {\n            _super.reset(init);\n            _webSocketSupported = true;\n            if (init) {\n                _webSocketConnected = false;\n            }\n            _stickyReconnect = true;\n            _context = null;\n            _connecting = null;\n            _connected = false;\n        };\n\n        function _forceClose(context, event) {\n            if (context) {\n                this.webSocketClose(context, event.code, event.reason);\n                // Force immediate failure of pending messages to trigger reconnect.\n                // This is needed because the server may not reply to our close()\n                // and therefore the onclose function is never called.\n                this.onClose(context, event);\n            }\n        }\n\n        function _sameContext(context) {\n            return context === _connecting || context === _context;\n        }\n\n        function _storeEnvelope(context, envelope, metaConnect) {\n            var messageIds = [];\n            for (var i = 0; i < envelope.messages.length; ++i) {\n                var message = envelope.messages[i];\n                if (message.id) {\n                    messageIds.push(message.id);\n                }\n            }\n            context.envelopes[messageIds.join(',')] = [envelope, metaConnect];\n            this._debug('Transport', this.getType(), 'stored envelope, envelopes', context.envelopes);\n        }\n\n        function _websocketConnect(context) {\n            // We may have multiple attempts to open a WebSocket\n            // connection, for example a /meta/connect request that\n            // may take time, along with a user-triggered publish.\n            // Early return if we are already connecting.\n            if (_connecting) {\n                return;\n            }\n\n            // Mangle the URL, changing the scheme from 'http' to 'ws'.\n            var url = _cometd.getURL().replace(/^http/, 'ws');\n            this._debug('Transport', this.getType(), 'connecting to URL', url);\n\n            try {\n                var protocol = _cometd.getConfiguration().protocol;\n                context.webSocket = protocol ? new window.WebSocket(url, protocol) : new window.WebSocket(url);\n                _connecting = context;\n            } catch (x) {\n                _webSocketSupported = false;\n                this._debug('Exception while creating WebSocket object', x);\n                throw x;\n            }\n\n            // By default use sticky reconnects.\n            _stickyReconnect = _cometd.getConfiguration().stickyReconnect !== false;\n\n            var self = this;\n            var connectTimeout = _cometd.getConfiguration().connectTimeout;\n            if (connectTimeout > 0) {\n                context.connectTimer = this.setTimeout(function() {\n                    _cometd._debug('Transport', self.getType(), 'timed out while connecting to URL', url, ':', connectTimeout, 'ms');\n                    // The connection was not opened, close anyway.\n                    _forceClose.call(self, context, {code: 1000, reason: 'Connect Timeout'});\n                }, connectTimeout);\n            }\n\n            var onopen = function() {\n                _cometd._debug('WebSocket onopen', context);\n                if (context.connectTimer) {\n                    self.clearTimeout(context.connectTimer);\n                }\n\n                if (_sameContext(context)) {\n                    _connecting = null;\n                    _context = context;\n                    _webSocketConnected = true;\n                    self.onOpen(context);\n                } else {\n                    // We have a valid connection already, close this one.\n                    _cometd._warn('Closing extra WebSocket connection', this, 'active connection', _context);\n                    _forceClose.call(self, context, {code: 1000, reason: 'Extra Connection'});\n                }\n            };\n\n            // This callback is invoked when the server sends the close frame.\n            // The close frame for a connection may arrive *after* another\n            // connection has been opened, so we must make sure that actions\n            // are performed only if it's the same connection.\n            var onclose = function(event) {\n                event = event || {code: 1000};\n                _cometd._debug('WebSocket onclose', context, event, 'connecting', _connecting, 'current', _context);\n\n                if (context.connectTimer) {\n                    self.clearTimeout(context.connectTimer);\n                }\n\n                self.onClose(context, event);\n            };\n\n            var onmessage = function(wsMessage) {\n                _cometd._debug('WebSocket onmessage', wsMessage, context);\n                self.onMessage(context, wsMessage);\n            };\n\n            context.webSocket.onopen = onopen;\n            context.webSocket.onclose = onclose;\n            context.webSocket.onerror = function() {\n                // Clients should call onclose(), but if they do not we do it here for safety.\n                onclose({code: 1000, reason: 'Error'});\n            };\n            context.webSocket.onmessage = onmessage;\n\n            this._debug('Transport', this.getType(), 'configured callbacks on', context);\n        }\n\n        function _webSocketSend(context, envelope, metaConnect) {\n            var json = JSON.stringify(envelope.messages);\n            context.webSocket.send(json);\n            this._debug('Transport', this.getType(), 'sent', envelope, '/meta/connect =', metaConnect);\n\n            // Manage the timeout waiting for the response.\n            var maxDelay = this.getConfiguration().maxNetworkDelay;\n            var delay = maxDelay;\n            if (metaConnect) {\n                delay += this.getAdvice().timeout;\n                _connected = true;\n            }\n\n            var self = this;\n            var messageIds = [];\n            for (var i = 0; i < envelope.messages.length; ++i) {\n                (function() {\n                    var message = envelope.messages[i];\n                    if (message.id) {\n                        messageIds.push(message.id);\n                        context.timeouts[message.id] = self.setTimeout(function() {\n                            _cometd._debug('Transport', self.getType(), 'timing out message', message.id, 'after', delay, 'on', context);\n                            _forceClose.call(self, context, {code: 1000, reason: 'Message Timeout'});\n                        }, delay);\n                    }\n                })();\n            }\n\n            this._debug('Transport', this.getType(), 'waiting at most', delay, 'ms for messages', messageIds, 'maxNetworkDelay', maxDelay, ', timeouts:', context.timeouts);\n        }\n\n        _self._notifySuccess = function(fn, messages) {\n            fn.call(this, messages);\n        };\n\n        _self._notifyFailure = function(fn, context, messages, failure) {\n            fn.call(this, context, messages, failure);\n        };\n\n        function _send(context, envelope, metaConnect) {\n            try {\n                if (context === null) {\n                    context = _connecting || {\n                        envelopes: {},\n                        timeouts: {}\n                    };\n                    _storeEnvelope.call(this, context, envelope, metaConnect);\n                    _websocketConnect.call(this, context);\n                } else {\n                    _storeEnvelope.call(this, context, envelope, metaConnect);\n                    _webSocketSend.call(this, context, envelope, metaConnect);\n                }\n            } catch (x) {\n                // Keep the semantic of calling response callbacks asynchronously after the request.\n                var self = this;\n                this.setTimeout(function() {\n                    _forceClose.call(self, context, {\n                        code: 1000,\n                        reason: 'Exception',\n                        exception: x\n                    });\n                }, 0);\n            }\n        }\n\n        _self.onOpen = function(context) {\n            var envelopes = context.envelopes;\n            this._debug('Transport', this.getType(), 'opened', context, 'pending messages', envelopes);\n            for (var key in envelopes) {\n                if (envelopes.hasOwnProperty(key)) {\n                    var element = envelopes[key];\n                    var envelope = element[0];\n                    var metaConnect = element[1];\n                    // Store the success callback, which is independent from the envelope,\n                    // so that it can be used to notify arrival of messages.\n                    _successCallback = envelope.onSuccess;\n                    _webSocketSend.call(this, context, envelope, metaConnect);\n                }\n            }\n        };\n\n        _self.onMessage = function(context, wsMessage) {\n            this._debug('Transport', this.getType(), 'received websocket message', wsMessage, context);\n\n            var close = false;\n            var messages = this.convertToMessages(wsMessage.data);\n            var messageIds = [];\n            for (var i = 0; i < messages.length; ++i) {\n                var message = messages[i];\n\n                // Detect if the message is a response to a request we made.\n                // If it's a meta message, for sure it's a response; otherwise it's\n                // a publish message and publish responses don't have the data field.\n                if (/^\\/meta\\//.test(message.channel) || message.data === undefined) {\n                    if (message.id) {\n                        messageIds.push(message.id);\n\n                        var timeout = context.timeouts[message.id];\n                        if (timeout) {\n                            this.clearTimeout(timeout);\n                            delete context.timeouts[message.id];\n                            this._debug('Transport', this.getType(), 'removed timeout for message', message.id, ', timeouts', context.timeouts);\n                        }\n                    }\n                }\n\n                if ('/meta/connect' === message.channel) {\n                    _connected = false;\n                }\n                if ('/meta/disconnect' === message.channel && !_connected) {\n                    close = true;\n                }\n            }\n\n            // Remove the envelope corresponding to the messages.\n            var removed = false;\n            var envelopes = context.envelopes;\n            for (var j = 0; j < messageIds.length; ++j) {\n                var id = messageIds[j];\n                for (var key in envelopes) {\n                    if (envelopes.hasOwnProperty(key)) {\n                        var ids = key.split(',');\n                        var index = Utils.inArray(id, ids);\n                        if (index >= 0) {\n                            removed = true;\n                            ids.splice(index, 1);\n                            var envelope = envelopes[key][0];\n                            var metaConnect = envelopes[key][1];\n                            delete envelopes[key];\n                            if (ids.length > 0) {\n                                envelopes[ids.join(',')] = [envelope, metaConnect];\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n            if (removed) {\n                this._debug('Transport', this.getType(), 'removed envelope, envelopes', envelopes);\n            }\n\n            this._notifySuccess(_successCallback, messages);\n\n            if (close) {\n                this.webSocketClose(context, 1000, 'Disconnect');\n            }\n        };\n\n        _self.onClose = function(context, event) {\n            this._debug('Transport', this.getType(), 'closed', context, event);\n\n            if (_sameContext(context)) {\n                // Remember if we were able to connect.\n                // This close event could be due to server shutdown,\n                // and if it restarts we want to try websocket again.\n                _webSocketSupported = _stickyReconnect && _webSocketConnected;\n                _connecting = null;\n                _context = null;\n            }\n\n            var timeouts = context.timeouts;\n            context.timeouts = {};\n            for (var id in timeouts) {\n                if (timeouts.hasOwnProperty(id)) {\n                    this.clearTimeout(timeouts[id]);\n                }\n            }\n\n            var envelopes = context.envelopes;\n            context.envelopes = {};\n            for (var key in envelopes) {\n                if (envelopes.hasOwnProperty(key)) {\n                    var envelope = envelopes[key][0];\n                    var metaConnect = envelopes[key][1];\n                    if (metaConnect) {\n                        _connected = false;\n                    }\n                    var failure = {\n                        websocketCode: event.code,\n                        reason: event.reason\n                    };\n                    if (event.exception) {\n                        failure.exception = event.exception;\n                    }\n                    this._notifyFailure(envelope.onFailure, context, envelope.messages, failure);\n                }\n            }\n        };\n\n        _self.registered = function(type, cometd) {\n            _super.registered(type, cometd);\n            _cometd = cometd;\n        };\n\n        _self.accept = function(version, crossDomain, url) {\n            this._debug('Transport', this.getType(), 'accept, supported:', _webSocketSupported);\n            // Using !! to return a boolean (and not the WebSocket object).\n            return _webSocketSupported && !!window.WebSocket && _cometd.websocketEnabled !== false;\n        };\n\n        _self.send = function(envelope, metaConnect) {\n            this._debug('Transport', this.getType(), 'sending', envelope, '/meta/connect =', metaConnect);\n            _send.call(this, _context, envelope, metaConnect);\n        };\n\n        _self.webSocketClose = function(context, code, reason) {\n            try {\n                if (context.webSocket) {\n                    context.webSocket.close(code, reason);\n                }\n            } catch (x) {\n                this._debug(x);\n            }\n        };\n\n        _self.abort = function() {\n            _super.abort();\n            _forceClose.call(this, _context, {code: 1000, reason: 'Abort'});\n            this.reset(true);\n        };\n\n        return _self;\n    };\n\n\n    /**\n     * The constructor for a CometD object, identified by an optional name.\n     * The default name is the string 'default'.\n     * @param name the optional name of this cometd object\n     */\n    var CometD = function(name) {\n        var _scheduler = new Scheduler();\n        var _cometd = this;\n        var _name = name || 'default';\n        var _crossDomain = false;\n        var _transports = new TransportRegistry();\n        var _transport;\n        var _status = 'disconnected';\n        var _messageId = 0;\n        var _clientId = null;\n        var _batch = 0;\n        var _messageQueue = [];\n        var _internalBatch = false;\n        var _listenerId = 0;\n        var _listeners = {};\n        var _backoff = 0;\n        var _scheduledSend = null;\n        var _extensions = [];\n        var _advice = {};\n        var _handshakeProps;\n        var _handshakeCallback;\n        var _callbacks = {};\n        var _remoteCalls = {};\n        var _reestablish = false;\n        var _connected = false;\n        var _unconnectTime = 0;\n        var _handshakeMessages = 0;\n        var _metaConnect = null;\n        var _config = {\n            useWorkerScheduler: true,\n            protocol: null,\n            stickyReconnect: true,\n            connectTimeout: 0,\n            maxConnections: 2,\n            backoffIncrement: 1000,\n            maxBackoff: 60000,\n            logLevel: 'info',\n            maxNetworkDelay: 10000,\n            requestHeaders: {},\n            appendMessageTypeToURL: true,\n            autoBatch: false,\n            urls: {},\n            maxURILength: 2000,\n            advice: {\n                timeout: 60000,\n                interval: 0,\n                reconnect: undefined,\n                maxInterval: 0\n            }\n        };\n\n        function _fieldValue(object, name) {\n            try {\n                return object[name];\n            } catch (x) {\n                return undefined;\n            }\n        }\n\n        /**\n         * Mixes in the given objects into the target object by copying the properties.\n         * @param deep if the copy must be deep\n         * @param target the target object\n         * @param objects the objects whose properties are copied into the target\n         */\n        this._mixin = function(deep, target, objects) {\n            var result = target || {};\n\n            // Skip first 2 parameters (deep and target), and loop over the others\n            for (var i = 2; i < arguments.length; ++i) {\n                var object = arguments[i];\n\n                if (object === undefined || object === null) {\n                    continue;\n                }\n\n                for (var propName in object) {\n                    if (object.hasOwnProperty(propName)) {\n                        var prop = _fieldValue(object, propName);\n                        var targ = _fieldValue(result, propName);\n\n                        // Avoid infinite loops\n                        if (prop === target) {\n                            continue;\n                        }\n                        // Do not mixin undefined values\n                        if (prop === undefined) {\n                            continue;\n                        }\n\n                        if (deep && typeof prop === 'object' && prop !== null) {\n                            if (prop instanceof Array) {\n                                result[propName] = this._mixin(deep, targ instanceof Array ? targ : [], prop);\n                            } else {\n                                var source = typeof targ === 'object' && !(targ instanceof Array) ? targ : {};\n                                result[propName] = this._mixin(deep, source, prop);\n                            }\n                        } else {\n                            result[propName] = prop;\n                        }\n                    }\n                }\n            }\n\n            return result;\n        };\n\n        function _isString(value) {\n            return Utils.isString(value);\n        }\n\n        function _isFunction(value) {\n            if (value === undefined || value === null) {\n                return false;\n            }\n            return typeof value === 'function';\n        }\n\n        function _zeroPad(value, length) {\n            var result = '';\n            while (--length > 0) {\n                if (value >= Math.pow(10, length)) {\n                    break;\n                }\n                result += '0';\n            }\n            result += value;\n            return result;\n        }\n\n        function _log(level, args) {\n            if (window.console) {\n                var logger = window.console[level];\n                if (_isFunction(logger)) {\n                    var now = new Date();\n                    [].splice.call(args, 0, 0, _zeroPad(now.getHours(), 2) + ':' + _zeroPad(now.getMinutes(), 2) + ':' +\n                        _zeroPad(now.getSeconds(), 2) + '.' + _zeroPad(now.getMilliseconds(), 3));\n                    logger.apply(window.console, args);\n                }\n            }\n        }\n\n        this._warn = function() {\n            _log('warn', arguments);\n        };\n\n        this._info = function() {\n            if (_config.logLevel !== 'warn') {\n                _log('info', arguments);\n            }\n        };\n\n        this._debug = function() {\n            if (_config.logLevel === 'debug') {\n                _log('debug', arguments);\n            }\n        };\n\n        function _splitURL(url) {\n            // [1] = protocol://,\n            // [2] = host:port,\n            // [3] = host,\n            // [4] = IPv6_host,\n            // [5] = IPv4_host,\n            // [6] = :port,\n            // [7] = port,\n            // [8] = uri,\n            // [9] = rest (query / fragment)\n            return new RegExp('(^https?://)?(((\\\\[[^\\\\]]+])|([^:/?#]+))(:(\\\\d+))?)?([^?#]*)(.*)?').exec(url);\n        }\n\n        /**\n         * Returns whether the given hostAndPort is cross domain.\n         * The default implementation checks against window.location.host\n         * but this function can be overridden to make it work in non-browser\n         * environments.\n         *\n         * @param hostAndPort the host and port in format host:port\n         * @return whether the given hostAndPort is cross domain\n         */\n        this._isCrossDomain = function(hostAndPort) {\n            if (window.location && window.location.host) {\n                if (hostAndPort) {\n                    return hostAndPort !== window.location.host;\n                }\n            }\n            return false;\n        };\n\n        function _configure(configuration) {\n            _cometd._debug('Configuring cometd object with', configuration);\n            // Support old style param, where only the Bayeux server URL was passed.\n            if (_isString(configuration)) {\n                configuration = {\n                    url: configuration\n                };\n            }\n            if (!configuration) {\n                configuration = {};\n            }\n\n            _config = _cometd._mixin(false, _config, configuration);\n\n            var url = _cometd.getURL();\n            if (!url) {\n                throw 'Missing required configuration parameter \\'url\\' specifying the Bayeux server URL';\n            }\n\n            // Check if we're cross domain.\n            var urlParts = _splitURL(url);\n            var hostAndPort = urlParts[2];\n            var uri = urlParts[8];\n            var afterURI = urlParts[9];\n            _crossDomain = _cometd._isCrossDomain(hostAndPort);\n\n            // Check if appending extra path is supported.\n            if (_config.appendMessageTypeToURL) {\n                if (afterURI !== undefined && afterURI.length > 0) {\n                    _cometd._info('Appending message type to URI ' + uri + afterURI + ' is not supported, disabling \\'appendMessageTypeToURL\\' configuration');\n                    _config.appendMessageTypeToURL = false;\n                } else {\n                    var uriSegments = uri.split('/');\n                    var lastSegmentIndex = uriSegments.length - 1;\n                    if (uri.match(/\\/$/)) {\n                        lastSegmentIndex -= 1;\n                    }\n                    if (uriSegments[lastSegmentIndex].indexOf('.') >= 0) {\n                        // Very likely the CometD servlet's URL pattern is mapped to an extension, such as *.cometd\n                        // It will be difficult to add the extra path in this case\n                        _cometd._info('Appending message type to URI ' + uri + ' is not supported, disabling \\'appendMessageTypeToURL\\' configuration');\n                        _config.appendMessageTypeToURL = false;\n                    }\n                }\n            }\n\n            if (window.Worker && window.Blob && window.URL && _config.useWorkerScheduler) {\n                var code = WorkerScheduler.toString();\n                // Remove the function declaration, the opening brace and the closing brace.\n                code = code.substring(code.indexOf('{') + 1, code.lastIndexOf('}'));\n                var blob = new window.Blob([code], {\n                    type: 'application/json'\n                });\n                var blobURL = window.URL.createObjectURL(blob);\n                var worker = new window.Worker(blobURL);\n                _scheduler.setTimeout = function(funktion, delay) {\n                    var id = _scheduler.register(funktion);\n                    worker.postMessage({\n                        id: id,\n                        type: 'setTimeout',\n                        delay: delay\n                    });\n                    return id;\n                };\n                _scheduler.clearTimeout = function(id) {\n                    _scheduler.unregister(id);\n                    worker.postMessage({\n                        id: id,\n                        type: 'clearTimeout'\n                    });\n                };\n                worker.onmessage = function(e) {\n                    var id = e.data.id;\n                    var funktion = _scheduler.unregister(id);\n                    if (funktion) {\n                        funktion();\n                    }\n                };\n            }\n        }\n\n        function _removeListener(subscription) {\n            if (subscription) {\n                var subscriptions = _listeners[subscription.channel];\n                if (subscriptions && subscriptions[subscription.id]) {\n                    delete subscriptions[subscription.id];\n                    _cometd._debug('Removed', subscription.listener ? 'listener' : 'subscription', subscription);\n                }\n            }\n        }\n\n        function _removeSubscription(subscription) {\n            if (subscription && !subscription.listener) {\n                _removeListener(subscription);\n            }\n        }\n\n        function _clearSubscriptions() {\n            for (var channel in _listeners) {\n                if (_listeners.hasOwnProperty(channel)) {\n                    var subscriptions = _listeners[channel];\n                    if (subscriptions) {\n                        for (var id in subscriptions) {\n                            if (subscriptions.hasOwnProperty(id)) {\n                                _removeSubscription(subscriptions[id]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        function _setStatus(newStatus) {\n            if (_status !== newStatus) {\n                _cometd._debug('Status', _status, '->', newStatus);\n                _status = newStatus;\n            }\n        }\n\n        function _isDisconnected() {\n            return _status === 'disconnecting' || _status === 'disconnected';\n        }\n\n        function _nextMessageId() {\n            var result = ++_messageId;\n            return '' + result;\n        }\n\n        function _applyExtension(scope, callback, name, message, outgoing) {\n            try {\n                return callback.call(scope, message);\n            } catch (x) {\n                var handler = _cometd.onExtensionException;\n                if (_isFunction(handler)) {\n                    _cometd._debug('Invoking extension exception handler', name, x);\n                    try {\n                        handler.call(_cometd, x, name, outgoing, message);\n                    } catch (xx) {\n                        _cometd._info('Exception during execution of extension exception handler', name, xx);\n                    }\n                } else {\n                    _cometd._info('Exception during execution of extension', name, x);\n                }\n                return message;\n            }\n        }\n\n        function _applyIncomingExtensions(message) {\n            for (var i = 0; i < _extensions.length; ++i) {\n                if (message === undefined || message === null) {\n                    break;\n                }\n\n                var extension = _extensions[i];\n                var callback = extension.extension.incoming;\n                if (_isFunction(callback)) {\n                    var result = _applyExtension(extension.extension, callback, extension.name, message, false);\n                    message = result === undefined ? message : result;\n                }\n            }\n            return message;\n        }\n\n        function _applyOutgoingExtensions(message) {\n            for (var i = _extensions.length - 1; i >= 0; --i) {\n                if (message === undefined || message === null) {\n                    break;\n                }\n\n                var extension = _extensions[i];\n                var callback = extension.extension.outgoing;\n                if (_isFunction(callback)) {\n                    var result = _applyExtension(extension.extension, callback, extension.name, message, true);\n                    message = result === undefined ? message : result;\n                }\n            }\n            return message;\n        }\n\n        function _notify(channel, message) {\n            var subscriptions = _listeners[channel];\n            if (subscriptions) {\n                for (var id in subscriptions) {\n                    if (subscriptions.hasOwnProperty(id)) {\n                        var subscription = subscriptions[id];\n                        // Subscriptions may come and go, so the array may have 'holes'\n                        if (subscription) {\n                            try {\n                                subscription.callback.call(subscription.scope, message);\n                            } catch (x) {\n                                var handler = _cometd.onListenerException;\n                                if (_isFunction(handler)) {\n                                    _cometd._debug('Invoking listener exception handler', subscription, x);\n                                    try {\n                                        handler.call(_cometd, x, subscription, subscription.listener, message);\n                                    } catch (xx) {\n                                        _cometd._info('Exception during execution of listener exception handler', subscription, xx);\n                                    }\n                                } else {\n                                    _cometd._info('Exception during execution of listener', subscription, message, x);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        function _notifyListeners(channel, message) {\n            // Notify direct listeners\n            _notify(channel, message);\n\n            // Notify the globbing listeners\n            var channelParts = channel.split('/');\n            var last = channelParts.length - 1;\n            for (var i = last; i > 0; --i) {\n                var channelPart = channelParts.slice(0, i).join('/') + '/*';\n                // We don't want to notify /foo/* if the channel is /foo/bar/baz,\n                // so we stop at the first non recursive globbing\n                if (i === last) {\n                    _notify(channelPart, message);\n                }\n                // Add the recursive globber and notify\n                channelPart += '*';\n                _notify(channelPart, message);\n            }\n        }\n\n        function _cancelDelayedSend() {\n            if (_scheduledSend !== null) {\n                _cometd.clearTimeout(_scheduledSend);\n            }\n            _scheduledSend = null;\n        }\n\n        function _delayedSend(operation, delay) {\n            _cancelDelayedSend();\n            var time = _advice.interval + delay;\n            _cometd._debug('Function scheduled in', time, 'ms, interval =', _advice.interval, 'backoff =', _backoff, operation);\n            _scheduledSend = _cometd.setTimeout(operation, time);\n        }\n\n        // Needed to break cyclic dependencies between function definitions\n        var _handleMessages;\n        var _handleFailure;\n\n        /**\n         * Delivers the messages to the CometD server\n         * @param sync whether the send is synchronous\n         * @param messages the array of messages to send\n         * @param metaConnect true if this send is on /meta/connect\n         * @param extraPath an extra path to append to the Bayeux server URL\n         */\n        function _send(sync, messages, metaConnect, extraPath) {\n            // We must be sure that the messages have a clientId.\n            // This is not guaranteed since the handshake may take time to return\n            // (and hence the clientId is not known yet) and the application\n            // may create other messages.\n            for (var i = 0; i < messages.length; ++i) {\n                var message = messages[i];\n                var messageId = message.id;\n\n                if (_clientId) {\n                    message.clientId = _clientId;\n                }\n\n                message = _applyOutgoingExtensions(message);\n                if (message !== undefined && message !== null) {\n                    // Extensions may have modified the message id, but we need to own it.\n                    message.id = messageId;\n                    messages[i] = message;\n                } else {\n                    delete _callbacks[messageId];\n                    messages.splice(i--, 1);\n                }\n            }\n\n            if (messages.length === 0) {\n                return;\n            }\n\n            if (metaConnect) {\n                _metaConnect = messages[0];\n            }\n\n            var url = _cometd.getURL();\n            if (_config.appendMessageTypeToURL) {\n                // If url does not end with '/', then append it\n                if (!url.match(/\\/$/)) {\n                    url = url + '/';\n                }\n                if (extraPath) {\n                    url = url + extraPath;\n                }\n            }\n\n            var envelope = {\n                url: url,\n                sync: sync,\n                messages: messages,\n                onSuccess: function(rcvdMessages) {\n                    try {\n                        _handleMessages.call(_cometd, rcvdMessages);\n                    } catch (x) {\n                        _cometd._info('Exception during handling of messages', x);\n                    }\n                },\n                onFailure: function(conduit, messages, failure) {\n                    try {\n                        var transport = _cometd.getTransport();\n                        failure.connectionType = transport ? transport.getType() : \"unknown\";\n                        _handleFailure.call(_cometd, conduit, messages, failure);\n                    } catch (x) {\n                        _cometd._info('Exception during handling of failure', x);\n                    }\n                }\n            };\n            _cometd._debug('Send', envelope);\n            _transport.send(envelope, metaConnect);\n        }\n\n        function _queueSend(message) {\n            if (_batch > 0 || _internalBatch === true) {\n                _messageQueue.push(message);\n            } else {\n                _send(false, [message], false);\n            }\n        }\n\n        /**\n         * Sends a complete bayeux message.\n         * This method is exposed as a public so that extensions may use it\n         * to send bayeux message directly, for example in case of re-sending\n         * messages that have already been sent but that for some reason must\n         * be resent.\n         */\n        this.send = _queueSend;\n\n        function _resetBackoff() {\n            _backoff = 0;\n        }\n\n        function _increaseBackoff() {\n            if (_backoff < _config.maxBackoff) {\n                _backoff += _config.backoffIncrement;\n            }\n            return _backoff;\n        }\n\n        /**\n         * Starts a the batch of messages to be sent in a single request.\n         * @see #_endBatch(sendMessages)\n         */\n        function _startBatch() {\n            ++_batch;\n            _cometd._debug('Starting batch, depth', _batch);\n        }\n\n        function _flushBatch() {\n            var messages = _messageQueue;\n            _messageQueue = [];\n            if (messages.length > 0) {\n                _send(false, messages, false);\n            }\n        }\n\n        /**\n         * Ends the batch of messages to be sent in a single request,\n         * optionally sending messages present in the message queue depending\n         * on the given argument.\n         * @see #_startBatch()\n         */\n        function _endBatch() {\n            --_batch;\n            _cometd._debug('Ending batch, depth', _batch);\n            if (_batch < 0) {\n                throw 'Calls to startBatch() and endBatch() are not paired';\n            }\n\n            if (_batch === 0 && !_isDisconnected() && !_internalBatch) {\n                _flushBatch();\n            }\n        }\n\n        /**\n         * Sends the connect message\n         */\n        function _connect() {\n            if (!_isDisconnected()) {\n                var bayeuxMessage = {\n                    id: _nextMessageId(),\n                    channel: '/meta/connect',\n                    connectionType: _transport.getType()\n                };\n\n                // In case of reload or temporary loss of connection\n                // we want the next successful connect to return immediately\n                // instead of being held by the server, so that connect listeners\n                // can be notified that the connection has been re-established\n                if (!_connected) {\n                    bayeuxMessage.advice = {\n                        timeout: 0\n                    };\n                }\n\n                _setStatus('connecting');\n                _cometd._debug('Connect sent', bayeuxMessage);\n                _send(false, [bayeuxMessage], true, 'connect');\n                _setStatus('connected');\n            }\n        }\n\n        function _delayedConnect(delay) {\n            _setStatus('connecting');\n            _delayedSend(function() {\n                _connect();\n            }, delay);\n        }\n\n        function _updateAdvice(newAdvice) {\n            if (newAdvice) {\n                _advice = _cometd._mixin(false, {}, _config.advice, newAdvice);\n                _cometd._debug('New advice', _advice);\n            }\n        }\n\n        function _disconnect(abort) {\n            _cancelDelayedSend();\n            if (abort && _transport) {\n                _transport.abort();\n            }\n            _crossDomain = false;\n            _transport = null;\n            _setStatus('disconnected');\n            _clientId = null;\n            _batch = 0;\n            _resetBackoff();\n            _reestablish = false;\n            _connected = false;\n            _unconnectTime = 0;\n            _metaConnect = null;\n\n            // Fail any existing queued message\n            if (_messageQueue.length > 0) {\n                var messages = _messageQueue;\n                _messageQueue = [];\n                _handleFailure.call(_cometd, undefined, messages, {\n                    reason: 'Disconnected'\n                });\n            }\n        }\n\n        function _notifyTransportException(oldTransport, newTransport, failure) {\n            var handler = _cometd.onTransportException;\n            if (_isFunction(handler)) {\n                _cometd._debug('Invoking transport exception handler', oldTransport, newTransport, failure);\n                try {\n                    handler.call(_cometd, failure, oldTransport, newTransport);\n                } catch (x) {\n                    _cometd._info('Exception during execution of transport exception handler', x);\n                }\n            }\n        }\n\n        /**\n         * Sends the initial handshake message\n         */\n        function _handshake(handshakeProps, handshakeCallback) {\n            if (_isFunction(handshakeProps)) {\n                handshakeCallback = handshakeProps;\n                handshakeProps = undefined;\n            }\n\n            _clientId = null;\n\n            _clearSubscriptions();\n\n            // Reset the transports if we're not retrying the handshake\n            if (_isDisconnected()) {\n                _transports.reset(true);\n            }\n\n            // Reset the advice.\n            _updateAdvice({});\n\n            _batch = 0;\n\n            // Mark the start of an internal batch.\n            // This is needed because handshake and connect are async.\n            // It may happen that the application calls init() then subscribe()\n            // and the subscribe message is sent before the connect message, if\n            // the subscribe message is not held until the connect message is sent.\n            // So here we start a batch to hold temporarily any message until\n            // the connection is fully established.\n            _internalBatch = true;\n\n            // Save the properties provided by the user, so that\n            // we can reuse them during automatic re-handshake\n            _handshakeProps = handshakeProps;\n            _handshakeCallback = handshakeCallback;\n\n            var version = '1.0';\n\n            // Figure out the transports to send to the server\n            var url = _cometd.getURL();\n            var transportTypes = _transports.findTransportTypes(version, _crossDomain, url);\n\n            var bayeuxMessage = {\n                id: _nextMessageId(),\n                version: version,\n                minimumVersion: version,\n                channel: '/meta/handshake',\n                supportedConnectionTypes: transportTypes,\n                advice: {\n                    timeout: _advice.timeout,\n                    interval: _advice.interval\n                }\n            };\n            // Do not allow the user to override important fields.\n            var message = _cometd._mixin(false, {}, _handshakeProps, bayeuxMessage);\n\n            // Save the callback.\n            _cometd._putCallback(message.id, handshakeCallback);\n\n            // Pick up the first available transport as initial transport\n            // since we don't know if the server supports it\n            if (!_transport) {\n                _transport = _transports.negotiateTransport(transportTypes, version, _crossDomain, url);\n                if (!_transport) {\n                    var failure = 'Could not find initial transport among: ' + _transports.getTransportTypes();\n                    _cometd._warn(failure);\n                    throw failure;\n                }\n            }\n\n            _cometd._debug('Initial transport is', _transport.getType());\n\n            // We started a batch to hold the application messages,\n            // so here we must bypass it and send immediately.\n            _setStatus('handshaking');\n            _cometd._debug('Handshake sent', message);\n            _send(false, [message], false, 'handshake');\n        }\n\n        function _delayedHandshake(delay) {\n            _setStatus('handshaking');\n\n            // We will call _handshake() which will reset _clientId, but we want to avoid\n            // that between the end of this method and the call to _handshake() someone may\n            // call publish() (or other methods that call _queueSend()).\n            _internalBatch = true;\n\n            _delayedSend(function() {\n                _handshake(_handshakeProps, _handshakeCallback);\n            }, delay);\n        }\n\n        function _notifyCallback(callback, message) {\n            try {\n                callback.call(_cometd, message);\n            } catch (x) {\n                var handler = _cometd.onCallbackException;\n                if (_isFunction(handler)) {\n                    _cometd._debug('Invoking callback exception handler', x);\n                    try {\n                        handler.call(_cometd, x, message);\n                    } catch (xx) {\n                        _cometd._info('Exception during execution of callback exception handler', xx);\n                    }\n                } else {\n                    _cometd._info('Exception during execution of message callback', x);\n                }\n            }\n        }\n\n        this._getCallback = function(messageId) {\n            return _callbacks[messageId];\n        };\n\n        this._putCallback = function(messageId, callback) {\n            var result = this._getCallback(messageId);\n            if (_isFunction(callback)) {\n                _callbacks[messageId] = callback;\n            }\n            return result;\n        };\n\n        function _handleCallback(message) {\n            var callback = _cometd._getCallback([message.id]);\n            if (_isFunction(callback)) {\n                delete _callbacks[message.id];\n                _notifyCallback(callback, message);\n            }\n        }\n\n        function _handleRemoteCall(message) {\n            var context = _remoteCalls[message.id];\n            delete _remoteCalls[message.id];\n            if (context) {\n                _cometd._debug('Handling remote call response for', message, 'with context', context);\n\n                // Clear the timeout, if present.\n                var timeout = context.timeout;\n                if (timeout) {\n                    _cometd.clearTimeout(timeout);\n                }\n\n                var callback = context.callback;\n                if (_isFunction(callback)) {\n                    _notifyCallback(callback, message);\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        this.onTransportFailure = function(message, failureInfo, failureHandler) {\n            this._debug('Transport failure', failureInfo, 'for', message);\n\n            var transports = this.getTransportRegistry();\n            var url = this.getURL();\n            var crossDomain = this._isCrossDomain(_splitURL(url)[2]);\n            var version = '1.0';\n            var transportTypes = transports.findTransportTypes(version, crossDomain, url);\n\n            if (failureInfo.action === 'none') {\n                if (message.channel === '/meta/handshake') {\n                    if (!failureInfo.transport) {\n                        var failure = 'Could not negotiate transport, client=[' + transportTypes + '], server=[' + message.supportedConnectionTypes + ']';\n                        this._warn(failure);\n                        _notifyTransportException(_transport.getType(), null, {\n                            reason: failure,\n                            connectionType: _transport.getType(),\n                            transport: _transport\n                        });\n                    }\n                }\n            } else {\n                failureInfo.delay = this.getBackoffPeriod();\n                // Different logic depending on whether we are handshaking or connecting.\n                if (message.channel === '/meta/handshake') {\n                    if (!failureInfo.transport) {\n                        // The transport is invalid, try to negotiate again.\n                        var newTransport = transports.negotiateTransport(transportTypes, version, crossDomain, url);\n                        if (!newTransport) {\n                            this._warn('Could not negotiate transport, client=[' + transportTypes + ']');\n                            _notifyTransportException(_transport.getType(), null, message.failure);\n                            failureInfo.action = 'none';\n                        } else {\n                            this._debug('Transport', _transport.getType(), '->', newTransport.getType());\n                            _notifyTransportException(_transport.getType(), newTransport.getType(), message.failure);\n                            failureInfo.action = 'handshake';\n                            failureInfo.transport = newTransport;\n                        }\n                    }\n\n                    if (failureInfo.action !== 'none') {\n                        this.increaseBackoffPeriod();\n                    }\n                } else {\n                    var now = new Date().getTime();\n\n                    if (_unconnectTime === 0) {\n                        _unconnectTime = now;\n                    }\n\n                    if (failureInfo.action === 'retry') {\n                        failureInfo.delay = this.increaseBackoffPeriod();\n                        // Check whether we may switch to handshaking.\n                        var maxInterval = _advice.maxInterval;\n                        if (maxInterval > 0) {\n                            var expiration = _advice.timeout + _advice.interval + maxInterval;\n                            var unconnected = now - _unconnectTime;\n                            if (unconnected + _backoff > expiration) {\n                                failureInfo.action = 'handshake';\n                            }\n                        }\n                    }\n\n                    if (failureInfo.action === 'handshake') {\n                        failureInfo.delay = 0;\n                        transports.reset(false);\n                        this.resetBackoffPeriod();\n                    }\n                }\n            }\n\n            failureHandler.call(_cometd, failureInfo);\n        };\n\n        function _handleTransportFailure(failureInfo) {\n            _cometd._debug('Transport failure handling', failureInfo);\n\n            if (failureInfo.transport) {\n                _transport = failureInfo.transport;\n            }\n\n            if (failureInfo.url) {\n                _transport.setURL(failureInfo.url);\n            }\n\n            var action = failureInfo.action;\n            var delay = failureInfo.delay || 0;\n            switch (action) {\n                case 'handshake':\n                    _delayedHandshake(delay);\n                    break;\n                case 'retry':\n                    _delayedConnect(delay);\n                    break;\n                case 'none':\n                    _disconnect(true);\n                    break;\n                default:\n                    throw 'Unknown action ' + action;\n            }\n        }\n\n        function _failHandshake(message, failureInfo) {\n            _handleCallback(message);\n            _notifyListeners('/meta/handshake', message);\n            _notifyListeners('/meta/unsuccessful', message);\n\n            // The listeners may have disconnected.\n            if (_isDisconnected()) {\n                failureInfo.action = 'none';\n            }\n\n            _cometd.onTransportFailure.call(_cometd, message, failureInfo, _handleTransportFailure);\n        }\n\n        function _handshakeResponse(message) {\n            var url = _cometd.getURL();\n            if (message.successful) {\n                var crossDomain = _cometd._isCrossDomain(_splitURL(url)[2]);\n                var newTransport = _transports.negotiateTransport(message.supportedConnectionTypes, message.version, crossDomain, url);\n                if (newTransport === null) {\n                    message.successful = false;\n                    _failHandshake(message, {\n                        cause: 'negotiation',\n                        action: 'none',\n                        transport: null\n                    });\n                    return;\n                } else if (_transport !== newTransport) {\n                    _cometd._debug('Transport', _transport.getType(), '->', newTransport.getType());\n                    _transport = newTransport;\n                }\n\n                _clientId = message.clientId;\n\n                // End the internal batch and allow held messages from the application\n                // to go to the server (see _handshake() where we start the internal batch).\n                _internalBatch = false;\n                _flushBatch();\n\n                // Here the new transport is in place, as well as the clientId, so\n                // the listeners can perform a publish() if they want.\n                // Notify the listeners before the connect below.\n                message.reestablish = _reestablish;\n                _reestablish = true;\n\n                _handleCallback(message);\n                _notifyListeners('/meta/handshake', message);\n\n                _handshakeMessages = message['x-messages'] || 0;\n\n                var action = _isDisconnected() ? 'none' : _advice.reconnect || 'retry';\n                switch (action) {\n                    case 'retry':\n                        _resetBackoff();\n                        if (_handshakeMessages === 0) {\n                            _delayedConnect(0);\n                        } else {\n                            _cometd._debug('Processing', _handshakeMessages, 'handshake-delivered messages');\n                        }\n                        break;\n                    case 'none':\n                        _disconnect(true);\n                        break;\n                    default:\n                        throw 'Unrecognized advice action ' + action;\n                }\n            } else {\n                _failHandshake(message, {\n                    cause: 'unsuccessful',\n                    action: _advice.reconnect || 'handshake',\n                    transport: _transport\n                });\n            }\n        }\n\n        function _handshakeFailure(message) {\n            _failHandshake(message, {\n                cause: 'failure',\n                action: 'handshake',\n                transport: null\n            });\n        }\n\n        function _matchMetaConnect(connect) {\n            if (_status === 'disconnected') {\n                return true;\n            }\n            if (_metaConnect && _metaConnect.id === connect.id) {\n                _metaConnect = null;\n                return true;\n            }\n            return false;\n        }\n\n        function _failConnect(message, failureInfo) {\n            // Notify the listeners after the status change but before the next action.\n            _notifyListeners('/meta/connect', message);\n            _notifyListeners('/meta/unsuccessful', message);\n\n            // The listeners may have disconnected.\n            if (_isDisconnected()) {\n                failureInfo.action = 'none';\n            }\n\n            _cometd.onTransportFailure.call(_cometd, message, failureInfo, _handleTransportFailure);\n        }\n\n        function _connectResponse(message) {\n            if (_matchMetaConnect(message)) {\n                _connected = message.successful;\n                if (_connected) {\n                    _notifyListeners('/meta/connect', message);\n\n                    // Normally, the advice will say \"reconnect: 'retry', interval: 0\"\n                    // and the server will hold the request, so when a response returns\n                    // we immediately call the server again (long polling).\n                    // Listeners can call disconnect(), so check the state after they run.\n                    var action = _isDisconnected() ? 'none' : _advice.reconnect || 'retry';\n                    switch (action) {\n                        case 'retry':\n                            _resetBackoff();\n                            _delayedConnect(_backoff);\n                            break;\n                        case 'none':\n                            _disconnect(false);\n                            break;\n                        default:\n                            throw 'Unrecognized advice action ' + action;\n                    }\n                } else {\n                    _failConnect(message, {\n                        cause: 'unsuccessful',\n                        action: _advice.reconnect || 'retry',\n                        transport: _transport\n                    });\n                }\n            } else {\n                _cometd._debug('Mismatched /meta/connect reply', message);\n            }\n        }\n\n        function _connectFailure(message) {\n            if (_matchMetaConnect(message)) {\n                _connected = false;\n                _failConnect(message, {\n                    cause: 'failure',\n                    action: 'retry',\n                    transport: null\n                });\n            } else {\n                _cometd._debug('Mismatched /meta/connect failure', message);\n            }\n        }\n\n        function _failDisconnect(message) {\n            _disconnect(true);\n            _handleCallback(message);\n            _notifyListeners('/meta/disconnect', message);\n            _notifyListeners('/meta/unsuccessful', message);\n        }\n\n        function _disconnectResponse(message) {\n            if (message.successful) {\n                // Wait for the /meta/connect to arrive.\n                _disconnect(false);\n                _handleCallback(message);\n                _notifyListeners('/meta/disconnect', message);\n            } else {\n                _failDisconnect(message);\n            }\n        }\n\n        function _disconnectFailure(message) {\n            _failDisconnect(message);\n        }\n\n        function _failSubscribe(message) {\n            var subscriptions = _listeners[message.subscription];\n            if (subscriptions) {\n                for (var id in subscriptions) {\n                    if (subscriptions.hasOwnProperty(id)) {\n                        var subscription = subscriptions[id];\n                        if (subscription && !subscription.listener) {\n                            delete subscriptions[id];\n                            _cometd._debug('Removed failed subscription', subscription);\n                        }\n                    }\n                }\n            }\n            _handleCallback(message);\n            _notifyListeners('/meta/subscribe', message);\n            _notifyListeners('/meta/unsuccessful', message);\n        }\n\n        function _subscribeResponse(message) {\n            if (message.successful) {\n                _handleCallback(message);\n                _notifyListeners('/meta/subscribe', message);\n            } else {\n                _failSubscribe(message);\n            }\n        }\n\n        function _subscribeFailure(message) {\n            _failSubscribe(message);\n        }\n\n        function _failUnsubscribe(message) {\n            _handleCallback(message);\n            _notifyListeners('/meta/unsubscribe', message);\n            _notifyListeners('/meta/unsuccessful', message);\n        }\n\n        function _unsubscribeResponse(message) {\n            if (message.successful) {\n                _handleCallback(message);\n                _notifyListeners('/meta/unsubscribe', message);\n            } else {\n                _failUnsubscribe(message);\n            }\n        }\n\n        function _unsubscribeFailure(message) {\n            _failUnsubscribe(message);\n        }\n\n        function _failMessage(message) {\n            if (!_handleRemoteCall(message)) {\n                _handleCallback(message);\n                _notifyListeners('/meta/publish', message);\n                _notifyListeners('/meta/unsuccessful', message);\n            }\n        }\n\n        function _messageResponse(message) {\n            if (message.data !== undefined) {\n                if (!_handleRemoteCall(message)) {\n                    _notifyListeners(message.channel, message);\n                    if (_handshakeMessages > 0) {\n                        --_handshakeMessages;\n                        if (_handshakeMessages === 0) {\n                            _cometd._debug('Processed last handshake-delivered message');\n                            _delayedConnect(0);\n                        }\n                    }\n                }\n            } else {\n                if (message.successful === undefined) {\n                    _cometd._warn('Unknown Bayeux Message', message);\n                } else {\n                    if (message.successful) {\n                        _handleCallback(message);\n                        _notifyListeners('/meta/publish', message);\n                    } else {\n                        _failMessage(message);\n                    }\n                }\n            }\n        }\n\n        function _messageFailure(failure) {\n            _failMessage(failure);\n        }\n\n        function _receive(message) {\n            _unconnectTime = 0;\n\n            message = _applyIncomingExtensions(message);\n            if (message === undefined || message === null) {\n                return;\n            }\n\n            _updateAdvice(message.advice);\n\n            var channel = message.channel;\n            switch (channel) {\n                case '/meta/handshake':\n                    _handshakeResponse(message);\n                    break;\n                case '/meta/connect':\n                    _connectResponse(message);\n                    break;\n                case '/meta/disconnect':\n                    _disconnectResponse(message);\n                    break;\n                case '/meta/subscribe':\n                    _subscribeResponse(message);\n                    break;\n                case '/meta/unsubscribe':\n                    _unsubscribeResponse(message);\n                    break;\n                default:\n                    _messageResponse(message);\n                    break;\n            }\n        }\n\n        /**\n         * Receives a message.\n         * This method is exposed as a public so that extensions may inject\n         * messages simulating that they had been received.\n         */\n        this.receive = _receive;\n\n        _handleMessages = function(rcvdMessages) {\n            _cometd._debug('Received', rcvdMessages);\n\n            for (var i = 0; i < rcvdMessages.length; ++i) {\n                var message = rcvdMessages[i];\n                _receive(message);\n            }\n        };\n\n        _handleFailure = function(conduit, messages, failure) {\n            _cometd._debug('handleFailure', conduit, messages, failure);\n\n            failure.transport = conduit;\n            for (var i = 0; i < messages.length; ++i) {\n                var message = messages[i];\n                var failureMessage = {\n                    id: message.id,\n                    successful: false,\n                    channel: message.channel,\n                    failure: failure\n                };\n                failure.message = message;\n                switch (message.channel) {\n                    case '/meta/handshake':\n                        _handshakeFailure(failureMessage);\n                        break;\n                    case '/meta/connect':\n                        _connectFailure(failureMessage);\n                        break;\n                    case '/meta/disconnect':\n                        _disconnectFailure(failureMessage);\n                        break;\n                    case '/meta/subscribe':\n                        failureMessage.subscription = message.subscription;\n                        _subscribeFailure(failureMessage);\n                        break;\n                    case '/meta/unsubscribe':\n                        failureMessage.subscription = message.subscription;\n                        _unsubscribeFailure(failureMessage);\n                        break;\n                    default:\n                        _messageFailure(failureMessage);\n                        break;\n                }\n            }\n        };\n\n        function _hasSubscriptions(channel) {\n            var subscriptions = _listeners[channel];\n            if (subscriptions) {\n                for (var id in subscriptions) {\n                    if (subscriptions.hasOwnProperty(id)) {\n                        if (subscriptions[id]) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n\n        function _resolveScopedCallback(scope, callback) {\n            var delegate = {\n                scope: scope,\n                method: callback\n            };\n            if (_isFunction(scope)) {\n                delegate.scope = undefined;\n                delegate.method = scope;\n            } else {\n                if (_isString(callback)) {\n                    if (!scope) {\n                        throw 'Invalid scope ' + scope;\n                    }\n                    delegate.method = scope[callback];\n                    if (!_isFunction(delegate.method)) {\n                        throw 'Invalid callback ' + callback + ' for scope ' + scope;\n                    }\n                } else if (!_isFunction(callback)) {\n                    throw 'Invalid callback ' + callback;\n                }\n            }\n            return delegate;\n        }\n\n        function _addListener(channel, scope, callback, isListener) {\n            // The data structure is a map<channel, subscription[]>, where each subscription\n            // holds the callback to be called and its scope.\n\n            var delegate = _resolveScopedCallback(scope, callback);\n            _cometd._debug('Adding', isListener ? 'listener' : 'subscription', 'on', channel, 'with scope', delegate.scope, 'and callback', delegate.method);\n\n            var id = ++_listenerId;\n            var subscription = {\n                id: id,\n                channel: channel,\n                scope: delegate.scope,\n                callback: delegate.method,\n                listener: isListener\n            };\n\n            var subscriptions = _listeners[channel];\n            if (!subscriptions) {\n                subscriptions = {};\n                _listeners[channel] = subscriptions;\n            }\n\n            subscriptions[id] = subscription;\n\n            _cometd._debug('Added', isListener ? 'listener' : 'subscription', subscription);\n\n            return subscription;\n        }\n\n        //\n        // PUBLIC API\n        //\n\n        /**\n         * Registers the given transport under the given transport type.\n         * The optional index parameter specifies the \"priority\" at which the\n         * transport is registered (where 0 is the max priority).\n         * If a transport with the same type is already registered, this function\n         * does nothing and returns false.\n         * @param type the transport type\n         * @param transport the transport object\n         * @param index the index at which this transport is to be registered\n         * @return true if the transport has been registered, false otherwise\n         * @see #unregisterTransport(type)\n         */\n        this.registerTransport = function(type, transport, index) {\n            var result = _transports.add(type, transport, index);\n            if (result) {\n                this._debug('Registered transport', type);\n\n                if (_isFunction(transport.registered)) {\n                    transport.registered(type, this);\n                }\n            }\n            return result;\n        };\n\n        /**\n         * Unregisters the transport with the given transport type.\n         * @param type the transport type to unregister\n         * @return the transport that has been unregistered,\n         * or null if no transport was previously registered under the given transport type\n         */\n        this.unregisterTransport = function(type) {\n            var transport = _transports.remove(type);\n            if (transport !== null) {\n                this._debug('Unregistered transport', type);\n\n                if (_isFunction(transport.unregistered)) {\n                    transport.unregistered();\n                }\n            }\n            return transport;\n        };\n\n        this.unregisterTransports = function() {\n            _transports.clear();\n        };\n\n        /**\n         * @return an array of all registered transport types\n         */\n        this.getTransportTypes = function() {\n            return _transports.getTransportTypes();\n        };\n\n        this.findTransport = function(name) {\n            return _transports.find(name);\n        };\n\n        /**\n         * @returns the TransportRegistry object\n         */\n        this.getTransportRegistry = function() {\n            return _transports;\n        };\n\n        /**\n         * Configures the initial Bayeux communication with the Bayeux server.\n         * Configuration is passed via an object that must contain a mandatory field <code>url</code>\n         * of type string containing the URL of the Bayeux server.\n         * @param configuration the configuration object\n         */\n        this.configure = function(configuration) {\n            _configure.call(this, configuration);\n        };\n\n        /**\n         * Configures and establishes the Bayeux communication with the Bayeux server\n         * via a handshake and a subsequent connect.\n         * @param configuration the configuration object\n         * @param handshakeProps an object to be merged with the handshake message\n         * @see #configure(configuration)\n         * @see #handshake(handshakeProps)\n         */\n        this.init = function(configuration, handshakeProps) {\n            this.configure(configuration);\n            this.handshake(handshakeProps);\n        };\n\n        /**\n         * Establishes the Bayeux communication with the Bayeux server\n         * via a handshake and a subsequent connect.\n         * @param handshakeProps an object to be merged with the handshake message\n         * @param handshakeCallback a function to be invoked when the handshake is acknowledged\n         */\n        this.handshake = function(handshakeProps, handshakeCallback) {\n            if (_status !== 'disconnected') {\n                throw 'Illegal state: handshaken';\n            }\n            _handshake(handshakeProps, handshakeCallback);\n        };\n\n        /**\n         * Disconnects from the Bayeux server.\n         * It is possible to suggest to attempt a synchronous disconnect, but this feature\n         * may only be available in certain transports (for example, long-polling may support\n         * it, callback-polling certainly does not).\n         * @param sync whether attempt to perform a synchronous disconnect\n         * @param disconnectProps an object to be merged with the disconnect message\n         * @param disconnectCallback a function to be invoked when the disconnect is acknowledged\n         */\n        this.disconnect = function(sync, disconnectProps, disconnectCallback) {\n            if (_isDisconnected()) {\n                return;\n            }\n\n            if (typeof sync !== 'boolean') {\n                disconnectCallback = disconnectProps;\n                disconnectProps = sync;\n                sync = false;\n            }\n            if (_isFunction(disconnectProps)) {\n                disconnectCallback = disconnectProps;\n                disconnectProps = undefined;\n            }\n\n            var bayeuxMessage = {\n                id: _nextMessageId(),\n                channel: '/meta/disconnect'\n            };\n            // Do not allow the user to override important fields.\n            var message = this._mixin(false, {}, disconnectProps, bayeuxMessage);\n\n            // Save the callback.\n            _cometd._putCallback(message.id, disconnectCallback);\n\n            _setStatus('disconnecting');\n            _send(sync === true, [message], false, 'disconnect');\n        };\n\n        /**\n         * Marks the start of a batch of application messages to be sent to the server\n         * in a single request, obtaining a single response containing (possibly) many\n         * application reply messages.\n         * Messages are held in a queue and not sent until {@link #endBatch()} is called.\n         * If startBatch() is called multiple times, then an equal number of endBatch()\n         * calls must be made to close and send the batch of messages.\n         * @see #endBatch()\n         */\n        this.startBatch = function() {\n            _startBatch();\n        };\n\n        /**\n         * Marks the end of a batch of application messages to be sent to the server\n         * in a single request.\n         * @see #startBatch()\n         */\n        this.endBatch = function() {\n            _endBatch();\n        };\n\n        /**\n         * Executes the given callback in the given scope, surrounded by a {@link #startBatch()}\n         * and {@link #endBatch()} calls.\n         * @param scope the scope of the callback, may be omitted\n         * @param callback the callback to be executed within {@link #startBatch()} and {@link #endBatch()} calls\n         */\n        this.batch = function(scope, callback) {\n            var delegate = _resolveScopedCallback(scope, callback);\n            this.startBatch();\n            try {\n                delegate.method.call(delegate.scope);\n                this.endBatch();\n            } catch (x) {\n                this._info('Exception during execution of batch', x);\n                this.endBatch();\n                throw x;\n            }\n        };\n\n        /**\n         * Adds a listener for bayeux messages, performing the given callback in the given scope\n         * when a message for the given channel arrives.\n         * @param channel the channel the listener is interested to\n         * @param scope the scope of the callback, may be omitted\n         * @param callback the callback to call when a message is sent to the channel\n         * @returns the subscription handle to be passed to {@link #removeListener(object)}\n         * @see #removeListener(subscription)\n         */\n        this.addListener = function(channel, scope, callback) {\n            if (arguments.length < 2) {\n                throw 'Illegal arguments number: required 2, got ' + arguments.length;\n            }\n            if (!_isString(channel)) {\n                throw 'Illegal argument type: channel must be a string';\n            }\n\n            return _addListener(channel, scope, callback, true);\n        };\n\n        /**\n         * Removes the subscription obtained with a call to {@link #addListener(string, object, function)}.\n         * @param subscription the subscription to unsubscribe.\n         * @see #addListener(channel, scope, callback)\n         */\n        this.removeListener = function(subscription) {\n            // Beware of subscription.id == 0, which is falsy => cannot use !subscription.id\n            if (!subscription || !subscription.channel || !(\"id\" in subscription)) {\n                throw 'Invalid argument: expected subscription, not ' + subscription;\n            }\n\n            _removeListener(subscription);\n        };\n\n        /**\n         * Removes all listeners registered with {@link #addListener(channel, scope, callback)} or\n         * {@link #subscribe(channel, scope, callback)}.\n         */\n        this.clearListeners = function() {\n            _listeners = {};\n        };\n\n        /**\n         * Subscribes to the given channel, performing the given callback in the given scope\n         * when a message for the channel arrives.\n         * @param channel the channel to subscribe to\n         * @param scope the scope of the callback, may be omitted\n         * @param callback the callback to call when a message is sent to the channel\n         * @param subscribeProps an object to be merged with the subscribe message\n         * @param subscribeCallback a function to be invoked when the subscription is acknowledged\n         * @return the subscription handle to be passed to {@link #unsubscribe(object)}\n         */\n        this.subscribe = function(channel, scope, callback, subscribeProps, subscribeCallback) {\n            if (arguments.length < 2) {\n                throw 'Illegal arguments number: required 2, got ' + arguments.length;\n            }\n            if (!_isString(channel)) {\n                throw 'Illegal argument type: channel must be a string';\n            }\n            if (_isDisconnected()) {\n                throw 'Illegal state: disconnected';\n            }\n\n            // Normalize arguments\n            if (_isFunction(scope)) {\n                subscribeCallback = subscribeProps;\n                subscribeProps = callback;\n                callback = scope;\n                scope = undefined;\n            }\n            if (_isFunction(subscribeProps)) {\n                subscribeCallback = subscribeProps;\n                subscribeProps = undefined;\n            }\n\n            // Only send the message to the server if this client has not yet subscribed to the channel\n            var send = !_hasSubscriptions(channel);\n\n            var subscription = _addListener(channel, scope, callback, false);\n\n            if (send) {\n                // Send the subscription message after the subscription registration to avoid\n                // races where the server would send a message to the subscribers, but here\n                // on the client the subscription has not been added yet to the data structures\n                var bayeuxMessage = {\n                    id: _nextMessageId(),\n                    channel: '/meta/subscribe',\n                    subscription: channel\n                };\n                // Do not allow the user to override important fields.\n                var message = this._mixin(false, {}, subscribeProps, bayeuxMessage);\n\n                // Save the callback.\n                _cometd._putCallback(message.id, subscribeCallback);\n\n                _queueSend(message);\n            }\n\n            return subscription;\n        };\n\n        /**\n         * Unsubscribes the subscription obtained with a call to {@link #subscribe(string, object, function)}.\n         * @param subscription the subscription to unsubscribe.\n         * @param unsubscribeProps an object to be merged with the unsubscribe message\n         * @param unsubscribeCallback a function to be invoked when the unsubscription is acknowledged\n         */\n        this.unsubscribe = function(subscription, unsubscribeProps, unsubscribeCallback) {\n            if (arguments.length < 1) {\n                throw 'Illegal arguments number: required 1, got ' + arguments.length;\n            }\n            if (_isDisconnected()) {\n                throw 'Illegal state: disconnected';\n            }\n\n            if (_isFunction(unsubscribeProps)) {\n                unsubscribeCallback = unsubscribeProps;\n                unsubscribeProps = undefined;\n            }\n\n            // Remove the local listener before sending the message\n            // This ensures that if the server fails, this client does not get notifications\n            this.removeListener(subscription);\n\n            var channel = subscription.channel;\n            // Only send the message to the server if this client unsubscribes the last subscription\n            if (!_hasSubscriptions(channel)) {\n                var bayeuxMessage = {\n                    id: _nextMessageId(),\n                    channel: '/meta/unsubscribe',\n                    subscription: channel\n                };\n                // Do not allow the user to override important fields.\n                var message = this._mixin(false, {}, unsubscribeProps, bayeuxMessage);\n\n                // Save the callback.\n                _cometd._putCallback(message.id, unsubscribeCallback);\n\n                _queueSend(message);\n            }\n        };\n\n        this.resubscribe = function(subscription, subscribeProps) {\n            _removeSubscription(subscription);\n            if (subscription) {\n                return this.subscribe(subscription.channel, subscription.scope, subscription.callback, subscribeProps);\n            }\n            return undefined;\n        };\n\n        /**\n         * Removes all subscriptions added via {@link #subscribe(channel, scope, callback, subscribeProps)},\n         * but does not remove the listeners added via {@link addListener(channel, scope, callback)}.\n         */\n        this.clearSubscriptions = function() {\n            _clearSubscriptions();\n        };\n\n        /**\n         * Publishes a message on the given channel, containing the given content.\n         * @param channel the channel to publish the message to\n         * @param content the content of the message\n         * @param publishProps an object to be merged with the publish message\n         * @param publishCallback a function to be invoked when the publish is acknowledged by the server\n         */\n        this.publish = function(channel, content, publishProps, publishCallback) {\n            if (arguments.length < 1) {\n                throw 'Illegal arguments number: required 1, got ' + arguments.length;\n            }\n            if (!_isString(channel)) {\n                throw 'Illegal argument type: channel must be a string';\n            }\n            if (/^\\/meta\\//.test(channel)) {\n                throw 'Illegal argument: cannot publish to meta channels';\n            }\n            if (_isDisconnected()) {\n                throw 'Illegal state: disconnected';\n            }\n\n            if (_isFunction(content)) {\n                publishCallback = content;\n                content = {};\n                publishProps = undefined;\n            } else if (_isFunction(publishProps)) {\n                publishCallback = publishProps;\n                publishProps = undefined;\n            }\n\n            var bayeuxMessage = {\n                id: _nextMessageId(),\n                channel: channel,\n                data: content\n            };\n            // Do not allow the user to override important fields.\n            var message = this._mixin(false, {}, publishProps, bayeuxMessage);\n\n            // Save the callback.\n            _cometd._putCallback(message.id, publishCallback);\n\n            _queueSend(message);\n        };\n\n        /**\n         * Publishes a message with binary data on the given channel.\n         * The binary data chunk may be an ArrayBuffer, a DataView, a TypedArray\n         * (such as Uint8Array) or a plain integer array.\n         * The meta data object may contain additional application data such as\n         * a file name, a mime type, etc.\n         * @param channel the channel to publish the message to\n         * @param data the binary data to publish\n         * @param last whether the binary data chunk is the last\n         * @param meta an object containing meta data associated to the binary chunk\n         * @param callback a function to be invoked when the publish is acknowledged by the server\n         */\n        this.publishBinary = function(channel, data, last, meta, callback) {\n            if (_isFunction(data)) {\n                callback = data;\n                data = new ArrayBuffer(0);\n                last = true;\n                meta = undefined;\n            } else if (_isFunction(last)) {\n                callback = last;\n                last = true;\n                meta = undefined;\n            } else if (_isFunction(meta)) {\n                callback = meta;\n                meta = undefined;\n            }\n            var content = {\n                meta: meta,\n                data: data,\n                last: last\n            };\n            var ext = {\n                ext: {\n                    binary: {}\n                }\n            };\n            this.publish(channel, content, ext, callback);\n        };\n\n        this.remoteCall = function(target, content, timeout, callProps, callback) {\n            if (arguments.length < 1) {\n                throw 'Illegal arguments number: required 1, got ' + arguments.length;\n            }\n            if (!_isString(target)) {\n                throw 'Illegal argument type: target must be a string';\n            }\n            if (_isDisconnected()) {\n                throw 'Illegal state: disconnected';\n            }\n\n            if (_isFunction(content)) {\n                callback = content;\n                content = {};\n                timeout = _config.maxNetworkDelay;\n                callProps = undefined;\n            } else if (_isFunction(timeout)) {\n                callback = timeout;\n                timeout = _config.maxNetworkDelay;\n                callProps = undefined;\n            } else if (_isFunction(callProps)) {\n                callback = callProps;\n                callProps = undefined;\n            }\n\n            if (typeof timeout !== 'number') {\n                throw 'Illegal argument type: timeout must be a number';\n            }\n\n            if (!target.match(/^\\//)) {\n                target = '/' + target;\n            }\n            var channel = '/service' + target;\n\n            var bayeuxMessage = {\n                id: _nextMessageId(),\n                channel: channel,\n                data: content\n            };\n            var message = this._mixin(false, {}, callProps, bayeuxMessage);\n\n            var context = {\n                callback: callback\n            };\n            if (timeout > 0) {\n                context.timeout = _cometd.setTimeout(function() {\n                    _cometd._debug('Timing out remote call', message, 'after', timeout, 'ms');\n                    _failMessage({\n                        id: message.id,\n                        error: '406::timeout',\n                        successful: false,\n                        failure: {\n                            message: message,\n                            reason: 'Remote Call Timeout'\n                        }\n                    });\n                }, timeout);\n                _cometd._debug('Scheduled remote call timeout', message, 'in', timeout, 'ms');\n            }\n            _remoteCalls[message.id] = context;\n\n            _queueSend(message);\n        };\n\n        this.remoteCallBinary = function(target, data, last, meta, timeout, callback) {\n            if (_isFunction(data)) {\n                callback = data;\n                data = new ArrayBuffer(0);\n                last = true;\n                meta = undefined;\n                timeout = _config.maxNetworkDelay;\n            } else if (_isFunction(last)) {\n                callback = last;\n                last = true;\n                meta = undefined;\n                timeout = _config.maxNetworkDelay;\n            } else if (_isFunction(meta)) {\n                callback = meta;\n                meta = undefined;\n                timeout = _config.maxNetworkDelay;\n            } else if (_isFunction(timeout)) {\n                callback = timeout;\n                timeout = _config.maxNetworkDelay;\n            }\n\n            var content = {\n                meta: meta,\n                data: data,\n                last: last\n            };\n            var ext = {\n                ext: {\n                    binary: {}\n                }\n            };\n\n            this.remoteCall(target, content, timeout, ext, callback);\n        };\n\n        /**\n         * Returns a string representing the status of the bayeux communication with the Bayeux server.\n         */\n        this.getStatus = function() {\n            return _status;\n        };\n\n        /**\n         * Returns whether this instance has been disconnected.\n         */\n        this.isDisconnected = _isDisconnected;\n\n        /**\n         * Sets the backoff period used to increase the backoff time when retrying an unsuccessful or failed message.\n         * Default value is 1 second, which means if there is a persistent failure the retries will happen\n         * after 1 second, then after 2 seconds, then after 3 seconds, etc. So for example with 15 seconds of\n         * elapsed time, there will be 5 retries (at 1, 3, 6, 10 and 15 seconds elapsed).\n         * @param period the backoff period to set\n         * @see #getBackoffIncrement()\n         */\n        this.setBackoffIncrement = function(period) {\n            _config.backoffIncrement = period;\n        };\n\n        /**\n         * Returns the backoff period used to increase the backoff time when retrying an unsuccessful or failed message.\n         * @see #setBackoffIncrement(period)\n         */\n        this.getBackoffIncrement = function() {\n            return _config.backoffIncrement;\n        };\n\n        /**\n         * Returns the backoff period to wait before retrying an unsuccessful or failed message.\n         */\n        this.getBackoffPeriod = function() {\n            return _backoff;\n        };\n\n        /**\n         * Increases the backoff period up to the maximum value configured.\n         * @returns the backoff period after increment\n         * @see getBackoffIncrement\n         */\n        this.increaseBackoffPeriod = function() {\n            return _increaseBackoff();\n        };\n\n        /**\n         * Resets the backoff period to zero.\n         */\n        this.resetBackoffPeriod = function() {\n            _resetBackoff();\n        };\n\n        /**\n         * Sets the log level for console logging.\n         * Valid values are the strings 'error', 'warn', 'info' and 'debug', from\n         * less verbose to more verbose.\n         * @param level the log level string\n         */\n        this.setLogLevel = function(level) {\n            _config.logLevel = level;\n        };\n\n        /**\n         * Registers an extension whose callbacks are called for every incoming message\n         * (that comes from the server to this client implementation) and for every\n         * outgoing message (that originates from this client implementation for the\n         * server).\n         * The format of the extension object is the following:\n         * <pre>\n         * {\n         *     incoming: function(message) { ... },\n         *     outgoing: function(message) { ... }\n         * }\n         * </pre>\n         * Both properties are optional, but if they are present they will be called\n         * respectively for each incoming message and for each outgoing message.\n         * @param name the name of the extension\n         * @param extension the extension to register\n         * @return true if the extension was registered, false otherwise\n         * @see #unregisterExtension(name)\n         */\n        this.registerExtension = function(name, extension) {\n            if (arguments.length < 2) {\n                throw 'Illegal arguments number: required 2, got ' + arguments.length;\n            }\n            if (!_isString(name)) {\n                throw 'Illegal argument type: extension name must be a string';\n            }\n\n            var existing = false;\n            for (var i = 0; i < _extensions.length; ++i) {\n                var existingExtension = _extensions[i];\n                if (existingExtension.name === name) {\n                    existing = true;\n                    break;\n                }\n            }\n            if (!existing) {\n                _extensions.push({\n                    name: name,\n                    extension: extension\n                });\n                this._debug('Registered extension', name);\n\n                // Callback for extensions\n                if (_isFunction(extension.registered)) {\n                    extension.registered(name, this);\n                }\n\n                return true;\n            } else {\n                this._info('Could not register extension with name', name, 'since another extension with the same name already exists');\n                return false;\n            }\n        };\n\n        /**\n         * Unregister an extension previously registered with\n         * {@link #registerExtension(name, extension)}.\n         * @param name the name of the extension to unregister.\n         * @return true if the extension was unregistered, false otherwise\n         */\n        this.unregisterExtension = function(name) {\n            if (!_isString(name)) {\n                throw 'Illegal argument type: extension name must be a string';\n            }\n\n            var unregistered = false;\n            for (var i = 0; i < _extensions.length; ++i) {\n                var extension = _extensions[i];\n                if (extension.name === name) {\n                    _extensions.splice(i, 1);\n                    unregistered = true;\n                    this._debug('Unregistered extension', name);\n\n                    // Callback for extensions\n                    var ext = extension.extension;\n                    if (_isFunction(ext.unregistered)) {\n                        ext.unregistered();\n                    }\n\n                    break;\n                }\n            }\n            return unregistered;\n        };\n\n        /**\n         * Find the extension registered with the given name.\n         * @param name the name of the extension to find\n         * @return the extension found or null if no extension with the given name has been registered\n         */\n        this.getExtension = function(name) {\n            for (var i = 0; i < _extensions.length; ++i) {\n                var extension = _extensions[i];\n                if (extension.name === name) {\n                    return extension.extension;\n                }\n            }\n            return null;\n        };\n\n        /**\n         * Returns the name assigned to this CometD object, or the string 'default'\n         * if no name has been explicitly passed as parameter to the constructor.\n         */\n        this.getName = function() {\n            return _name;\n        };\n\n        /**\n         * Returns the clientId assigned by the Bayeux server during handshake.\n         */\n        this.getClientId = function() {\n            return _clientId;\n        };\n\n        /**\n         * Returns the URL of the Bayeux server.\n         */\n        this.getURL = function() {\n            if (_transport) {\n                var url = _transport.getURL();\n                if (url) {\n                    return url;\n                }\n                url = _config.urls[_transport.getType()];\n                if (url) {\n                    return url;\n                }\n            }\n            return _config.url;\n        };\n\n        this.getTransport = function() {\n            return _transport;\n        };\n\n        this.getConfiguration = function() {\n            return this._mixin(true, {}, _config);\n        };\n\n        this.getAdvice = function() {\n            return this._mixin(true, {}, _advice);\n        };\n\n        this.setTimeout = function(funktion, delay) {\n            return _scheduler.setTimeout(function() {\n                try {\n                    _cometd._debug('Invoking timed function', funktion);\n                    funktion();\n                } catch (x) {\n                    _cometd._debug('Exception invoking timed function', funktion, x);\n                }\n            }, delay);\n        };\n\n        this.clearTimeout = function(id) {\n            _scheduler.clearTimeout(id);\n        };\n\n        // Initialize transports.\n        if (window.WebSocket) {\n            this.registerTransport('websocket', new WebSocketTransport());\n        }\n        this.registerTransport('long-polling', new LongPollingTransport());\n        this.registerTransport('callback-polling', new CallbackPollingTransport());\n    };\n\n    var _z85EncodeTable = [\n        '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n        'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j',\n        'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n        'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D',\n        'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N',\n        'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\n        'Y', 'Z', '.', '-', ':', '+', '=', '^', '!', '/',\n        '*', '?', '&', '<', '>', '(', ')', '[', ']', '{',\n        '}', '@', '%', '$', '#'\n    ];\n    var _z85DecodeTable = [\n        0x00, 0x44, 0x00, 0x54, 0x53, 0x52, 0x48, 0x00,\n        0x4B, 0x4C, 0x46, 0x41, 0x00, 0x3F, 0x3E, 0x45,\n        0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n        0x08, 0x09, 0x40, 0x00, 0x49, 0x42, 0x4A, 0x47,\n        0x51, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2A,\n        0x2B, 0x2C, 0x2D, 0x2E, 0x2F, 0x30, 0x31, 0x32,\n        0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A,\n        0x3B, 0x3C, 0x3D, 0x4D, 0x00, 0x4E, 0x43, 0x00,\n        0x00, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10,\n        0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18,\n        0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F, 0x20,\n        0x21, 0x22, 0x23, 0x4F, 0x00, 0x50, 0x00, 0x00\n    ];\n    var Z85 = {\n        encode: function(bytes) {\n            var buffer = null;\n            if (bytes instanceof ArrayBuffer) {\n                buffer = bytes;\n            } else if (bytes.buffer instanceof ArrayBuffer) {\n                buffer = bytes.buffer;\n            } else if (Array.isArray(bytes)) {\n                buffer = new Uint8Array(bytes).buffer;\n            }\n            if (buffer == null) {\n                throw 'Cannot Z85 encode ' + bytes;\n            }\n\n            var length = buffer.byteLength;\n            var remainder = length % 4;\n            var padding = 4 - (remainder === 0 ? 4 : remainder);\n            var view = new DataView(buffer);\n            var result = '';\n            var value = 0;\n            for (var i = 0; i < length + padding; ++i) {\n                var isPadding = i >= length;\n                value = value * 256 + (isPadding ? 0 : view.getUint8(i));\n                if ((i + 1) % 4 === 0) {\n                    var divisor = 85 * 85 * 85 * 85;\n                    for (var j = 5; j > 0; --j) {\n                        if (!isPadding || j > padding) {\n                            var code = Math.floor(value / divisor) % 85;\n                            result += _z85EncodeTable[code];\n                        }\n                        divisor /= 85;\n                    }\n                    value = 0;\n                }\n            }\n\n            return result;\n        },\n        decode: function(string) {\n            var remainder = string.length % 5;\n            var padding = 5 - (remainder === 0 ? 5 : remainder);\n            for (var p = 0; p < padding; ++p) {\n                string += _z85EncodeTable[_z85EncodeTable.length - 1];\n            }\n            var length = string.length;\n\n            var buffer = new ArrayBuffer((length * 4 / 5) - padding);\n            var view = new DataView(buffer);\n            var value = 0;\n            var charIdx = 0;\n            var byteIdx = 0;\n            for (var i = 0; i < length; ++i) {\n                var code = string.charCodeAt(charIdx++) - 32;\n                value = value * 85 + _z85DecodeTable[code];\n                if (charIdx % 5 === 0) {\n                    var divisor = 256 * 256 * 256;\n                    while (divisor >= 1) {\n                        if (byteIdx < view.byteLength) {\n                            view.setUint8(byteIdx++, Math.floor(value / divisor) % 256);\n                        }\n                        divisor /= 256;\n                    }\n                    value = 0;\n                }\n            }\n\n            return buffer;\n        }\n    };\n\n    return {\n        CometD: CometD,\n        Transport: Transport,\n        RequestTransport: RequestTransport,\n        LongPollingTransport: LongPollingTransport,\n        CallbackPollingTransport: CallbackPollingTransport,\n        WebSocketTransport: WebSocketTransport,\n        Utils: Utils,\n        Z85: Z85\n    };\n}));\n","/*\n * Copyright (c) 2008-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, factory){\n    if (typeof exports === 'object') {\n        module.exports = factory(require('./cometd'));\n    } else if (typeof define === 'function' && define.amd) {\n        define(['./cometd'], factory);\n    } else {\n        factory(root.org.cometd);\n    }\n}(this, function(cometdModule) {\n    /**\n     * This client-side extension enables the client to acknowledge to the server\n     * the messages that the client has received.\n     * For the acknowledgement to work, the server must be configured with the\n     * correspondent server-side ack extension. If both client and server support\n     * the ack extension, then the ack functionality will take place automatically.\n     * By enabling this extension, all messages arriving from the server will arrive\n     * via /meta/connect, so the comet communication will be slightly chattier.\n     * The fact that all messages will return via /meta/connect means also that the\n     * messages will arrive with total order, which is not guaranteed if messages\n     * can arrive via both /meta/connect and normal response.\n     * Messages are not acknowledged one by one, but instead a batch of messages is\n     * acknowledged when the /meta/connect returns.\n     */\n    return cometdModule.AckExtension = function() {\n        var _cometd;\n        var _serverSupportsAcks = false;\n        var _batch;\n\n        function _debug(text, args) {\n            _cometd._debug(text, args);\n        }\n\n        this.registered = function(name, cometd) {\n            _cometd = cometd;\n            _debug('AckExtension: executing registration callback');\n        };\n\n        this.unregistered = function() {\n            _debug('AckExtension: executing unregistration callback');\n            _cometd = null;\n        };\n\n        this.incoming = function(message) {\n            var channel = message.channel;\n            var ext = message.ext;\n            if (channel === '/meta/handshake') {\n                if (ext) {\n                    var ackField = ext.ack;\n                    if (typeof ackField === 'object') {\n                        // New format.\n                        _serverSupportsAcks = ackField.enabled === true;\n                        var batch = ackField.batch;\n                        if (typeof batch === 'number') {\n                            _batch = batch;\n                        }\n                    } else {\n                        // Old format.\n                        _serverSupportsAcks = ackField === true;\n                    }\n                }\n                _debug('AckExtension: server supports acknowledgements', _serverSupportsAcks);\n            } else if (channel === '/meta/connect' && message.successful && _serverSupportsAcks) {\n                if (ext && typeof ext.ack === 'number') {\n                    _batch = ext.ack;\n                    _debug('AckExtension: server sent batch', _batch);\n                }\n            }\n            return message;\n        };\n\n        this.outgoing = function(message) {\n            var channel = message.channel;\n            if (!message.ext) {\n                message.ext = {};\n            }\n            if (channel === '/meta/handshake') {\n                message.ext.ack = _cometd && _cometd.ackEnabled !== false;\n                _serverSupportsAcks = false;\n                _batch = 0;\n            } else if (channel === '/meta/connect') {\n                if (_serverSupportsAcks) {\n                    message.ext.ack = _batch;\n                    _debug('AckExtension: client sending batch', _batch);\n                }\n            }\n            return message;\n        };\n    };\n}));\n","/*\n * Copyright (c) 2008-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, factory) {\n    if (typeof exports === 'object') {\n        module.exports = factory(require('./cometd'));\n    } else if (typeof define === 'function' && define.amd) {\n        define(['./cometd'], factory);\n    } else {\n        factory(root.org.cometd);\n    }\n}(this, function(cometdModule) {\n    /**\n     * The reload extension allows a page to be loaded (or reloaded)\n     * without having to re-handshake in the new (or reloaded) page,\n     * therefore resuming the existing CometD connection.\n     *\n     * When the reload() method is called, the state of the CometD\n     * connection is stored in the window.sessionStorage object.\n     * The reload() method must therefore be called by page unload\n     * handlers, often provided by JavaScript toolkits.\n     *\n     * When the page is (re)loaded, this extension checks the\n     * window.sessionStorage and restores the CometD connection,\n     * maintaining the same CometD clientId.\n     */\n    return cometdModule.ReloadExtension = function(configuration) {\n        var _cometd;\n        var _debug;\n        var _state = {};\n        var _name = 'org.cometd.reload';\n        var _batch = false;\n        var _reloading = false;\n\n        function _reload(config) {\n            if (_state.handshakeResponse) {\n                _reloading = true;\n                var transport = _cometd.getTransport();\n                if (transport) {\n                    transport.abort();\n                }\n                _configure(config);\n                var state = JSON.stringify(_state);\n                _debug('Reload extension saving state', state);\n                window.sessionStorage.setItem(_name, state);\n            }\n        }\n\n        function _similarState(oldState) {\n            // We want to check here that the CometD object\n            // did not change much between reloads.\n            // We just check the URL for now, but in future\n            // further checks may involve the transport type\n            // and other configuration parameters.\n            return _state.url === oldState.url;\n        }\n\n        function _configure(config) {\n            if (config) {\n                if (typeof config.name === 'string') {\n                    _name = config.name;\n                }\n            }\n        }\n\n        function _receive(response) {\n            _cometd.receive(response);\n        }\n\n        this.configure = _configure;\n\n        this._receive = _receive;\n\n        this.registered = function(name, cometd) {\n            _cometd = cometd;\n            _cometd.reload = _reload;\n            _debug = _cometd._debug;\n        };\n\n        this.unregistered = function() {\n            delete _cometd.reload;\n            _cometd = null;\n        };\n\n        this.outgoing = function(message) {\n            switch (message.channel) {\n                case '/meta/handshake':\n                {\n                    _state = {};\n                    _state.url = _cometd.getURL();\n\n                    var state = window.sessionStorage.getItem(_name);\n                    _debug('Reload extension found state', state);\n                    // Is there a saved handshake response from a prior load ?\n                    if (state) {\n                        try {\n                            var oldState = JSON.parse(state);\n\n                            // Remove the state, not needed anymore\n                            window.sessionStorage.removeItem(_name);\n\n                            if (oldState.handshakeResponse && _similarState(oldState)) {\n                                _debug('Reload extension restoring state', oldState);\n\n                                // Since we are going to abort this message,\n                                // we must save an eventual callback to restore\n                                // it when we replay the handshake response.\n                                var callback = _cometd._getCallback(message.id);\n\n                                var self = this;\n                                setTimeout(function() {\n                                    _debug('Reload extension replaying handshake response', oldState.handshakeResponse);\n                                    _state.handshakeResponse = oldState.handshakeResponse;\n                                    _state.transportType = oldState.transportType;\n\n                                    // Restore the callback.\n                                    _cometd._putCallback(message.id, callback);\n\n                                    var response = _cometd._mixin(true, {}, _state.handshakeResponse, {\n                                        // Keep the response message id the same as the request.\n                                        id: message.id,\n                                        // Tells applications this is a handshake replayed by the reload extension.\n                                        ext: {\n                                            reload: true\n                                        }\n                                    });\n                                    // Use the same transport as before.\n                                    response.supportedConnectionTypes = [_state.transportType];\n\n                                    self._receive(response);\n                                    _debug('Reload extension replayed handshake response', response);\n                                }, 0);\n\n                                // Delay any sends until first connect is complete.\n                                // This avoids that there is an old /meta/connect pending on server\n                                // that will be resumed to send messages to the client, when the\n                                // client has already closed the connection, thereby losing the messages.\n                                if (!_batch) {\n                                    _batch = true;\n                                    _cometd.startBatch();\n                                }\n\n                                // This handshake is aborted, as we will replay the prior handshake response\n                                return null;\n                            } else {\n                                _debug('Reload extension could not restore state', oldState);\n                            }\n                        } catch (x) {\n                            _debug('Reload extension error while trying to restore state', x);\n                        }\n                    }\n                    break;\n                }\n                case '/meta/connect':\n                {\n                    if (_reloading === true) {\n                        // The reload causes the failure of the outstanding /meta/connect,\n                        // which CometD will react to by sending another. Here we avoid\n                        // that /meta/connect messages are sent between the reload and\n                        // the destruction of the JavaScript context, so that we are sure\n                        // that the first /meta/connect is the one triggered after the\n                        // replay of the /meta/handshake by this extension.\n                        _debug('Reload extension aborting /meta/connect during reload');\n                        return null;\n                    }\n\n                    if (!_state.transportType) {\n                        _state.transportType = message.connectionType;\n                        _debug('Reload extension tracked transport type', _state.transportType);\n                    }\n                    break;\n                }\n                case '/meta/disconnect':\n                {\n                    _state = {};\n                    break;\n                }\n                default:\n                {\n                    break;\n                }\n            }\n            return message;\n        };\n\n        this.incoming = function(message) {\n            if (message.successful) {\n                switch (message.channel) {\n                    case '/meta/handshake':\n                    {\n                        // If the handshake response is already present, then we're replaying it.\n                        // Since the replay may have modified the handshake response, do not record it here.\n                        if (!_state.handshakeResponse) {\n                            // Save successful handshake response\n                            _state.handshakeResponse = message;\n                            _debug('Reload extension tracked handshake response', message);\n                        }\n                        break;\n                    }\n                    case '/meta/connect':\n                    {\n                        if (_batch) {\n                            _batch = false;\n                            _cometd.endBatch();\n                        }\n                        break;\n                    }\n                    case '/meta/disconnect':\n                    {\n                        _state = {};\n                        break;\n                    }\n                    default:\n                    {\n                        break;\n                    }\n                }\n            }\n            return message;\n        };\n\n        _configure(configuration);\n    };\n}));\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","export const BROWSER_STORAGE_TYPE = {\n    COOKIE: 'COOKIE',\n    SESSION: 'SESSION',\n};\n\nexport const SCOPE_BOUNDARY = {\n    PROJECT: 'PROJECT',\n    GROUP: 'GROUP',\n    EPISODE: 'EPISODE',\n    WORLD: 'WORLD',\n    RUN: 'RUN',\n};\n\nexport const RITUAL = {\n    NONE: 'NONE',\n    INTER: 'INTER',\n    REANIMATE: 'REANIMATE',\n    EXORCISE: 'EXORCISE',\n};\n\nexport const PUSH_CATEGORY = {\n    CHAT: 'CHAT',\n    CONSENSUS: 'CONSENSUS',\n    CONTROL: 'CONTROL',\n    PRESENCE: 'PRESENCE',\n    RUN: 'RUN',\n    SYSTEM: 'SYSTEM',\n};\n\nexport const LOCK_TYPE = {\n    SYSTEM: 'SYSTEM',\n    MONITER: 'MONITER',\n    AUTHOR: 'AUTHOR',\n    SUPPORT: 'SUPPORT',\n    FACILITATOR: 'FACILITATOR',\n    REVIEWER: 'REVIEWER',\n    USER: 'USER',\n    LEADER: 'LEADER',\n    PARTICIPANT: 'PARTICIPANT',\n    ANONYMOUS: 'ANONYMOUS',\n};","/* eslint-disable no-new-func */\nexport const isBrowser = new Function('try {return this===window;}catch(e){ return false;}');\nexport const isNode = new Function('try {return this===global;}catch(e){return false;}');\n\nexport const toQueryString = (query) => {\n    if (typeof query === 'string') return query;\n    if (typeof query !== 'object') return '';\n    const queryArray = Array.isArray(query) ? query : Object.entries(query);\n    return queryArray.flatMap(([key, value]) => {\n        if (key === undefined || key === '') return [];\n        if (value === undefined || value === '') return [];\n        if (Array.isArray(value)) return value.map((v) => `${key}=${v}`);\n        return `${key}=${value}`;\n    }).join('&');\n};\n\nexport const last = (strOrArr) => strOrArr[strOrArr.length - 1];\nexport const prefix = (pre, str) => str.startsWith(pre) ? str : `${pre}${str}`;\n\n// Tries to return value at the end of a sequence of keys.\n// E.g. given an obj and keys = ['1', '2', '3'], it will try to\n// return obj['1']['2']['3']. Uses the defaultValue on error.\nexport const access = (obj, keys, defaultValue) => {\n    let ref = obj;\n    try {\n        keys.forEach((key) => ref = ref[key]);\n    } catch (err) {\n        if (err instanceof TypeError) {\n            return defaultValue;\n        }\n        throw err;\n    }\n    if (ref === undefined) return defaultValue;\n    return ref;\n};","import { cookies } from 'utils';\n\nclass Store {\n    _store;\n    constructor(store) {\n        this._store = store;\n    }\n    clear() {\n        this._store.clear();\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n    }\n}\n\nconst nodeMap = new Map();\nexport class NodeStore extends Store {\n    constructor() {\n        super(nodeMap);\n    }\n    getItem(key) {\n        return super.store.get(key);\n    }\n    setItem(key, value) {\n        return super.store.set(key, value);\n    }\n    removeItem(key) {\n        return super.store.delete(key);\n    }\n}\n\nexport class SessionStore extends Store {\n    constructor() {\n        super(window.sessionStorage);\n    }\n    getItem(key) {\n        return JSON.parse(super.store.getItem(key.toString()));\n    }\n    setItem(key, value) {\n        return super.store.setItem(key.toString(), JSON.stringify(value));\n    }\n    removeItem(key) {\n        return super.store.removeItem(key.toString());\n    }\n}\n\nexport class CookieStore {\n    constructor(options) {\n        const defaults = { domain: `.${window.location.hostname}`, path: '/' };\n        this.options = { ...defaults, ...options };\n    }\n    getItem(key) {\n        return JSON.parse(cookies.getItem(key.toString()));\n    }\n    setItem(key, value) {\n        return cookies.setItem(key.toString(), JSON.stringify(value), this.options);\n    }\n    removeItem(key) {\n        return cookies.removeItem(key.toString(), this.options);\n    }\n    clear() {\n        return cookies.clear();\n    }\n}\n","// Modified version of https://github.com/madmurphy/cookies.js\nconst getExpiration = (vEnd) => {\n    if (!vEnd) return '';\n    switch (vEnd.constructor) {\n        case Number: return vEnd === Infinity ? '; expires=Fri, 31 Dec 9999 23:59:59 GMT' : `; max-age=${vEnd}`;\n        /*\n            Note: Despite officially defined in RFC 6265, the use of `max-age` is not compatible with any\n            version of Internet Explorer, Edge and some mobile browsers. Therefore passing a number to\n            the end parameter might not work as expected. A possible solution might be to convert the the\n            relative time to an absolute time. For instance, replacing the previous line with:\n        */\n        /*\n            case Number: return vEnd === Infinity ? '; expires=Fri, 31 Dec 9999 23:59:59 GMT' : `; expires=${(new Date(vEnd * 1e3 + Date.now())).toUTCString()}`;\n        */\n        case String: return `; expires=${vEnd}`;\n        case Date: return `; expires=${vEnd.toUTCString()}`;\n        default: return '';\n    }\n};\n\nexport default {\n    getItem(key) {\n        if (!key) return null;\n        return decodeURIComponent(document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\\\s*${encodeURIComponent(key).replace(/[\\-\\.\\+\\*]/g, '\\\\$&')}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`), '$1')) || null;\n    },\n    setItem(key, value, options = {}) {\n        if (!key || (/^(?:expires|max\\-age|path|domain|secure)$/i).test(key)) return false;\n\n        const { path, domain, end, secure, samesite } = options;\n        const expireStr = getExpiration(end);\n        const domainStr = domain ? `; domain=${domain}` : '';\n        const pathStr = path ? `; path=${path}` : '';\n        const secureStr = secure ? '; secure' : '';\n        const samesiteStr = samesite ? '; samesite' : '';\n\n        document.cookie = `${encodeURIComponent(key)}=${encodeURIComponent(value)}${expireStr}${domainStr}${pathStr}${secureStr}${samesiteStr}`;\n        return true;\n    },\n    removeItem(key, options = {}) {\n        if (!this.hasItem(key)) return false;\n        const { path, domain } = options;\n        const domainStr = domain ? `; domain=${domain}` : '';\n        const pathStr = path ? `; path=${path}` : '';\n        document.cookie = `${encodeURIComponent(key)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${domainStr}${pathStr}`;\n        return true;\n    },\n    hasItem(key) {\n        if (!key || (/^(?:expires|max\\-age|path|domain|secure)$/i).test(key)) return false;\n\n        return (new RegExp(`(?:^|;\\\\s*)${encodeURIComponent(key).replace(/[\\-\\.\\+\\*]/g, '\\\\$&')}\\\\s*\\\\=`)).test(document.cookie);\n    },\n    clear() {\n        const aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, '').split(/\\s*(?:\\=[^;]*)?;\\s*/);\n        for (let nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) {\n            aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]);\n            this.removeItem(aKeys[nIdx]);\n        }\n        return aKeys;\n    },\n};\n","\n/* Generic throwable error */\nexport default class EpicenterError extends Error {\n\n    constructor(message) {\n\n        super(message);\n\n    }\n}","\n/* For failed network calls */\nexport default class Fault extends Error {\n\n    constructor(status, error) {\n\n        super();\n\n        const { information, message, cause } = error;\n        this.status = status;\n        this.message = message;\n\n        if (information) {\n            const { code, ...rest } = information;\n            this.code = code;\n            this.information = rest;\n        }\n        if (cause) {\n            this.cause = new Fault(cause);\n        }\n    }\n}","\n/* For network call responses */\nexport default class Result {\n\n    constructor(status, headers, body) {\n\n        this.status = status;\n        this.headers = headers;\n        this.body = body;\n\n    }\n}","import { Router } from 'utils';\n\nexport async function createAccount(options) {\n    const { objectType = 'personal', name, shortName, adminKey, subscriptionPlan, billingInterval } = options;\n    const response = await new Router()\n        .post('/account', {\n            body: { objectType, name, shortName, adminKey, subscriptionPlan, billingInterval },\n        });\n    return response;\n}\n\n// TODO -- just a copy-paste of create ATM; need to figuure out how to actually use\nexport async function updateAccount(options) {\n    const { objectType = 'personal', name, shortName, adminKey, subscriptionPlan, billingInterval } = options;\n    const response = await new Router()\n        .patch('/account', {\n            body: { objectType, name, shortName, adminKey, subscriptionPlan, billingInterval },\n        });\n    return response;\n}\n\nexport async function removeAccount(accountShortName) {\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .delete('/account');\n}","import { Router, identification } from 'utils';\nimport { cometdAdapter } from 'adapters';\n\nexport async function logout() {\n    identification.session = undefined;\n    await cometdAdapter.disconnect();\n}\n\nexport async function login(options) {\n    const { handle, password, groupKey, objectType = 'user', ...others } = options;\n    const { accountShortName, projectShortName } = others;\n\n    const response = await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .post('/authentication', {\n            body: { handle, password, groupKey, objectType },\n            includeAuthorization: false,\n            inert: true,\n        });\n    await logout();\n\n    identification.session = response.body;\n    return response;\n}\n\nexport async function upgrade(options) {\n    const { objectType = 'admin', inert, ...others } = options;\n    const { accountShortName, projectShortName } = others;\n\n    const response = await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .patch('/authentication', {\n            body: { objectType },\n            inert,\n        });\n    await logout();\n\n    identification.session = response.body;\n    return response;\n}\n\nexport async function sso(options) {\n    const { accountShortName, projectShortName } = options;\n\n    const response = await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get('/registration/sso');\n\n    identification.session = response.body;\n    return response;\n}\n\nexport async function getSession() {\n    const response = await new Router().get('/authentication');\n\n    identification.session = response.body;\n    return response;\n}\n\nexport function getLocalSession() {\n    return identification.session;\n}\n","import { Router } from 'utils';\nimport { cometdAdapter } from 'adapters';\n\nexport async function forGroup(groupKey, options = {}) {\n    const { accountShortName, projectShortName } = options;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get(`/presence/group/${groupKey}`);\n}\n\nexport async function forWorld(worldKey, options = {}) {\n    const { accountShortName, projectShortName } = options;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get(`/presence/world/${worldKey}`);\n}\n\nexport async function connect() {\n    cometdAdapter.handshake();\n}\n","import { Router } from 'utils';\n\nexport async function channelsEnabled(optionals = {}) {\n    const { accountShortName, projectShortName } = optionals;\n    const response = await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get('/project/channel/isEnabled');\n    return response;\n}","import { Router, prefix } from 'utils';\nimport { LOCK_TYPE, SCOPE_BOUNDARY, RITUAL } from 'utils/constants';\n\n\nexport async function create(model, scope, optionals = {}) {\n    const { scopeBoundary, scopeKey, pseudonymKey } = scope;\n    const {\n        accountShortName, projectShortName, readLock, writeLock,\n        morphology, ephemeral, trackingKey, modelContext, executionContext,\n    } = optionals;\n\n    const defaultLock = scopeBoundary === SCOPE_BOUNDARY.WORLD ?\n        LOCK_TYPE.PARTICIPANT :\n        LOCK_TYPE.USER;\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .post('/run', {\n            body: {\n                scope: {\n                    scopeBoundary,\n                    scopeKey,\n                    pseudonymKey,\n                },\n                permit: {\n                    readLock: readLock || defaultLock,\n                    writeLock: writeLock || defaultLock,\n                },\n                morphology,\n                trackingKey,\n                modelFile: model,\n                modelContext: modelContext || {/* Is not recorded for clone. Overrides model ctx2 file. */},\n                executionContext: executionContext || {/* Affected by clone. Carries arguments for model file worker on model initialization */},\n                ephemeral,\n            },\n        });\n}\n\nexport async function clone(runKey, optionals = {}) {\n    const {\n        accountShortName, projectShortName, ephemeral,\n        trackingKey, modelContext = {}, executionContext = {},\n    } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .post(`/run/clone/${runKey}`, {\n            body: {\n                trackingKey,\n                modelContext,\n                executionContext,\n                ephemeral,\n            },\n        });\n}\n\nexport async function restore(runKey, optionals = {}) {\n    const {\n        accountShortName, projectShortName, ephemeral,\n        modelContext = {}, executionContext = {},\n    } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .post(`/run/restore/${runKey}`, {\n            body: {\n                modelContext,\n                executionContext,\n                ephemeral,\n            },\n        });\n}\n\nexport async function rewind(runKey, steps, optionals = {}) {\n    const {\n        accountShortName, projectShortName,\n        ephemeral, modelContext = {},\n    } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .post(`/run/rewind/${runKey}`, {\n            body: {\n                rewindCount: steps,\n                modelContext,\n                ephemeral,\n            },\n        });\n}\n\nexport async function update(runKey, update, optionals = {}) {\n    const { readLock, writeLock, trackingKey, marked, hidden, closed } = update;\n    const { accountShortName, projectShortName } = optionals;\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(hasMultiple ? { runKey } : '')\n        .patch(`/run${uriComponent}`, {\n            body: {\n                readLock,\n                writeLock,\n                trackingKey,\n                marked,\n                hidden,\n                closed,\n            },\n        });\n}\n\nexport async function remove(runKey, optionals = {}) {\n    const { accountShortName, projectShortName } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .delete(`/run/${runKey}`);\n}\n\nexport async function get(runKey, optionals = {}) {\n    const { accountShortName, projectShortName } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get(`/run/${runKey}`);\n}\n\nconst MAX_URL_LENGTH = 2048;\nexport async function query(model, scope, optionals = {}) {\n    const { scopeBoundary, scopeKey } = scope;\n    const {\n        filter = {}, sort = [], first, max, timeout, projections = {},\n        accountShortName, projectShortName,\n    } = optionals;\n\n    const query = {\n        filter: [\n            ...(filter.variables || []).map((statement) => prefix('var.', statement)),\n            ...(filter.metadata || []).map((statement) => prefix('meta.', statement)),\n            ...(filter.attr || []).map((statement) => prefix('run.', statement)),\n        ].join(';'),\n        sort: sort.join(';'),\n        first,\n        max,\n        timeout,\n        projections: [\n            ...(projections.variables || []).map((name) => prefix('var.', name)),\n            ...(projections.metadata || []).map((name) => prefix('meta.', name)),\n            ...(projections.attr || []).map((name) => prefix('run.', name)),\n        ].join(';'),\n    };\n    const uriComponent = `/run/${scopeBoundary}/${scopeKey}/${model}`;\n    const router = new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(query);\n\n    const url = await router.getURL(uriComponent);\n    return encodeURI(url.toString()).length < MAX_URL_LENGTH ?\n        router.get(uriComponent) :\n        new Router()\n            .withAccountShortName(accountShortName)\n            .withProjectShortName(projectShortName)\n            .post(uriComponent, {\n                body: {/* TODO: put post body here */},\n            });\n}\n\nexport async function introspect(model, optionals = {}) {\n    const { accountShortName, projectShortName } = optionals;\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .get(`/run/introspect/${model}`);\n}\n\nexport async function operation(runKey, name, args = [], optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout } : { ritual, timeout };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .post(`/run/operation${uriComponent}`, {\n            body: { name, arguments: args },\n        });\n}\n\nexport async function getVariables(runKey, variables, optionals) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const include = variables.join(';');\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout, include } : { ritual, timeout, include };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .get(`/run/variable${uriComponent}`);\n}\n\nexport async function getVariable(runKey, variable, optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n\n    if (Array.isArray(runKey) || Array.isArray(variable)) {\n        const variables = Array.isArray(variable) ? variable : [variable];\n        return getVariables(runKey, variables, optionals);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams({ timeout, ritual })\n        .get(`/run/variable/${runKey}/${variable}`);\n}\n\nexport async function updateVariables(runKey, update, optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout } : { ritual, timeout };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .patch(`/run/variable${uriComponent}`, { body: update });\n}\n\nexport async function getMetadata(runKey, variables, optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const include = variables.join(';');\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout, include } : { ritual, timeout, include };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .get(`/run/meta${uriComponent}`);\n}\n\nexport async function updateMetadata(runKey, update, optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout } : { ritual, timeout };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .patch(`/run/meta${uriComponent}`, { body: update });\n}\n\nexport async function action(runKey, actionList, optionals = {}) {\n    const { accountShortName, projectShortName, timeout, ritual } = optionals;\n    const hasMultiple = Array.isArray(runKey) && runKey.length > 1;\n    const uriComponent = hasMultiple ? '' : `/${runKey.length === 1 ? runKey[0] : runKey}`;\n    const searchParams = hasMultiple ? { runKey, timeout } : { ritual, timeout };\n\n    if (ritual !== RITUAL.EXORCISE && hasMultiple) {\n        console.warn(`Detected ritual: ${ritual} usage with multiple runKeys; this not allowed. Defaulting to ritual: EXORCISE`);\n    }\n\n    return await new Router()\n        .withAccountShortName(accountShortName)\n        .withProjectShortName(projectShortName)\n        .withSearchParams(searchParams)\n        .post(`/run/action${uriComponent}`, { body: actionList });\n}\n","import AckExtension from 'cometd/AckExtension';\nimport ReloadExtension from 'cometd/ReloadExtension';\nimport config from '~/config';\nimport { EpicenterError, identification, isNode, isBrowser, errorManager } from 'utils';\nimport { channelsEnabled } from 'adapters/project';\n\nconst AUTH_TOKEN_KEY = 'com.forio.epicenter.token';\nconst COMETD_URL_POSTSCRIPT = '/v3/epicenter/cometd';\n\nconst DISCONNECTED = 'disconnected';\nconst CONNECTED = 'connected';\n\n\nclass CometdError extends Error {\n    constructor(reply) {\n\n        super();\n        const { error, successful } = reply;\n        if (error && error.includes('403') && !successful) {\n            this.status = 401;\n        }\n        this.information = reply;\n        this.message = error;\n    }\n}\n\nclass CometdAdapter {\n\n    url;\n    customCometd;\n    defaultCometd;\n    subscriptions = new Map();\n    state = DISCONNECTED;\n    requireAcknowledgement = true;\n    initialized = false;\n\n    get cometd() {\n        return this.customCometd || this.defaultCometd;\n    }\n\n    async reinit(customCometd, options) {\n        await this.disconnect();\n        this.initialized = false;\n        this.customCometd = customCometd;\n        return this.init(options);\n    }\n\n    async init(options = { logLevel: 'error' }) {\n        if (this.initialized) {\n            return;\n        }\n\n        if (!isNode() && isBrowser()) {\n            const cometd = await import('cometd');\n            this.defaultCometd = new cometd.CometD();\n        }\n\n        await config.load();\n        this.url = `${config.apiScheme}://${config.apiHost}${COMETD_URL_POSTSCRIPT}`;\n        this.cometd.registerExtension('ack', new AckExtension());\n        this.cometd.registerExtension('reload', new ReloadExtension());\n        this.cometd.configure({\n            url: this.url,\n            logLevel: options.logLevel,\n        });\n\n        if (!isNode() && isBrowser()) {\n            window.onunload = () => {\n                if (this.cometd.getStatus() === CONNECTED) {\n                    this.cometd.reload();\n                    this.cometd.getTransport().abort();\n                }\n            };\n        }\n        this.initialized = true;\n    }\n\n    async checkEnabled() {\n        const res = await channelsEnabled();\n        const enabled = res.body;\n        if (!enabled) throw new EpicenterError('Push Channels are not enabled on this project');\n    }\n\n    // Connects to CometD server\n    async handshake(options = {}) {\n        await this.checkEnabled();\n        await this.init();\n\n        if (this.cometd.getStatus() !== DISCONNECTED) {\n            return Promise.resolve();\n        }\n\n        const handshakeProps = {};\n        const { session } = identification;\n\n        if (session) {\n            handshakeProps.ext = {\n                [AUTH_TOKEN_KEY]: session.token,\n                ack: this.requireAcknowledgement,\n            };\n        }\n\n        this.cometd.ackEnabled = this.requireAcknowledgement;\n        this.cometd.websocketEnabled = true;\n        return new Promise((resolve, reject) => this.cometd.handshake(handshakeProps, (handshakeReply) => {\n            if (handshakeReply.successful) {\n                resolve(handshakeReply);\n                return;\n            }\n\n            const error = new CometdError(handshakeReply);\n\n            if (options.inert) {\n                reject(error);\n                return;\n            }\n\n            const retry = () => this.handshake({ inert: true });\n            try {\n                const result = errorManager.handle(error, retry);\n                resolve(result);\n            } catch (e) {\n                reject(e);\n            }\n        }));\n    }\n\n    async disconnect() {\n        if (!this.cometd) return Promise.resolve();\n\n        await this.init();\n        await this.empty();\n        if (this.cometd.getStatus() !== CONNECTED) return Promise.resolve();\n\n        return new Promise((resolve, reject) => this.cometd.disconnect((disconnectReply) => {\n            if (!disconnectReply.successful) {\n                reject(new EpicenterError('Unable to disconnect from CometD server'));\n            } else {\n                resolve();\n            }\n        }));\n    }\n\n    async add(channel, update, options = {}) {\n        await this.init();\n        const channels = [].concat(channel);\n\n        if (this.cometd.getStatus() !== CONNECTED) {\n            await this.handshake();\n        }\n        const subscriptionProps = {};\n        const { session } = identification;\n        if (session) {\n            subscriptionProps.ext = { [AUTH_TOKEN_KEY]: session.token };\n        }\n\n        const handleCometdUpdate = ({ channel, data }) => {\n            data = typeof data === 'string' ? JSON.parse(data) : data;\n            return update(data);\n        };\n        const promises = [];\n        this.cometd.batch(() => channels.forEach(({ path }) => promises.push(new Promise((resolve, reject) => {\n            const subscription = this.cometd.subscribe(path, handleCometdUpdate, subscriptionProps, (subscribeReply) => {\n                if (subscribeReply.successful) {\n                    this.subscriptions.set(subscription.channel, subscription);\n                    resolve(subscription);\n                    return;\n                }\n\n                const error = new CometdError(subscribeReply);\n\n                if (options.inert) {\n                    reject(error);\n                    return;\n                }\n\n                const retry = () => this.add(channel, update, { inert: true });\n                try {\n                    const result = errorManager.handle(error, retry);\n                    resolve(result);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        }))));\n        return promises.length === 1 ?\n            Promise.all(promises).then(([res]) => res) :\n            Promise.all(promises);\n    }\n\n    async publish(channel, content, options = {}) {\n        await this.init();\n        const channels = [].concat(channel);\n\n        if (this.cometd.getStatus() !== CONNECTED) {\n            await this.handshake();\n        }\n        const publishProps = {};\n        const { session } = identification;\n        if (session) {\n            publishProps.ext = { [AUTH_TOKEN_KEY]: session.token };\n        }\n        const promises = [];\n        this.cometd.batch(() => channels.forEach(({ path }) => promises.push(new Promise((resolve, reject) => {\n            this.cometd.publish(path, content, publishProps, (publishReply) => {\n                if (publishReply.successful) {\n                    resolve(publishReply);\n                    return;\n                }\n\n                const error = new CometdError(publishReply);\n\n                if (options.inert) {\n                    reject(error);\n                    return;\n                }\n\n                const retry = () => this.publish(channel, content, { inert: true });\n                try {\n                    const result = errorManager.handle(error, retry);\n                    resolve(result);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        }))));\n        return promises.length === 1 ?\n            Promise.all(promises).then(([res]) => res) :\n            Promise.all(promises);\n    }\n\n    async remove(subscription) {\n        await this.init();\n        this.subscriptions.delete(subscription.channel);\n        return new Promise((resolve, reject) => this.cometd.unsubscribe(subscription, (unsubscribeReply) => {\n            if (unsubscribeReply.successful) {\n                resolve(unsubscribeReply);\n            }\n            const error = new CometdError(unsubscribeReply);\n            reject(error);\n            /* Not using error handling here yet -- should we? */\n        }));\n    }\n\n    async empty() {\n        await this.init();\n        const promises = [];\n        this.cometd.batch(() => this.subscriptions.forEach((subscription) => {\n            promises.push(this.remove(subscription));\n        }));\n        return Promise.all(promises);\n    }\n}\nconst cometdAdapter = new CometdAdapter();\nexport default cometdAdapter;\n\n","import { EpicenterError } from 'utils';\nimport { cometdAdapter } from 'adapters';\nimport { SCOPE_BOUNDARY, PUSH_CATEGORY } from 'utils/constants';\n\nconst validateScope = (scope) => {\n    if (!scope) throw new EpicenterError('No scope found where one was required');\n    const { scopeBoundary, scopeKey, pushCategory } = scope;\n    if (!scopeBoundary) throw new EpicenterError('Missing scope component: scopeBoundary');\n    if (!scopeKey) throw new EpicenterError('Missing scope component: scopeKey');\n    if (!pushCategory) throw new EpicenterError('Missing scope component: pushCategory');\n    if (!SCOPE_BOUNDARY.hasOwnProperty(scopeBoundary)) throw new EpicenterError(`Invalid scope boundary: ${scopeBoundary}`);\n    if (!PUSH_CATEGORY.hasOwnProperty(pushCategory)) throw new EpicenterError(`Invalid push category: ${pushCategory}`);\n};\n\nexport default class Channel {\n\n    path;\n    update;\n    subscription;\n\n    constructor(scope) {\n        const { scopeBoundary, scopeKey, pushCategory } = scope;\n        validateScope(scope);\n        this.path = `/${scopeBoundary.toLowerCase()}/${scopeKey}/${pushCategory.toLowerCase()}`;\n        if (cometdAdapter.subscriptions.has(this.path)) {\n            this.subscription = cometdAdapter.subscriptions.get(this.path);\n        }\n    }\n\n    publish(content) {\n        return cometdAdapter.publish(this, content);\n    }\n\n    async subscribe(update, options) {\n        if (this.subscription) await this.unsubscribe();\n        this.update = update;\n        return cometdAdapter.add(this, update, options).then((subscription) => {\n            this.subscription = subscription;\n            return subscription;\n        });\n    }\n\n    async unsubscribe() {\n        if (this.subscription) {\n            await cometdAdapter.remove(this.subscription);\n            this.subscription = null;\n        }\n    }\n}\n\n\n","import { authAdapter } from 'adapters';\nimport { identification, isNode, access } from 'utils';\n\n\nconst handleByRelog = (error) => {\n    let query = '';\n    if (error.code) {\n        query = query.concat(`?error=${error.code}`);\n    }\n    return authAdapter.logout().then(() => window.location.href = `/login.html${query}`);\n};\n\nconst handleSSO = () => {\n    return authAdapter.logout();\n};\n\nconst handleUnknown = () => {\n    return authAdapter.logout().then(() => window.location.href = '/unknown.html');\n};\n\nconst handleByLoginMethod = (error) => {\n    const { session } = identification;\n    const loginType = access(session, ['loginMethod', 'objectType']);\n    switch (loginType) {\n        case 'sso': return handleSSO(error);\n        case 'none':return handleUnknown(error);\n        case 'native':\n        default: return handleByRelog(error);\n    }\n};\n\nconst UNAUTHORIZED = 401;\nclass ErrorManager {\n    _handlers = [\n        {/* Default Unauthorized (401) Error Handler */\n            identifier: (error) => error.status === UNAUTHORIZED,\n            handle: (error, retry) => {\n                if (error.code === 'AUTHENTICATION_INVALIDATED') {\n                    return authAdapter.upgrade({ objectType: 'user', inert: true })\n                        .then(() => retry())\n                        .catch(() => handleByLoginMethod(error));\n                }\n                if (isNode()) return Promise.reject(error);\n                return handleByLoginMethod(error);\n            },\n        },\n    ];\n\n    get handlers() {\n        return this._handlers;\n    }\n\n    registerHandler(identifier, handleFn) {\n        this.handlers.unshift({\n            identifier,\n            handle: handleFn,\n        });\n    }\n\n    async handle(error, retryFn, handlers/* which is undefined unless recursing */) {\n        handlers = handlers || this.handlers;\n        const index = handlers.findIndex(({ identifier }) => identifier(error));\n        const handler = handlers[index];\n        const remainingHandlers = index > 0 ? handlers.slice(index + 1) : [];\n        if (!handler) throw error;\n        let promise;\n        try {\n            promise = await handler.handle(error, retryFn).catch((err) => {\n                /* This catch call ensures that handle always returns a promise,\n                otherwise it'd be caught in the catch block below */\n                throw err;\n            });\n        } catch (e) {\n            promise = await this.handle(error, retryFn, remainingHandlers);\n        }\n        return promise;\n    }\n}\n\nconst errorManager = new ErrorManager();\nexport default errorManager;\n","import config from '~/config';\nimport { EpicenterError, NodeStore, SessionStore, CookieStore, cookies, isNode } from 'utils';\nimport { BROWSER_STORAGE_TYPE } from 'utils/constants';\nconst { COOKIE, SESSION } = BROWSER_STORAGE_TYPE;\n\n\nconst SESSION_KEY = Symbol('com.forio.epicenter.session');\nconst EPI_SSO_KEY = 'epicenter.v3.sso';\nclass Identification {\n    type\n\n    constructor(storeType) {\n        if (storeType !== COOKIE && storeType !== SESSION) {\n            throw new EpicenterError(`Invalid Storage Type: \"${storeType}\", please use \"${COOKIE}\" or \"${SESSION}\".`);\n        }\n        this.type = storeType;\n        this.consumeSSO();\n    }\n    get session() {\n        const Store = this.getStore();\n        return new Store().getItem(SESSION_KEY.description);\n    }\n    set session(session) {\n        const Store = this.getStore();\n        const path = this.getSessionPath(session);\n\n        if (session) {\n            new Store({ path }).setItem(SESSION_KEY.description, session);\n        } else if (this.session) {\n            new Store({ path }).removeItem(SESSION_KEY.description);\n        }\n    }\n    getStore() {\n        if (isNode()) return NodeStore;\n        switch (this.type) {\n            case SESSION: return SessionStore;\n            case COOKIE:\n            default: return CookieStore;\n        }\n    }\n    /* Generates the appropriate path for storing your session (applicable only to cookies) */\n    getSessionPath(session) {\n        const mySession = session || this.session;\n        if (!mySession || isNode()) return '';\n\n        const { accountShortName, projectShortName, objectType } = mySession;\n        const isLocal = config.isLocal();\n        const isCustomDomain = !isLocal && window.location.pathname.split('/')[1] !== 'app';\n        const isEpicenterDomain = !isLocal && !isCustomDomain;\n        if (objectType === 'user' && accountShortName && projectShortName && isEpicenterDomain) {\n            return `/app/${accountShortName}/${projectShortName}`;\n        }\n        /* Admins and any custom domains (ones that don't use 'app/account/project') get the root path */\n        return '/';\n    }\n    consumeSSO() {\n        if (isNode()) return;\n        /* Double parse here b/c the backend serializes it as a string; the first parse\n         * converts it into a json string, the second parse converts the json string into\n         * json. Yes, it's weird, no, we can't change it (unless we want to rewrite\n         * Interface Builder code to accommodate) */\n        const session = JSON.parse(JSON.parse(`\"${cookies.getItem(EPI_SSO_KEY)}\"`));\n        if (session) {\n            const { accountShortName, projectShortName } = session;\n            this.session = session;\n            cookies.removeItem(EPI_SSO_KEY, { domain: `.${window.location.hostname}`, path: `/app/${accountShortName}/${projectShortName}` });\n        }\n    }\n}\n\nconst identification = new Identification(COOKIE);\nexport default identification;\n\n","import fetch from 'cross-fetch';\nimport config from '~/config';\nimport { EpicenterError, Fault, Result, identification, toQueryString, prefix, errorManager } from 'utils';\n\n\nconst DEFAULT_ACCOUNT_SHORT_NAME = 'epicenter';\nconst DEFAULT_PROJECT_SHORT_NAME = 'manager';\n\nasync function request(url, { method, body, includeAuthorization, inert }) {\n    const headers = {\n        'Content-type': 'application/json; charset=UTF-8',\n    };\n    const { session } = identification;\n    if (includeAuthorization && session) {\n        headers.Authorization = `Bearer ${session.token}`;\n    }\n\n    const response = await fetch(url, {\n        method: method,\n        cache: 'no-cache',\n        headers: headers,\n        redirect: 'follow',\n        body: body ? JSON.stringify(body) : null,\n    });\n\n    const contentType = response.headers.get('content-type');\n    if (!contentType || !contentType.includes('application/json')) {\n        throw new EpicenterError(`Response content-type '${contentType}' does not include 'application/json'`);\n    }\n\n    if ((response.status >= 200) && (response.status < 400)) {\n        return new Result(response.status, response.headers, await response.json());\n    }\n\n    const error = new Fault(response.status, await response.json());\n    if (inert) throw error;\n\n    const retry = () => request(url, { method, body, includeAuthorization, inert: true });\n    return errorManager.handle(error, retry);\n}\n\nexport default class Router {\n    get server() {\n        return this._server;\n    }\n\n    set server(value) {\n        this._server = value;\n    }\n\n    get version() {\n        return this._version;\n    }\n\n    set version(value) {\n        this._version = value;\n    }\n\n    get accountShortName() {\n        return this._accountShortName;\n    }\n\n    set accountShortName(value) {\n        this._accountShortName = value;\n    }\n\n    get projectShortName() {\n        return this._projectShortName;\n    }\n\n    set projectShortName(value) {\n        this._projectShortName = value;\n    }\n\n    get searchParams() {\n        return this._searchParams || '';\n    }\n\n    set searchParams(value) {\n        this._searchParams = toQueryString(value);\n    }\n\n    withServer(server) {\n        if (server) this.server = server;\n        return this;\n    }\n\n    withVersion(version) {\n        if (version) this.version = version;\n        return this;\n    }\n\n    withAccountShortName(accountShortName) {\n        if (accountShortName) this.accountShortName = accountShortName;\n        return this;\n    }\n\n    withProjectShortName(projectShortName) {\n        if (projectShortName) this.projectShortName = projectShortName;\n        return this;\n    }\n\n    withSearchParams(searchParams) {\n        if (!searchParams) return this;\n        const isEmpty = typeof searchParams === 'object' && Object.entries(searchParams).length === 0;\n        if (!isEmpty) this.searchParams = searchParams;\n        return this;\n    }\n\n    async configure() {\n        await config.load();\n        if (!this.server) this.withServer(`${config.apiScheme}://${config.apiHost}`);\n        if (!this.accountShortName) this.withAccountShortName(config.accountShortName);\n        if (!this.projectShortName) this.withProjectShortName(config.projectShortName);\n        if (!this.version) this.withVersion(config.apiVersion);\n    }\n\n    async getURL(uriComponent) {\n        await this.configure();\n        const url = new URL(`${this.server}`);\n        url.pathname = `v${this.version}/${this.accountShortName}/${this.projectShortName}${prefix('/', uriComponent)}`;\n        url.search = this.searchParams;\n        return url;\n    }\n\n    //Network Requests\n    async get(uriComponent, options) {\n        const url = await this.getURL(uriComponent);\n        return request(url, {\n            includeAuthorization: true,\n            ...options,\n            method: 'GET',\n        });\n    }\n\n    async delete(uriComponent, options) {\n        const url = await this.getURL(uriComponent);\n        return request(url, {\n            includeAuthorization: true,\n            ...options,\n            method: 'DELETE',\n        });\n    }\n\n    async patch(uriComponent, options) {\n        const url = await this.getURL(uriComponent);\n        return request(url, {\n            includeAuthorization: true,\n            ...options,\n            method: 'PATCH',\n        });\n    }\n\n    async post(uriComponent, options) {\n        const url = await this.getURL(uriComponent);\n        return request(url, {\n            includeAuthorization: true,\n            ...options,\n            method: 'POST',\n        });\n    }\n\n    async put(uriComponent, options) {\n        const url = await this.getURL(uriComponent);\n        return request(url, {\n            includeAuthorization: true,\n            ...options,\n            method: 'PUT',\n        });\n    }\n}\n","import fetch from 'cross-fetch';\nimport { EpicenterError, Fault, isBrowser, isNode, last } from 'utils';\n\nconst API_VERSION = 3;\nclass Config {\n    _apiVersion = API_VERSION;\n    _apiScheme = 'http';\n    _apiHost = 'api.forio.com';\n    _localConfigProtocol = 'https:'\n    _localConfigHost = 'test.forio.com';\n\n    get apiScheme() {\n        return this._apiScheme;\n    }\n\n    set apiScheme(apiScheme) {\n        this._apiScheme = apiScheme;\n    }\n\n    get apiHost() {\n        return this._apiHost;\n    }\n\n    set apiHost(apiHost) {\n        this._apiHost = apiHost;\n    }\n\n    get localConfigProtocol() {\n        return this._localConfigProtocol;\n    }\n\n    set localConfigProtocol(localConfigProtocol) {\n        if (last(localConfigProtocol) !== ':') {\n            localConfigProtocol = `${localConfigProtocol}:`;\n        }\n        this._localConfigProtocol = localConfigProtocol;\n    }\n\n    get localConfigHost() {\n        return this._localConfigHost;\n    }\n\n    set localConfigHost(localConfigHost) {\n        this._localConfigHost = localConfigHost;\n    }\n\n    get apiVersion() {\n        return this._apiVersion;\n    }\n\n    set apiVersion(apiVersion) {\n        this._apiVersion = apiVersion;\n    }\n\n    get accountShortName() {\n        return this._accountShortName;\n    }\n\n    set accountShortName(accountShortName) {\n        this._accountShortName = accountShortName;\n    }\n\n    get projectShortName() {\n        return this._projectShortName;\n    }\n\n    set projectShortName(projectShortName) {\n        this._projectShortName = projectShortName;\n    }\n\n    isLocal() {\n        if (!isBrowser()) return false;\n        const host = window.location.host;\n        return host === '127.0.0.1' ||\n            host.indexOf('local.') === 0 ||\n            host.indexOf('ngrok') !== -1 ||\n            host.indexOf('localhost') === 0;\n    }\n\n    getPathAccountProject(pathname) {\n        const match = pathname.match(/\\/app\\/([\\w-]+)\\/([\\w-]+)/);\n        if (match) {\n            const [account, project] = match.slice(1);\n            this.accountShortName = account;\n            this.projectShortName = project;\n        }\n    }\n\n    async loadNode() {\n        // TODO -- use process env variables instead here for Node server\n        this.apiScheme = 'https';\n        this.apiHost = 'test.forio.com';\n        return;\n    }\n\n    async loadBrowser() {\n        const isLocal = this.isLocal();\n        const protocol = isLocal ? this.localConfigProtocol : window.location.protocol;\n        const host = isLocal ? this.localConfigHost : window.location.host;\n        if (!isLocal) this.getPathAccountProject(window.location.pathname);\n\n        const response = await fetch(`${protocol}//${host}/epicenter/v${this._apiVersion}/config`, {\n            method: 'GET',\n            cache: 'no-cache',\n            redirect: 'follow',\n        });\n\n        const contentType = response.headers.get('content-type');\n        if (!contentType || !contentType.includes('application/json')) {\n            throw new EpicenterError('Invalid configuration response');\n        }\n\n        if ((response.status >= 200) && (response.status < 400)) {\n            const body = await response.json();\n            this.apiScheme = body.api.protocol;\n            this.apiHost = body.api.host;\n        } else {\n            throw new Fault(response.status, await response.json());\n        }\n        return response;\n    }\n\n    async load() {\n        if (this.loading) return await this.loading;\n\n        if (isNode()) {\n            this.loading = this.loadNode();\n            return await this.loading;\n        }\n\n        if (isBrowser() && window.location.protocol.includes('http')) {\n            this.loading = this.loadBrowser();\n            return await this.loading;\n        }\n\n        throw new EpicenterError('Could not identify environment; no configuration was setup');\n    }\n}\n\nconst config = new Config();\nexport default config;\n","const version = VERSION;\nexport { default as config } from '~/config';\nexport { version };\nexport {\n    BROWSER_STORAGE_TYPE,\n    SCOPE_BOUNDARY,\n    RITUAL,\n    PUSH_CATEGORY,\n    LOCK_TYPE,\n} from 'utils/constants';\nexport {\n    errorManager,\n} from 'utils';\nexport {\n    Channel,\n    accountAdapter,\n    authAdapter,\n    presenceAdapter,\n    projectAdapter,\n    runAdapter,\n} from 'adapters';\n\n"],"sourceRoot":""}